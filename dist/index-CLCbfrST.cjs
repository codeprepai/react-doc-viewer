"use strict";var j1=Object.defineProperty;var H1=(s,t,e)=>t in s?j1(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var gt=(s,t,e)=>(H1(s,typeof t!="symbol"?t+"":t,e),e),Ip=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var o=(s,t,e)=>(Ip(s,t,"read from private field"),e?e.call(s):t.get(s)),m=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},w=(s,t,e,n)=>(Ip(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e);var We=(s,t,e,n)=>({set _(i){w(s,t,i,e)},get _(){return o(s,t,n)}}),A=(s,t,e)=>(Ip(s,t,"access private method"),e);const O=require("react/jsx-runtime"),H=require("react");var ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function U1(s){if(s.__esModule)return s;var t=s.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var i=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return s[n]}})}),e}var tl=function(s){return s&&s.Math===Math&&s},ni=tl(typeof globalThis=="object"&&globalThis)||tl(typeof window=="object"&&window)||tl(typeof self=="object"&&self)||tl(typeof ya=="object"&&ya)||tl(typeof ya=="object"&&ya)||function(){return this}()||Function("return this")(),qm={},Ts=function(s){try{return!!s()}catch{return!0}},z1=Ts,ia=!z1(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),V1=Ts,Xv=!V1(function(){var s=(function(){}).bind();return typeof s!="function"||s.hasOwnProperty("prototype")}),G1=Xv,su=Function.prototype.call,Xm=G1?su.bind(su):function(){return su.apply(su,arguments)},Yv={},Kv={}.propertyIsEnumerable,Zv=Object.getOwnPropertyDescriptor,W1=Zv&&!Kv.call({1:2},1);Yv.f=W1?function(t){var e=Zv(this,t);return!!e&&e.enumerable}:Kv;var Jv=function(s,t){return{enumerable:!(s&1),configurable:!(s&2),writable:!(s&4),value:t}},Qv=Xv,ty=Function.prototype,cg=ty.call,q1=Qv&&ty.bind.bind(cg,cg),Gi=Qv?q1:function(s){return function(){return cg.apply(s,arguments)}},ey=Gi,X1=ey({}.toString),Y1=ey("".slice),K1=function(s){return Y1(X1(s),8,-1)},Z1=Gi,J1=Ts,Q1=K1,Mp=Object,tA=Z1("".split),eA=J1(function(){return!Mp("z").propertyIsEnumerable(0)})?function(s){return Q1(s)==="String"?tA(s,""):Mp(s)}:Mp,ny=function(s){return s==null},nA=ny,iA=TypeError,iy=function(s){if(nA(s))throw new iA("Can't call method on "+s);return s},sA=eA,rA=iy,Ym=function(s){return sA(rA(s))},Fp=typeof document=="object"&&document.all,ii=typeof Fp>"u"&&Fp!==void 0?function(s){return typeof s=="function"||s===Fp}:function(s){return typeof s=="function"},aA=ii,Gh=function(s){return typeof s=="object"?s!==null:aA(s)},Dp=ni,oA=ii,lA=function(s){return oA(s)?s:void 0},sy=function(s,t){return arguments.length<2?lA(Dp[s]):Dp[s]&&Dp[s][t]},cA=Gi,hA=cA({}.isPrototypeOf),uA=typeof navigator<"u"&&String(navigator.userAgent)||"",ry=ni,Op=uA,P0=ry.process,R0=ry.Deno,L0=P0&&P0.versions||R0&&R0.version,k0=L0&&L0.v8,Rn,Zu;k0&&(Rn=k0.split("."),Zu=Rn[0]>0&&Rn[0]<4?1:+(Rn[0]+Rn[1]));!Zu&&Op&&(Rn=Op.match(/Edge\/(\d+)/),(!Rn||Rn[1]>=74)&&(Rn=Op.match(/Chrome\/(\d+)/),Rn&&(Zu=+Rn[1])));var dA=Zu,I0=dA,fA=Ts,pA=ni,gA=pA.String,ay=!!Object.getOwnPropertySymbols&&!fA(function(){var s=Symbol("symbol detection");return!gA(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&I0&&I0<41}),mA=ay,oy=mA&&!Symbol.sham&&typeof Symbol.iterator=="symbol",vA=sy,yA=ii,bA=hA,wA=oy,AA=Object,ly=wA?function(s){return typeof s=="symbol"}:function(s){var t=vA("Symbol");return yA(t)&&bA(t.prototype,AA(s))},EA=String,_A=function(s){try{return EA(s)}catch{return"Object"}},xA=ii,SA=_A,CA=TypeError,cy=function(s){if(xA(s))return s;throw new CA(SA(s)+" is not a function")},TA=cy,PA=ny,RA=function(s,t){var e=s[t];return PA(e)?void 0:TA(e)},Np=Xm,Bp=ii,$p=Gh,LA=TypeError,kA=function(s,t){var e,n;if(t==="string"&&Bp(e=s.toString)&&!$p(n=Np(e,s))||Bp(e=s.valueOf)&&!$p(n=Np(e,s))||t!=="string"&&Bp(e=s.toString)&&!$p(n=Np(e,s)))return n;throw new LA("Can't convert object to primitive value")},hy={exports:{}},M0=ni,IA=Object.defineProperty,Km=function(s,t){try{IA(M0,s,{value:t,configurable:!0,writable:!0})}catch{M0[s]=t}return t},MA=ni,FA=Km,F0="__core-js_shared__",D0=hy.exports=MA[F0]||FA(F0,{});(D0.versions||(D0.versions=[])).push({version:"3.37.1",mode:"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Zm=hy.exports,O0=Zm,uy=function(s,t){return O0[s]||(O0[s]=t||{})},DA=iy,OA=Object,NA=function(s){return OA(DA(s))},BA=Gi,$A=NA,jA=BA({}.hasOwnProperty),sa=Object.hasOwn||function(t,e){return jA($A(t),e)},HA=Gi,UA=0,zA=Math.random(),VA=HA(1 .toString),dy=function(s){return"Symbol("+(s===void 0?"":s)+")_"+VA(++UA+zA,36)},GA=ni,WA=uy,N0=sa,qA=dy,XA=ay,YA=oy,ba=GA.Symbol,jp=WA("wks"),KA=YA?ba.for||ba:ba&&ba.withoutSetter||qA,ZA=function(s){return N0(jp,s)||(jp[s]=XA&&N0(ba,s)?ba[s]:KA("Symbol."+s)),jp[s]},JA=Xm,B0=Gh,$0=ly,QA=RA,tE=kA,eE=ZA,nE=TypeError,iE=eE("toPrimitive"),sE=function(s,t){if(!B0(s)||$0(s))return s;var e=QA(s,iE),n;if(e){if(t===void 0&&(t="default"),n=JA(e,s,t),!B0(n)||$0(n))return n;throw new nE("Can't convert object to primitive value")}return t===void 0&&(t="number"),tE(s,t)},rE=sE,aE=ly,fy=function(s){var t=rE(s,"string");return aE(t)?t:t+""},oE=ni,j0=Gh,hg=oE.document,lE=j0(hg)&&j0(hg.createElement),cE=function(s){return lE?hg.createElement(s):{}},hE=ia,uE=Ts,dE=cE,py=!hE&&!uE(function(){return Object.defineProperty(dE("div"),"a",{get:function(){return 7}}).a!==7}),fE=ia,pE=Xm,gE=Yv,mE=Jv,vE=Ym,yE=fy,bE=sa,wE=py,H0=Object.getOwnPropertyDescriptor;qm.f=fE?H0:function(t,e){if(t=vE(t),e=yE(e),wE)try{return H0(t,e)}catch{}if(bE(t,e))return mE(!pE(gE.f,t,e),t[e])};var tp={},AE=ia,EE=Ts,_E=AE&&EE(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),xE=Gh,SE=String,CE=TypeError,gy=function(s){if(xE(s))return s;throw new CE(SE(s)+" is not an object")},TE=ia,PE=py,RE=_E,ru=gy,U0=fy,LE=TypeError,Hp=Object.defineProperty,kE=Object.getOwnPropertyDescriptor,Up="enumerable",zp="configurable",Vp="writable";tp.f=TE?RE?function(t,e,n){if(ru(t),e=U0(e),ru(n),typeof t=="function"&&e==="prototype"&&"value"in n&&Vp in n&&!n[Vp]){var i=kE(t,e);i&&i[Vp]&&(t[e]=n.value,n={configurable:zp in n?n[zp]:i[zp],enumerable:Up in n?n[Up]:i[Up],writable:!1})}return Hp(t,e,n)}:Hp:function(t,e,n){if(ru(t),e=U0(e),ru(n),PE)try{return Hp(t,e,n)}catch{}if("get"in n||"set"in n)throw new LE("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var IE=ia,ME=tp,FE=Jv,my=IE?function(s,t,e){return ME.f(s,t,FE(1,e))}:function(s,t,e){return s[t]=e,s},vy={exports:{}},ug=ia,DE=sa,yy=Function.prototype,OE=ug&&Object.getOwnPropertyDescriptor,Jm=DE(yy,"name"),NE=Jm&&(function(){}).name==="something",BE=Jm&&(!ug||ug&&OE(yy,"name").configurable),$E={EXISTS:Jm,PROPER:NE,CONFIGURABLE:BE},jE=Gi,HE=ii,dg=Zm,UE=jE(Function.toString);HE(dg.inspectSource)||(dg.inspectSource=function(s){return UE(s)});var zE=dg.inspectSource,VE=ni,GE=ii,z0=VE.WeakMap,WE=GE(z0)&&/native code/.test(String(z0)),qE=uy,XE=dy,V0=qE("keys"),YE=function(s){return V0[s]||(V0[s]=XE(s))},by={},KE=WE,wy=ni,ZE=Gh,JE=my,Gp=sa,Wp=Zm,QE=YE,t_=by,G0="Object already initialized",fg=wy.TypeError,e_=wy.WeakMap,Ju,xl,Qu,n_=function(s){return Qu(s)?xl(s):Ju(s,{})},i_=function(s){return function(t){var e;if(!ZE(t)||(e=xl(t)).type!==s)throw new fg("Incompatible receiver, "+s+" required");return e}};if(KE||Wp.state){var kn=Wp.state||(Wp.state=new e_);kn.get=kn.get,kn.has=kn.has,kn.set=kn.set,Ju=function(s,t){if(kn.has(s))throw new fg(G0);return t.facade=s,kn.set(s,t),t},xl=function(s){return kn.get(s)||{}},Qu=function(s){return kn.has(s)}}else{var ca=QE("state");t_[ca]=!0,Ju=function(s,t){if(Gp(s,ca))throw new fg(G0);return t.facade=s,JE(s,ca,t),t},xl=function(s){return Gp(s,ca)?s[ca]:{}},Qu=function(s){return Gp(s,ca)}}var s_={set:Ju,get:xl,has:Qu,enforce:n_,getterFor:i_},Qm=Gi,r_=Ts,a_=ii,au=sa,pg=ia,o_=$E.CONFIGURABLE,l_=zE,Ay=s_,c_=Ay.enforce,h_=Ay.get,W0=String,yu=Object.defineProperty,u_=Qm("".slice),d_=Qm("".replace),f_=Qm([].join),p_=pg&&!r_(function(){return yu(function(){},"length",{value:8}).length!==8}),g_=String(String).split("String"),m_=vy.exports=function(s,t,e){u_(W0(t),0,7)==="Symbol("&&(t="["+d_(W0(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),e&&e.getter&&(t="get "+t),e&&e.setter&&(t="set "+t),(!au(s,"name")||o_&&s.name!==t)&&(pg?yu(s,"name",{value:t,configurable:!0}):s.name=t),p_&&e&&au(e,"arity")&&s.length!==e.arity&&yu(s,"length",{value:e.arity});try{e&&au(e,"constructor")&&e.constructor?pg&&yu(s,"prototype",{writable:!1}):s.prototype&&(s.prototype=void 0)}catch{}var n=c_(s);return au(n,"source")||(n.source=f_(g_,typeof t=="string"?t:"")),s};Function.prototype.toString=m_(function(){return a_(this)&&h_(this).source||l_(this)},"toString");var v_=vy.exports,y_=ii,b_=tp,w_=v_,A_=Km,E_=function(s,t,e,n){n||(n={});var i=n.enumerable,r=n.name!==void 0?n.name:t;if(y_(e)&&w_(e,r,n),n.global)i?s[t]=e:A_(t,e);else{try{n.unsafe?s[t]&&(i=!0):delete s[t]}catch{}i?s[t]=e:b_.f(s,t,{value:e,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return s},Ey={},__=Math.ceil,x_=Math.floor,S_=Math.trunc||function(t){var e=+t;return(e>0?x_:__)(e)},C_=S_,_y=function(s){var t=+s;return t!==t||t===0?0:C_(t)},T_=_y,P_=Math.max,R_=Math.min,L_=function(s,t){var e=T_(s);return e<0?P_(e+t,0):R_(e,t)},k_=_y,I_=Math.min,M_=function(s){var t=k_(s);return t>0?I_(t,9007199254740991):0},F_=M_,D_=function(s){return F_(s.length)},O_=Ym,N_=L_,B_=D_,q0=function(s){return function(t,e,n){var i=O_(t),r=B_(i);if(r===0)return!s&&-1;var a=N_(n,r),l;if(s&&e!==e){for(;r>a;)if(l=i[a++],l!==l)return!0}else for(;r>a;a++)if((s||a in i)&&i[a]===e)return s||a||0;return!s&&-1}},$_={includes:q0(!0),indexOf:q0(!1)},j_=Gi,qp=sa,H_=Ym,U_=$_.indexOf,z_=by,X0=j_([].push),V_=function(s,t){var e=H_(s),n=0,i=[],r;for(r in e)!qp(z_,r)&&qp(e,r)&&X0(i,r);for(;t.length>n;)qp(e,r=t[n++])&&(~U_(i,r)||X0(i,r));return i},G_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],W_=V_,q_=G_,X_=q_.concat("length","prototype");Ey.f=Object.getOwnPropertyNames||function(t){return W_(t,X_)};var xy={};xy.f=Object.getOwnPropertySymbols;var Y_=sy,K_=Gi,Z_=Ey,J_=xy,Q_=gy,tx=K_([].concat),ex=Y_("Reflect","ownKeys")||function(t){var e=Z_.f(Q_(t)),n=J_.f;return n?tx(e,n(t)):e},Y0=sa,nx=ex,ix=qm,sx=tp,rx=function(s,t,e){for(var n=nx(t),i=sx.f,r=ix.f,a=0;a<n.length;a++){var l=n[a];!Y0(s,l)&&!(e&&Y0(e,l))&&i(s,l,r(t,l))}},ax=Ts,ox=ii,lx=/#|\.prototype\./,Wh=function(s,t){var e=hx[cx(s)];return e===dx?!0:e===ux?!1:ox(t)?ax(t):!!t},cx=Wh.normalize=function(s){return String(s).replace(lx,".").toLowerCase()},hx=Wh.data={},ux=Wh.NATIVE="N",dx=Wh.POLYFILL="P",fx=Wh,ou=ni,px=qm.f,gx=my,mx=E_,vx=Km,yx=rx,bx=fx,wx=function(s,t){var e=s.target,n=s.global,i=s.stat,r,a,l,c,u,h;if(n?a=ou:i?a=ou[e]||vx(e,{}):a=ou[e]&&ou[e].prototype,a)for(l in t){if(u=t[l],s.dontCallGetSet?(h=px(a,l),c=h&&h.value):c=a[l],r=bx(n?l:e+(i?".":"#")+l,s.forced),!r&&c!==void 0){if(typeof u==typeof c)continue;yx(u,c)}(s.sham||c&&c.sham)&&gx(u,"sham",!0),mx(a,l,u,s)}},Sy={},K0=cy,Ax=TypeError,Ex=function(s){var t,e;this.promise=new s(function(n,i){if(t!==void 0||e!==void 0)throw new Ax("Bad Promise constructor");t=n,e=i}),this.resolve=K0(t),this.reject=K0(e)};Sy.f=function(s){return new Ex(s)};var _x=wx,xx=Sy;_x({target:"Promise",stat:!0},{withResolvers:function(){var t=xx.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}});function Sx(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Cy={exports:{}},Zt=Cy.exports={},Mn,Fn;function gg(){throw new Error("setTimeout has not been defined")}function mg(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Mn=setTimeout:Mn=gg}catch{Mn=gg}try{typeof clearTimeout=="function"?Fn=clearTimeout:Fn=mg}catch{Fn=mg}})();function Ty(s){if(Mn===setTimeout)return setTimeout(s,0);if((Mn===gg||!Mn)&&setTimeout)return Mn=setTimeout,setTimeout(s,0);try{return Mn(s,0)}catch{try{return Mn.call(null,s,0)}catch{return Mn.call(this,s,0)}}}function Cx(s){if(Fn===clearTimeout)return clearTimeout(s);if((Fn===mg||!Fn)&&clearTimeout)return Fn=clearTimeout,clearTimeout(s);try{return Fn(s)}catch{try{return Fn.call(null,s)}catch{return Fn.call(this,s)}}}var $i=[],Aa=!1,$s,bu=-1;function Tx(){!Aa||!$s||(Aa=!1,$s.length?$i=$s.concat($i):bu=-1,$i.length&&Py())}function Py(){if(!Aa){var s=Ty(Tx);Aa=!0;for(var t=$i.length;t;){for($s=$i,$i=[];++bu<t;)$s&&$s[bu].run();bu=-1,t=$i.length}$s=null,Aa=!1,Cx(s)}}Zt.nextTick=function(s){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];$i.push(new Ry(s,t)),$i.length===1&&!Aa&&Ty(Py)};function Ry(s,t){this.fun=s,this.array=t}Ry.prototype.run=function(){this.fun.apply(null,this.array)};Zt.title="browser";Zt.browser=!0;Zt.env={};Zt.argv=[];Zt.version="";Zt.versions={};function Wi(){}Zt.on=Wi;Zt.addListener=Wi;Zt.once=Wi;Zt.off=Wi;Zt.removeListener=Wi;Zt.removeAllListeners=Wi;Zt.emit=Wi;Zt.prependListener=Wi;Zt.prependOnceListener=Wi;Zt.listeners=function(s){return[]};Zt.binding=function(s){throw new Error("process.binding is not supported")};Zt.cwd=function(){return"/"};Zt.chdir=function(s){throw new Error("process.chdir is not supported")};Zt.umask=function(){return 0};var Px=Cy.exports;const dt=Sx(Px);var Le=function(){return Le=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Le.apply(this,arguments)};function Kr(s,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,r;n<i;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return s.concat(r||Array.prototype.slice.call(t))}function Rx(s){var t=Object.create(null);return function(e){return t[e]===void 0&&(t[e]=s(e)),t[e]}}var Lx=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,kx=Rx(function(s){return Lx.test(s)||s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)<91}),jt="-ms-",wl="-moz-",Pt="-webkit-",Ly="comm",ep="rule",t0="decl",Ix="@import",ky="@keyframes",Mx="@layer",Iy=Math.abs,e0=String.fromCharCode,vg=Object.assign;function Fx(s,t){return me(s,0)^45?(((t<<2^me(s,0))<<2^me(s,1))<<2^me(s,2))<<2^me(s,3):0}function My(s){return s.trim()}function oi(s,t){return(s=t.exec(s))?s[0]:s}function vt(s,t,e){return s.replace(t,e)}function wu(s,t,e){return s.indexOf(t,e)}function me(s,t){return s.charCodeAt(t)|0}function Go(s,t,e){return s.slice(t,e)}function Qn(s){return s.length}function Fy(s){return s.length}function sl(s,t){return t.push(s),s}function Dx(s,t){return s.map(t).join("")}function Z0(s,t){return s.filter(function(e){return!oi(e,t)})}var np=1,Wo=1,Dy=0,fn=0,ee=0,Zo="";function ip(s,t,e,n,i,r,a,l){return{value:s,root:t,parent:e,type:n,props:i,children:r,line:np,column:Wo,length:a,return:"",siblings:l}}function qi(s,t){return vg(ip("",null,null,"",null,null,0,s.siblings),s,{length:-s.length},t)}function ha(s){for(;s.root;)s=qi(s.root,{children:[s]});sl(s,s.siblings)}function Ox(){return ee}function Nx(){return ee=fn>0?me(Zo,--fn):0,Wo--,ee===10&&(Wo=1,np--),ee}function Ln(){return ee=fn<Dy?me(Zo,fn++):0,Wo++,ee===10&&(Wo=1,np++),ee}function Xr(){return me(Zo,fn)}function Au(){return fn}function sp(s,t){return Go(Zo,s,t)}function yg(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Bx(s){return np=Wo=1,Dy=Qn(Zo=s),fn=0,[]}function $x(s){return Zo="",s}function Xp(s){return My(sp(fn-1,bg(s===91?s+2:s===40?s+1:s)))}function jx(s){for(;(ee=Xr())&&ee<33;)Ln();return yg(s)>2||yg(ee)>3?"":" "}function Hx(s,t){for(;--t&&Ln()&&!(ee<48||ee>102||ee>57&&ee<65||ee>70&&ee<97););return sp(s,Au()+(t<6&&Xr()==32&&Ln()==32))}function bg(s){for(;Ln();)switch(ee){case s:return fn;case 34:case 39:s!==34&&s!==39&&bg(ee);break;case 40:s===41&&bg(s);break;case 92:Ln();break}return fn}function Ux(s,t){for(;Ln()&&s+ee!==57;)if(s+ee===84&&Xr()===47)break;return"/*"+sp(t,fn-1)+"*"+e0(s===47?s:Ln())}function zx(s){for(;!yg(Xr());)Ln();return sp(s,fn)}function Vx(s){return $x(Eu("",null,null,null,[""],s=Bx(s),0,[0],s))}function Eu(s,t,e,n,i,r,a,l,c){for(var u=0,h=0,f=a,g=0,v=0,y=0,E=1,C=1,_=1,P=0,L="",k=i,F=r,I=n,M=L;C;)switch(y=P,P=Ln()){case 40:if(y!=108&&me(M,f-1)==58){wu(M+=vt(Xp(P),"&","&\f"),"&\f",Iy(u?l[u-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:M+=Xp(P);break;case 9:case 10:case 13:case 32:M+=jx(y);break;case 92:M+=Hx(Au()-1,7);continue;case 47:switch(Xr()){case 42:case 47:sl(Gx(Ux(Ln(),Au()),t,e,c),c);break;default:M+="/"}break;case 123*E:l[u++]=Qn(M)*_;case 125*E:case 59:case 0:switch(P){case 0:case 125:C=0;case 59+h:_==-1&&(M=vt(M,/\f/g,"")),v>0&&Qn(M)-f&&sl(v>32?Q0(M+";",n,e,f-1,c):Q0(vt(M," ","")+";",n,e,f-2,c),c);break;case 59:M+=";";default:if(sl(I=J0(M,t,e,u,h,i,l,L,k=[],F=[],f,r),r),P===123)if(h===0)Eu(M,t,I,I,k,r,f,l,F);else switch(g===99&&me(M,3)===110?100:g){case 100:case 108:case 109:case 115:Eu(s,I,I,n&&sl(J0(s,I,I,0,0,i,l,L,i,k=[],f,F),F),i,F,f,l,n?k:F);break;default:Eu(M,I,I,I,[""],F,0,l,F)}}u=h=v=0,E=_=1,L=M="",f=a;break;case 58:f=1+Qn(M),v=y;default:if(E<1){if(P==123)--E;else if(P==125&&E++==0&&Nx()==125)continue}switch(M+=e0(P),P*E){case 38:_=h>0?1:(M+="\f",-1);break;case 44:l[u++]=(Qn(M)-1)*_,_=1;break;case 64:Xr()===45&&(M+=Xp(Ln())),g=Xr(),h=f=Qn(L=M+=zx(Au())),P++;break;case 45:y===45&&Qn(M)==2&&(E=0)}}return r}function J0(s,t,e,n,i,r,a,l,c,u,h,f){for(var g=i-1,v=i===0?r:[""],y=Fy(v),E=0,C=0,_=0;E<n;++E)for(var P=0,L=Go(s,g+1,g=Iy(C=a[E])),k=s;P<y;++P)(k=My(C>0?v[P]+" "+L:vt(L,/&\f/g,v[P])))&&(c[_++]=k);return ip(s,t,e,i===0?ep:l,c,u,h,f)}function Gx(s,t,e,n){return ip(s,t,e,Ly,e0(Ox()),Go(s,2,-2),0,n)}function Q0(s,t,e,n,i){return ip(s,t,e,t0,Go(s,0,n),Go(s,n+1,-1),n,i)}function Oy(s,t,e){switch(Fx(s,t)){case 5103:return Pt+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pt+s+s;case 4789:return wl+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return Pt+s+wl+s+jt+s+s;case 5936:switch(me(s,t+11)){case 114:return Pt+s+jt+vt(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return Pt+s+jt+vt(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return Pt+s+jt+vt(s,/[svh]\w+-[tblr]{2}/,"lr")+s}case 6828:case 4268:case 2903:return Pt+s+jt+s+s;case 6165:return Pt+s+jt+"flex-"+s+s;case 5187:return Pt+s+vt(s,/(\w+).+(:[^]+)/,Pt+"box-$1$2"+jt+"flex-$1$2")+s;case 5443:return Pt+s+jt+"flex-item-"+vt(s,/flex-|-self/g,"")+(oi(s,/flex-|baseline/)?"":jt+"grid-row-"+vt(s,/flex-|-self/g,""))+s;case 4675:return Pt+s+jt+"flex-line-pack"+vt(s,/align-content|flex-|-self/g,"")+s;case 5548:return Pt+s+jt+vt(s,"shrink","negative")+s;case 5292:return Pt+s+jt+vt(s,"basis","preferred-size")+s;case 6060:return Pt+"box-"+vt(s,"-grow","")+Pt+s+jt+vt(s,"grow","positive")+s;case 4554:return Pt+vt(s,/([^-])(transform)/g,"$1"+Pt+"$2")+s;case 6187:return vt(vt(vt(s,/(zoom-|grab)/,Pt+"$1"),/(image-set)/,Pt+"$1"),s,"")+s;case 5495:case 3959:return vt(s,/(image-set\([^]*)/,Pt+"$1$`$1");case 4968:return vt(vt(s,/(.+:)(flex-)?(.*)/,Pt+"box-pack:$3"+jt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pt+s+s;case 4200:if(!oi(s,/flex-|baseline/))return jt+"grid-column-align"+Go(s,t)+s;break;case 2592:case 3360:return jt+vt(s,"template-","")+s;case 4384:case 3616:return e&&e.some(function(n,i){return t=i,oi(n.props,/grid-\w+-end/)})?~wu(s+(e=e[t].value),"span",0)?s:jt+vt(s,"-start","")+s+jt+"grid-row-span:"+(~wu(e,"span",0)?oi(e,/\d+/):+oi(e,/\d+/)-+oi(s,/\d+/))+";":jt+vt(s,"-start","")+s;case 4896:case 4128:return e&&e.some(function(n){return oi(n.props,/grid-\w+-start/)})?s:jt+vt(vt(s,"-end","-span"),"span ","")+s;case 4095:case 3583:case 4068:case 2532:return vt(s,/(.+)-inline(.+)/,Pt+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Qn(s)-1-t>6)switch(me(s,t+1)){case 109:if(me(s,t+4)!==45)break;case 102:return vt(s,/(.+:)(.+)-([^]+)/,"$1"+Pt+"$2-$3$1"+wl+(me(s,t+3)==108?"$3":"$2-$3"))+s;case 115:return~wu(s,"stretch",0)?Oy(vt(s,"stretch","fill-available"),t,e)+s:s}break;case 5152:case 5920:return vt(s,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,i,r,a,l,c,u){return jt+i+":"+r+u+(a?jt+i+"-span:"+(l?c:+c-+r)+u:"")+s});case 4949:if(me(s,t+6)===121)return vt(s,":",":"+Pt)+s;break;case 6444:switch(me(s,me(s,14)===45?18:11)){case 120:return vt(s,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Pt+(me(s,14)===45?"inline-":"")+"box$3$1"+Pt+"$2$3$1"+jt+"$2box$3")+s;case 100:return vt(s,":",":"+jt)+s}break;case 5719:case 2647:case 2135:case 3927:case 2391:return vt(s,"scroll-","scroll-snap-")+s}return s}function td(s,t){for(var e="",n=0;n<s.length;n++)e+=t(s[n],n,s,t)||"";return e}function Wx(s,t,e,n){switch(s.type){case Mx:if(s.children.length)break;case Ix:case t0:return s.return=s.return||s.value;case Ly:return"";case ky:return s.return=s.value+"{"+td(s.children,n)+"}";case ep:if(!Qn(s.value=s.props.join(",")))return""}return Qn(e=td(s.children,n))?s.return=s.value+"{"+e+"}":""}function qx(s){var t=Fy(s);return function(e,n,i,r){for(var a="",l=0;l<t;l++)a+=s[l](e,n,i,r)||"";return a}}function Xx(s){return function(t){t.root||(t=t.return)&&s(t)}}function Yx(s,t,e,n){if(s.length>-1&&!s.return)switch(s.type){case t0:s.return=Oy(s.value,s.length,e);return;case ky:return td([qi(s,{value:vt(s.value,"@","@"+Pt)})],n);case ep:if(s.length)return Dx(e=s.props,function(i){switch(oi(i,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ha(qi(s,{props:[vt(i,/:(read-\w+)/,":"+wl+"$1")]})),ha(qi(s,{props:[i]})),vg(s,{props:Z0(e,n)});break;case"::placeholder":ha(qi(s,{props:[vt(i,/:(plac\w+)/,":"+Pt+"input-$1")]})),ha(qi(s,{props:[vt(i,/:(plac\w+)/,":"+wl+"$1")]})),ha(qi(s,{props:[vt(i,/:(plac\w+)/,jt+"input-$1")]})),ha(qi(s,{props:[i]})),vg(s,{props:Z0(e,n)});break}return""})}}var Kx={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Zr=typeof dt<"u"&&dt.env!==void 0&&(dt.env.REACT_APP_SC_ATTR||dt.env.SC_ATTR)||"data-styled",Ny="active",By="data-styled-version",rp="6.1.11",n0=`/*!sc*/
`,i0=typeof window<"u"&&"HTMLElement"in window,Zx=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof dt<"u"&&dt.env!==void 0&&dt.env.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&dt.env.REACT_APP_SC_DISABLE_SPEEDY!==""?dt.env.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&dt.env.REACT_APP_SC_DISABLE_SPEEDY:typeof dt<"u"&&dt.env!==void 0&&dt.env.SC_DISABLE_SPEEDY!==void 0&&dt.env.SC_DISABLE_SPEEDY!==""?dt.env.SC_DISABLE_SPEEDY!=="false"&&dt.env.SC_DISABLE_SPEEDY:dt.env.NODE_ENV!=="production"),tv=/invalid hook call/i,lu=new Set,Jx=function(s,t){if(dt.env.NODE_ENV!=="production"){var e=t?' with the id of "'.concat(t,'"'):"",n="The component ".concat(s).concat(e,` has been created dynamically.
`)+`You may see this warning because you've called styled inside another component.
To resolve this only create new StyledComponents outside of any render method and function component.`,i=console.error;try{var r=!0;console.error=function(a){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];tv.test(a)?(r=!1,lu.delete(n)):i.apply(void 0,Kr([a],l,!1))},H.useRef(),r&&!lu.has(n)&&(console.warn(n),lu.add(n))}catch(a){tv.test(a.message)&&lu.delete(n)}finally{console.error=i}}},ap=Object.freeze([]),qo=Object.freeze({});function Qx(s,t,e){return e===void 0&&(e=qo),s.theme!==e.theme&&s.theme||t||e.theme}var wg=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),tS=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,eS=/(^-|-$)/g;function ev(s){return s.replace(tS,"-").replace(eS,"")}var nS=/(a)(d)/gi,cu=52,nv=function(s){return String.fromCharCode(s+(s>25?39:97))};function Ag(s){var t,e="";for(t=Math.abs(s);t>cu;t=t/cu|0)e=nv(t%cu)+e;return(nv(t%cu)+e).replace(nS,"$1-$2")}var Yp,$y=5381,Os=function(s,t){for(var e=t.length;e;)s=33*s^t.charCodeAt(--e);return s},jy=function(s){return Os($y,s)};function Hy(s){return Ag(jy(s)>>>0)}function Uy(s){return dt.env.NODE_ENV!=="production"&&typeof s=="string"&&s||s.displayName||s.name||"Component"}function Kp(s){return typeof s=="string"&&(dt.env.NODE_ENV==="production"||s.charAt(0)===s.charAt(0).toLowerCase())}var zy=typeof Symbol=="function"&&Symbol.for,Vy=zy?Symbol.for("react.memo"):60115,iS=zy?Symbol.for("react.forward_ref"):60112,sS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},rS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Gy={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},aS=((Yp={})[iS]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Yp[Vy]=Gy,Yp);function iv(s){return("type"in(t=s)&&t.type.$$typeof)===Vy?Gy:"$$typeof"in s?aS[s.$$typeof]:sS;var t}var oS=Object.defineProperty,lS=Object.getOwnPropertyNames,sv=Object.getOwnPropertySymbols,cS=Object.getOwnPropertyDescriptor,hS=Object.getPrototypeOf,rv=Object.prototype;function Wy(s,t,e){if(typeof t!="string"){if(rv){var n=hS(t);n&&n!==rv&&Wy(s,n,e)}var i=lS(t);sv&&(i=i.concat(sv(t)));for(var r=iv(s),a=iv(t),l=0;l<i.length;++l){var c=i[l];if(!(c in rS||e&&e[c]||a&&c in a||r&&c in r)){var u=cS(t,c);try{oS(s,c,u)}catch{}}}}return s}function Jr(s){return typeof s=="function"}function s0(s){return typeof s=="object"&&"styledComponentId"in s}function js(s,t){return s&&t?"".concat(s," ").concat(t):s||t||""}function Eg(s,t){if(s.length===0)return"";for(var e=s[0],n=1;n<s.length;n++)e+=s[n];return e}function Xo(s){return s!==null&&typeof s=="object"&&s.constructor.name===Object.name&&!("props"in s&&s.$$typeof)}function _g(s,t,e){if(e===void 0&&(e=!1),!e&&!Xo(s)&&!Array.isArray(s))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)s[n]=_g(s[n],t[n]);else if(Xo(t))for(var n in t)s[n]=_g(s[n],t[n]);return s}function r0(s,t){Object.defineProperty(s,"toString",{value:t})}var uS=dt.env.NODE_ENV!=="production"?{1:`Cannot create styled-component for component: %s.

`,2:`Can't collect styles once you've consumed a \`ServerStyleSheet\`'s styles! \`ServerStyleSheet\` is a one off instance for each server-side render cycle.

- Are you trying to reuse it across renders?
- Are you accidentally calling collectStyles twice?

`,3:`Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.

`,4:`The \`StyleSheetManager\` expects a valid target or sheet prop!

- Does this error occur on the client and is your target falsy?
- Does this error occur on the server and is the sheet falsy?

`,5:`The clone method cannot be used on the client!

- Are you running in a client-like environment on the server?
- Are you trying to run SSR on the client?

`,6:`Trying to insert a new style tag, but the given Node is unmounted!

- Are you using a custom target that isn't mounted?
- Does your document not have a valid head element?
- Have you accidentally removed a style tag manually?

`,7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:`ThemeProvider: Please make your "theme" prop an object.

`,9:"Missing document `<head>`\n\n",10:`Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021

`,11:`_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.

`,12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:`%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.

`,14:`ThemeProvider: "theme" prop is required.

`,15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:`Reached the limit of how many styled components may be created at group %s.
You may only create up to 1,073,741,824 components. If you're creating components dynamically,
as for instance in your render method then you may be running into this limitation.

`,17:`CSSStyleSheet could not be found on HTMLStyleElement.
Has styled-components' style tag been unmounted or altered by another script?
`,18:"ThemeProvider: Please make sure your useTheme hook is within a `<ThemeProvider>`"}:{};function dS(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];for(var e=s[0],n=[],i=1,r=s.length;i<r;i+=1)n.push(s[i]);return n.forEach(function(a){e=e.replace(/%[a-z]/,a)}),e}function Hi(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return dt.env.NODE_ENV==="production"?new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(s," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):"")):new Error(dS.apply(void 0,Kr([uS[s]],t,!1)).trim())}var fS=function(){function s(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return s.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},s.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,r=i;t>=r;)if((r<<=1)<0)throw Hi(16,"".concat(t));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var a=i;a<r;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(t+1),c=(a=0,e.length);a<c;a++)this.tag.insertRule(l,e[a])&&(this.groupSizes[t]++,l++)},s.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),i=n+e;this.groupSizes[t]=0;for(var r=n;r<i;r++)this.tag.deleteRule(n)}},s.prototype.getGroup=function(t){var e="";if(t>=this.length||this.groupSizes[t]===0)return e;for(var n=this.groupSizes[t],i=this.indexOfGroup(t),r=i+n,a=i;a<r;a++)e+="".concat(this.tag.getRule(a)).concat(n0);return e},s}(),pS=1<<30,_u=new Map,ed=new Map,xu=1,hu=function(s){if(_u.has(s))return _u.get(s);for(;ed.has(xu);)xu++;var t=xu++;if(dt.env.NODE_ENV!=="production"&&((0|t)<0||t>pS))throw Hi(16,"".concat(t));return _u.set(s,t),ed.set(t,s),t},gS=function(s,t){xu=t+1,_u.set(s,t),ed.set(t,s)},mS="style[".concat(Zr,"][").concat(By,'="').concat(rp,'"]'),vS=new RegExp("^".concat(Zr,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),yS=function(s,t,e){for(var n,i=e.split(","),r=0,a=i.length;r<a;r++)(n=i[r])&&s.registerName(t,n)},bS=function(s,t){for(var e,n=((e=t.textContent)!==null&&e!==void 0?e:"").split(n0),i=[],r=0,a=n.length;r<a;r++){var l=n[r].trim();if(l){var c=l.match(vS);if(c){var u=0|parseInt(c[1],10),h=c[2];u!==0&&(gS(h,u),yS(s,h,c[3]),s.getTag().insertRules(u,i)),i.length=0}else i.push(l)}}};function wS(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var qy=function(s){var t=document.head,e=s||t,n=document.createElement("style"),i=function(l){var c=Array.from(l.querySelectorAll("style[".concat(Zr,"]")));return c[c.length-1]}(e),r=i!==void 0?i.nextSibling:null;n.setAttribute(Zr,Ny),n.setAttribute(By,rp);var a=wS();return a&&n.setAttribute("nonce",a),e.insertBefore(n,r),n},AS=function(){function s(t){this.element=qy(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,i=0,r=n.length;i<r;i++){var a=n[i];if(a.ownerNode===e)return a}throw Hi(17)}(this.element),this.length=0}return s.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},s.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},s.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},s}(),ES=function(){function s(t){this.element=qy(t),this.nodes=this.element.childNodes,this.length=0}return s.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},s.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},s.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},s}(),_S=function(){function s(t){this.rules=[],this.length=0}return s.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},s.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},s.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},s}(),av=i0,xS={isServer:!i0,useCSSOMInjection:!Zx},Xy=function(){function s(t,e,n){t===void 0&&(t=qo),e===void 0&&(e={});var i=this;this.options=Le(Le({},xS),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&i0&&av&&(av=!1,function(r){for(var a=document.querySelectorAll(mS),l=0,c=a.length;l<c;l++){var u=a[l];u&&u.getAttribute(Zr)!==Ny&&(bS(r,u),u.parentNode&&u.parentNode.removeChild(u))}}(this)),r0(this,function(){return function(r){for(var a=r.getTag(),l=a.length,c="",u=function(f){var g=function(_){return ed.get(_)}(f);if(g===void 0)return"continue";var v=r.names.get(g),y=a.getGroup(f);if(v===void 0||y.length===0)return"continue";var E="".concat(Zr,".g").concat(f,'[id="').concat(g,'"]'),C="";v!==void 0&&v.forEach(function(_){_.length>0&&(C+="".concat(_,","))}),c+="".concat(y).concat(E,'{content:"').concat(C,'"}').concat(n0)},h=0;h<l;h++)u(h);return c}(i)})}return s.registerId=function(t){return hu(t)},s.prototype.reconstructWithOptions=function(t,e){return e===void 0&&(e=!0),new s(Le(Le({},this.options),t),this.gs,e&&this.names||void 0)},s.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},s.prototype.getTag=function(){return this.tag||(this.tag=(t=function(e){var n=e.useCSSOMInjection,i=e.target;return e.isServer?new _S(i):n?new AS(i):new ES(i)}(this.options),new fS(t)));var t},s.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},s.prototype.registerName=function(t,e){if(hu(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},s.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(hu(t),n)},s.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},s.prototype.clearRules=function(t){this.getTag().clearGroup(hu(t)),this.clearNames(t)},s.prototype.clearTag=function(){this.tag=void 0},s}(),SS=/&/g,CS=/^\s*\/\/.*$/gm;function Yy(s,t){return s.map(function(e){return e.type==="rule"&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=Yy(e.children,t)),e})}function TS(s){var t,e,n,i=qo,r=i.options,a=r===void 0?qo:r,l=i.plugins,c=l===void 0?ap:l,u=function(g,v,y){return y.startsWith(e)&&y.endsWith(e)&&y.replaceAll(e,"").length>0?".".concat(t):g},h=c.slice();h.push(function(g){g.type===ep&&g.value.includes("&")&&(g.props[0]=g.props[0].replace(SS,e).replace(n,u))}),a.prefix&&h.push(Yx),h.push(Wx);var f=function(g,v,y,E){v===void 0&&(v=""),y===void 0&&(y=""),E===void 0&&(E="&"),t=E,e=v,n=new RegExp("\\".concat(e,"\\b"),"g");var C=g.replace(CS,""),_=Vx(y||v?"".concat(y," ").concat(v," { ").concat(C," }"):C);a.namespace&&(_=Yy(_,a.namespace));var P=[];return td(_,qx(h.concat(Xx(function(L){return P.push(L)})))),P};return f.hash=c.length?c.reduce(function(g,v){return v.name||Hi(15),Os(g,v.name)},$y).toString():"",f}var PS=new Xy,xg=TS(),Ky=H.createContext({shouldForwardProp:void 0,styleSheet:PS,stylis:xg});Ky.Consumer;H.createContext(void 0);function ov(){return H.useContext(Ky)}var Sg=function(){function s(t,e){var n=this;this.inject=function(i,r){r===void 0&&(r=xg);var a=n.name+r.hash;i.hasNameForId(n.id,a)||i.insertRules(n.id,a,r(n.rules,a,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,r0(this,function(){throw Hi(12,String(n.name))})}return s.prototype.getName=function(t){return t===void 0&&(t=xg),this.name+t.hash},s}(),RS=function(s){return s>="A"&&s<="Z"};function lv(s){for(var t="",e=0;e<s.length;e++){var n=s[e];if(e===1&&n==="-"&&s[0]==="-")return s;RS(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var Zy=function(s){return s==null||s===!1||s===""},Jy=function(s){var t,e,n=[];for(var i in s){var r=s[i];s.hasOwnProperty(i)&&!Zy(r)&&(Array.isArray(r)&&r.isCss||Jr(r)?n.push("".concat(lv(i),":"),r,";"):Xo(r)?n.push.apply(n,Kr(Kr(["".concat(i," {")],Jy(r),!1),["}"],!1)):n.push("".concat(lv(i),": ").concat((t=i,(e=r)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in Kx||t.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return n};function Yr(s,t,e,n){if(Zy(s))return[];if(s0(s))return[".".concat(s.styledComponentId)];if(Jr(s)){if(!Jr(r=s)||r.prototype&&r.prototype.isReactComponent||!t)return[s];var i=s(t);return dt.env.NODE_ENV==="production"||typeof i!="object"||Array.isArray(i)||i instanceof Sg||Xo(i)||i===null||console.error("".concat(Uy(s)," is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.")),Yr(i,t,e,n)}var r;return s instanceof Sg?e?(s.inject(e,n),[s.getName(n)]):[s]:Xo(s)?Jy(s):Array.isArray(s)?Array.prototype.concat.apply(ap,s.map(function(a){return Yr(a,t,e,n)})):[s.toString()]}function LS(s){for(var t=0;t<s.length;t+=1){var e=s[t];if(Jr(e)&&!s0(e))return!1}return!0}var kS=jy(rp),IS=function(){function s(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=dt.env.NODE_ENV==="production"&&(n===void 0||n.isStatic)&&LS(t),this.componentId=e,this.baseHash=Os(kS,e),this.baseStyle=n,Xy.registerId(e)}return s.prototype.generateAndInjectStyles=function(t,e,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))i=js(i,this.staticRulesId);else{var r=Eg(Yr(this.rules,t,e,n)),a=Ag(Os(this.baseHash,r)>>>0);if(!e.hasNameForId(this.componentId,a)){var l=n(r,".".concat(a),void 0,this.componentId);e.insertRules(this.componentId,a,l)}i=js(i,a),this.staticRulesId=a}else{for(var c=Os(this.baseHash,n.hash),u="",h=0;h<this.rules.length;h++){var f=this.rules[h];if(typeof f=="string")u+=f,dt.env.NODE_ENV!=="production"&&(c=Os(c,f));else if(f){var g=Eg(Yr(f,t,e,n));c=Os(c,g+h),u+=g}}if(u){var v=Ag(c>>>0);e.hasNameForId(this.componentId,v)||e.insertRules(this.componentId,v,n(u,".".concat(v),void 0,this.componentId)),i=js(i,v)}}return i},s}(),nd=H.createContext(void 0);nd.Consumer;function MS(s){var t=H.useContext(nd),e=H.useMemo(function(){return function(n,i){if(!n)throw Hi(14);if(Jr(n)){var r=n(i);if(dt.env.NODE_ENV!=="production"&&(r===null||Array.isArray(r)||typeof r!="object"))throw Hi(7);return r}if(Array.isArray(n)||typeof n!="object")throw Hi(8);return i?Le(Le({},i),n):n}(s.theme,t)},[s.theme,t]);return s.children?H.createElement(nd.Provider,{value:e},s.children):null}var Zp={},cv=new Set;function FS(s,t,e){var n=s0(s),i=s,r=!Kp(s),a=t.attrs,l=a===void 0?ap:a,c=t.componentId,u=c===void 0?function(k,F){var I=typeof k!="string"?"sc":ev(k);Zp[I]=(Zp[I]||0)+1;var M="".concat(I,"-").concat(Hy(rp+I+Zp[I]));return F?"".concat(F,"-").concat(M):M}(t.displayName,t.parentComponentId):c,h=t.displayName,f=h===void 0?function(k){return Kp(k)?"styled.".concat(k):"Styled(".concat(Uy(k),")")}(s):h,g=t.displayName&&t.componentId?"".concat(ev(t.displayName),"-").concat(t.componentId):t.componentId||u,v=n&&i.attrs?i.attrs.concat(l).filter(Boolean):l,y=t.shouldForwardProp;if(n&&i.shouldForwardProp){var E=i.shouldForwardProp;if(t.shouldForwardProp){var C=t.shouldForwardProp;y=function(k,F){return E(k,F)&&C(k,F)}}else y=E}var _=new IS(e,g,n?i.componentStyle:void 0);function P(k,F){return function(I,M,S){var T=I.attrs,D=I.componentStyle,B=I.defaultProps,U=I.foldedComponentIds,V=I.styledComponentId,G=I.target,Z=H.useContext(nd),Y=ov(),$=I.shouldForwardProp||Y.shouldForwardProp;dt.env.NODE_ENV!=="production"&&H.useDebugValue(V);var W=Qx(M,Z,B)||qo,q=function(Q,ct,nt){for(var at,X=Le(Le({},ct),{className:void 0,theme:nt}),K=0;K<Q.length;K+=1){var ft=Jr(at=Q[K])?at(X):at;for(var mt in ft)X[mt]=mt==="className"?js(X[mt],ft[mt]):mt==="style"?Le(Le({},X[mt]),ft[mt]):ft[mt]}return ct.className&&(X.className=js(X.className,ct.className)),X}(T,M,W),wt=q.as||G,Et={};for(var z in q)q[z]===void 0||z[0]==="$"||z==="as"||z==="theme"&&q.theme===W||(z==="forwardedAs"?Et.as=q.forwardedAs:$&&!$(z,wt)||(Et[z]=q[z],$||dt.env.NODE_ENV!=="development"||kx(z)||cv.has(z)||!wg.has(wt)||(cv.add(z),console.warn('styled-components: it looks like an unknown prop "'.concat(z,'" is being sent through to the DOM, which will likely trigger a React console error. If you would like automatic filtering of unknown props, you can opt-into that behavior via `<StyleSheetManager shouldForwardProp={...}>` (connect an API like `@emotion/is-prop-valid`) or consider using transient props (`$` prefix for automatic filtering.)')))));var it=function(Q,ct){var nt=ov(),at=Q.generateAndInjectStyles(ct,nt.styleSheet,nt.stylis);return dt.env.NODE_ENV!=="production"&&H.useDebugValue(at),at}(D,q);dt.env.NODE_ENV!=="production"&&I.warnTooManyClasses&&I.warnTooManyClasses(it);var st=js(U,V);return it&&(st+=" "+it),q.className&&(st+=" "+q.className),Et[Kp(wt)&&!wg.has(wt)?"class":"className"]=st,Et.ref=S,H.createElement(wt,Et)}(L,k,F)}P.displayName=f;var L=H.forwardRef(P);return L.attrs=v,L.componentStyle=_,L.displayName=f,L.shouldForwardProp=y,L.foldedComponentIds=n?js(i.foldedComponentIds,i.styledComponentId):"",L.styledComponentId=g,L.target=n?i.target:s,Object.defineProperty(L,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(k){this._foldedDefaultProps=n?function(F){for(var I=[],M=1;M<arguments.length;M++)I[M-1]=arguments[M];for(var S=0,T=I;S<T.length;S++)_g(F,T[S],!0);return F}({},i.defaultProps,k):k}}),dt.env.NODE_ENV!=="production"&&(Jx(f,g),L.warnTooManyClasses=function(k,F){var I={},M=!1;return function(S){if(!M&&(I[S]=!0,Object.keys(I).length>=200)){var T=F?' with the id of "'.concat(F,'"'):"";console.warn("Over ".concat(200," classes were generated for component ").concat(k).concat(T,`.
`)+`Consider using the attrs method, together with a style object for frequently changed styles.
Example:
  const Component = styled.div.attrs(props => ({
    style: {
      background: props.background,
    },
  }))\`width: 100%;\`

  <Component />`),M=!0,I={}}}}(f,g)),r0(L,function(){return".".concat(L.styledComponentId)}),r&&Wy(L,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),L}function hv(s,t){for(var e=[s[0]],n=0,i=t.length;n<i;n+=1)e.push(t[n],s[n+1]);return e}var uv=function(s){return Object.assign(s,{isCss:!0})};function op(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Jr(s)||Xo(s))return uv(Yr(hv(ap,Kr([s],t,!0))));var n=s;return t.length===0&&n.length===1&&typeof n[0]=="string"?Yr(n):uv(Yr(hv(n,t)))}function Cg(s,t,e){if(e===void 0&&(e=qo),!t)throw Hi(1,t);var n=function(i){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return s(t,e,op.apply(void 0,Kr([i],r,!1)))};return n.attrs=function(i){return Cg(s,t,Le(Le({},e),{attrs:Array.prototype.concat(e.attrs,i).filter(Boolean)}))},n.withConfig=function(i){return Cg(s,t,Le(Le({},e),i))},n}var Qy=function(s){return Cg(FS,s)},bt=Qy;wg.forEach(function(s){bt[s]=Qy(s)});function DS(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];dt.env.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn("`keyframes` cannot be used on ReactNative, only on the web. To do animation in ReactNative please use Animated.");var n=Eg(op.apply(void 0,Kr([s],t,!1))),i=Hy(n);return new Sg(i,n)}dt.env.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn(`It looks like you've imported 'styled-components' on React Native.
Perhaps you're looking to import 'styled-components/native'?
Read more about this at https://www.styled-components.com/docs/basics#react-native`);var uu="__sc-".concat(Zr,"__");dt.env.NODE_ENV!=="production"&&dt.env.NODE_ENV!=="test"&&typeof window<"u"&&(window[uu]||(window[uu]=0),window[uu]===1&&console.warn(`It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.

See https://s-c.sh/2BAXzed for more info.`),window[uu]+=1);const OS="Document {{ currentFileNo }} of {{ allFilesCount }}",NS="No renderer for file type: {{{ fileType }}}",BS="Download file",$S="Your file is broken. Please check it on your machine.",jS="Recipients",HS="Sender",US="Loading...",zS="Page {{ currentPage }}/{{ allPagesCount }}",VS={documentNavInfo:OS,noRendererMessage:NS,downloadButtonLabel:BS,brokenFile:$S,msgPluginRecipients:jS,msgPluginSender:HS,pdfPluginLoading:US,pdfPluginPageNumber:zS},GS="Dokument {{ currentFileNo }} z {{ allFilesCount }}",WS="Brak funckji renderujÄcej dla: {{{ fileType }}}",qS="Pobierz plik",XS="TwÃ³j plik jest uszkodzony. SprawdÅº go na swoim komputerze.",YS="Odbiorcy",KS="Nadawca",ZS="Wczytywanie...",JS="Strona {{ currentPage }}/{{ allPagesCount }}",QS={documentNavInfo:GS,noRendererMessage:WS,downloadButtonLabel:qS,brokenFile:XS,msgPluginRecipients:YS,msgPluginSender:KS,pdfPluginLoading:ZS,pdfPluginPageNumber:JS},tC="Documento {{ currentFileNo }} de {{ allFilesCount }}",eC="No hay procesador para el tipo de archivo: {{{ fileType }}}",nC="Descargar archivo",iC="Tu archivo estÃ¡ roto. CompruÃ©balo en tu mÃ¡quina.",sC="Destinatarios",rC="Remitente",aC="Cargando...",oC="PÃ¡gina {{ currentPage }}/{{ allPagesCount }}",lC={documentNavInfo:tC,noRendererMessage:eC,downloadButtonLabel:nC,brokenFile:iC,msgPluginRecipients:sC,msgPluginSender:rC,pdfPluginLoading:aC,pdfPluginPageNumber:oC},cC="Dokument {{ currentFileNo }} von {{ allFilesCount }}",hC="Kein Renderer fÃ¼r Dateityp: {{{ fileType }}}",uC="Datei herunterladen",dC="Ihre Datei ist defekt. Bitte Ã¼berprÃ¼fen Sie sie auf Ihrem Rechner.",fC="EmpfÃ¤nger",pC="Absender",gC="Wird geladen...",mC="Seite {{ currentPage }}/{{ allPagesCount }}",vC={documentNavInfo:cC,noRendererMessage:hC,downloadButtonLabel:uC,brokenFile:dC,msgPluginRecipients:fC,msgPluginSender:pC,pdfPluginLoading:gC,pdfPluginPageNumber:mC},yC="Documento {{ currentFileNo }} di {{ allFilesCount }}",bC="Nessun renderer per il tipo di file: {{{ fileType }}}",wC="Scarica file",AC="Il tuo file Ã¨ danneggiato. Controllalo sul tuo computer.",EC="Destinatari",_C="Mittente",xC="Caricamento in corso...",SC="Pagina {{ currentPage }}/{{ allPagesCount }}",CC={documentNavInfo:yC,noRendererMessage:bC,downloadButtonLabel:wC,brokenFile:AC,msgPluginRecipients:EC,msgPluginSender:_C,pdfPluginLoading:xC,pdfPluginPageNumber:SC},TC="Documento {{ currentFileNo }} de {{ allFilesCount }}",PC="Nenhum renderizador para o tipo de arquivo: {{{ fileType }}}",RC="Baixar arquivo",LC="Seu arquivo estÃ¡ quebrado. Por favor, verifique-o em sua mÃ¡quina.",kC="DestinatÃ¡rios",IC="Remetente",MC="Carregando...",FC="PÃ¡gina {{ currentPage }}/{{ allPagesCount }}",DC={documentNavInfo:TC,noRendererMessage:PC,downloadButtonLabel:RC,brokenFile:LC,msgPluginRecipients:kC,msgPluginSender:IC,pdfPluginLoading:MC,pdfPluginPageNumber:FC},OC="Document {{ currentFileNo }} de {{ allFilesCount }}",NC="Aucun moteur de rendu pour le type de fichier : {{{ fileType }}}",BC="TÃ©lÃ©charger le fichier",$C="Votre fichier est cassÃ©. Veuillez le vÃ©rifier sur votre machine.",jC="Destinataires",HC="ExpÃ©diteur",UC="Chargement...",zC="Page {{ currentPage }}/{{ allPagesCount }}",VC={documentNavInfo:OC,noRendererMessage:NC,downloadButtonLabel:BC,brokenFile:$C,msgPluginRecipients:jC,msgPluginSender:HC,pdfPluginLoading:UC,pdfPluginPageNumber:zC},GC="ÙØ³ØªÙØ¯ {{ currentFileNo }} ÙÙ {{ allFilesCount }}",WC="{{{ fileType }}} : ÙØ§ ÙÙÙÙÙØ§ Ø¹Ø±Ø¶ ÙØ°Ø§ Ø§ÙÙÙØ¹ ÙÙ Ø§ÙÙÙÙØ§Øª",qC="ØªØ­ÙÙÙ Ø§ÙÙÙÙ",XC="Ø§ÙÙÙÙ ØªØ§ÙÙØ ÙØ±Ø¬Ù Ø§ÙØªØ­ÙÙ ÙÙÙ Ø¹ÙÙ Ø¬ÙØ§Ø²Ù Ø§ÙØ®Ø§Øµ.",YC="Ø§ÙÙØ³ØªÙÙÙÙ",KC="Ø§ÙÙØ±Ø³Ù",ZC="ØªØ­ÙÙÙ ...",JC=" {{ allPagesCount }} \\ {{ currentPage }} ØµÙØ­Ø© ",QC={documentNavInfo:GC,noRendererMessage:WC,downloadButtonLabel:qC,brokenFile:XC,msgPluginRecipients:YC,msgPluginSender:KC,pdfPluginLoading:ZC,pdfPluginPageNumber:JC},tT="Dokument {{ currentFileNo }} od {{ allFilesCount }}",eT="Ne postoji pregledaÄ za tip fajla: {{ fileType }}",nT="Preuzimanje fajla",iT="VaÅ¡ fajl nije dobar. Molimo Vas da probate da ga otvorite na vaÅ¡em raÄunaru.",sT="Primaoci",rT="PoÅ¡iljalac",aT="UÄitavanje...",oT="Strana {{ currentPage }}/{{ allPagesCount }}",lT={documentNavInfo:tT,noRendererMessage:eT,downloadButtonLabel:nT,brokenFile:iT,msgPluginRecipients:sT,msgPluginSender:rT,pdfPluginLoading:aT,pdfPluginPageNumber:oT},cT="ÐÐ¾ÐºÑÐ¼ÐµÐ½Ñ {{ currentFileNo }} od {{ allFilesCount }}",hT="ÐÐµ Ð¿Ð¾ÑÑÐ¾ÑÐ¸ Ð¿ÑÐµÐ³Ð»ÐµÐ´Ð°Ñ Ð·Ð° ÑÐ¸Ð¿ ÑÐ°ÑÐ»Ð°: {{ fileType }}",uT="ÐÑÐµÑÐ·Ð¸Ð¼Ð°ÑÐµ ÑÐ°ÑÐ»Ð°",dT="ÐÐ°Ñ ÑÐ°ÑÐ» Ð½Ð¸ÑÐµ Ð´Ð¾Ð±Ð°Ñ. ÐÐ¾Ð»Ð¸Ð¼Ð¾ ÐÐ°Ñ Ð´Ð° Ð¿ÑÐ¾Ð±Ð°ÑÐµ Ð´Ð° Ð³Ð° Ð¾ÑÐ²Ð¾ÑÐ¸ÑÐµ Ð½Ð° Ð²Ð°ÑÐµÐ¼ ÑÐ°ÑÑÐ½Ð°ÑÑ.",fT="ÐÑÐ¸Ð¼Ð°Ð¾ÑÐ¸",pT="ÐÐ¾ÑÐ¸ÑÐ°Ð»Ð°Ñ",gT="Ð£ÑÐ¸ÑÐ°Ð²Ð°ÑÐµ...",mT="Ð¡ÑÑÐ°Ð½Ð° {{ currentPage }}/{{ allPagesCount }}",vT={documentNavInfo:cT,noRendererMessage:hT,downloadButtonLabel:uT,brokenFile:dT,msgPluginRecipients:fT,msgPluginSender:pT,pdfPluginLoading:gT,pdfPluginPageNumber:mT},yT="ãã¡ã¤ã« {{ currentFileNo }} / {{ allFilesCount }}",bT="ãã¡ã¤ã«ã¿ã¤ãã«å¯¾å¿ããã¬ã³ãã©ã¼ã¯ããã¾ãã: {{ fileType }}",wT="ãã¦ã³ã­ã¼ã",AT="ãã¡ã¤ã«ãå£ãã¦ãã¾ããããªãã®ãã·ã³ã§ãã¡ã¤ã«ãç¢ºèªãã¦ãã ããã",ET="åä¿¡è",_T="éä¿¡è",xT="ã­ã¼ãã£ã³ã°ä¸­...",ST="ãã¼ã¸ {{ currentPage }}/{{ allPagesCount }}",CT={documentNavInfo:yT,noRendererMessage:bT,downloadButtonLabel:wT,brokenFile:AT,msgPluginRecipients:ET,msgPluginSender:_T,pdfPluginLoading:xT,pdfPluginPageNumber:ST},TT="ÐÐ¾ÐºÑÐ¼ÐµÐ½Ñ {{ currentFileNo }} Ð¸Ð· {{ allFilesCount }}",PT="ÐÐ°Ð½Ð½ÑÐ¹ ÑÐ¸Ð¿ ÑÐ°Ð¹Ð»Ð° Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑÐ¶Ð¸Ð²Ð°ÐµÑÑÑ ÑÐµÐ½Ð´ÐµÑÐ¾Ð¼: {{{ fileType }}}",RT="Ð¡ÐºÐ°ÑÐ°ÑÑ ÑÐ°Ð¹Ð»",LT="ÐÐ°Ñ ÑÐ°Ð¹Ð» ÑÐ»Ð¾Ð¼Ð°Ð½. ÐÐ¾Ð¶Ð°Ð»ÑÐ¹ÑÑÐ°, Ð¿ÑÐ¾Ð²ÐµÑÑÑÐµ ÐµÐ³Ð¾ Ð½Ð° ÑÐ²Ð¾ÑÐ¼ ÐºÐ¾Ð¼ÑÑÑÐµÑÐµ.",kT="ÐÐ¾Ð»ÑÑÐ°ÑÐµÐ»Ð¸",IT="ÐÑÐ¿ÑÐ°Ð²Ð¸ÑÐµÐ»Ñ",MT="ÐÐ°Ð³ÑÑÐ·ÐºÐ°...",FT="Ð¡ÑÑÐ°Ð½Ð¸ÑÐ° {{ currentPage }}/{{ allPagesCount }}",DT={documentNavInfo:TT,noRendererMessage:PT,downloadButtonLabel:RT,brokenFile:LT,msgPluginRecipients:kT,msgPluginSender:IT,pdfPluginLoading:MT,pdfPluginPageNumber:FT},OT="Dokument {{ currentFileNo }} av {{ allFilesCount }}",NT="Ingen renderare fÃ¶r filtypen: {{{ fileType }}}",BT="Ladda ner",$T="Filen Ã¤r trasig. Var vÃ¤nlig kontrollera den pÃ¥ din maskin.",jT="Mottagare",HT="AvsÃ¤ndare",UT="Laddar...",zT="Sida {{ currentPage }}/{{ allPagesCount }}",VT={documentNavInfo:OT,noRendererMessage:NT,downloadButtonLabel:BT,brokenFile:$T,msgPluginRecipients:jT,msgPluginSender:HT,pdfPluginLoading:UT,pdfPluginPageNumber:zT},id={en:VS,pl:QS,es:lC,de:vC,it:CC,pt:DC,fr:VC,ar:QC,sr:lT,sr_cyr:vT,ja:CT,ru:DT,se:VT},GT=Object.keys(id),a0="en",tb="SET_ALL_DOCUMENTS",eb="SET_DOCUMENT_LOADING",nb="NEXT_DOCUMENT",ib="PREVIOUS_DOCUMENT",sb="UPDATE_CURRENT_DOCUMENT",rb="SET_RENDERER_RECT",ab="SET_MAIN_CONFIG",WT=(s,t)=>({type:tb,documents:s,initialActiveDocument:t}),Jp=s=>({type:eb,value:s}),o0=()=>({type:nb}),l0=()=>({type:ib}),Tg=s=>({type:sb,document:s}),qT=s=>({type:rb,rect:s}),XT=s=>({type:ab,config:s}),sd={currentFileNo:0,documents:[],documentLoading:!0,currentDocument:void 0,rendererRect:void 0,config:{},pluginRenderers:[],language:a0},YT=(s=sd,t)=>{switch(t.type){case tb:{const{documents:e,initialActiveDocument:n}=t;return{...s,documents:e,currentDocument:n||e[0]||null,currentFileNo:n&&e.includes(n)?e.indexOf(n):sd.currentFileNo}}case eb:{const{value:e}=t;return{...s,documentLoading:e}}case nb:{if(s.currentFileNo>=s.documents.length-1)return s;const e=s.currentFileNo+1;return s.onDocumentChange&&s.onDocumentChange(s.documents[e]),{...s,currentFileNo:e,currentDocument:s.documents[e],documentLoading:!0}}case ib:{if(s.currentFileNo<=0)return s;const e=s.currentFileNo-1;return s.onDocumentChange&&s.onDocumentChange(s.documents[e]),{...s,currentFileNo:s.currentFileNo-1,currentDocument:s.documents[e],documentLoading:!0}}case sb:{const{document:e}=t;return{...s,currentDocument:e,currentFileNo:s.documents.findIndex(n=>n.uri===e.uri)}}case rb:{const{rect:e}=t;return{...s,rendererRect:e}}case ab:{const{config:e}=t;return{...s,config:e}}default:return s}},Ps=H.createContext({state:sd,dispatch:()=>null}),KT=H.forwardRef((s,t)=>{const{children:e,documents:n,config:i,pluginRenderers:r,prefetchMethod:a,requestHeaders:l,initialActiveDocument:c,language:u,activeDocument:h,onDocumentChange:f}=s,[g,v]=H.useReducer(YT,{...sd,documents:n||[],currentDocument:n&&n.length?c||n[0]:void 0,config:i,pluginRenderers:r,prefetchMethod:a,requestHeaders:l,currentFileNo:c?n.findIndex(y=>y===c)??0:0,language:u&&id[u]?u:a0,activeDocument:h,onDocumentChange:f});return H.useEffect(()=>{v(WT(n,c)),i&&v(XT(i))},[n,i,c]),H.useEffect(()=>{h&&v(Tg(h))},[h]),H.useImperativeHandle(t,()=>({prev(){v(l0())},next(){v(o0())}}),[v]),O.jsx(Ps.Provider,{value:{state:g,dispatch:v},children:e})}),ZT=op`
  background-color: ${s=>s.theme.primary};
  color: ${s=>s.theme.textPrimary};
`,JT=op`
  background-color: ${s=>s.theme.secondary};
  color: ${s=>s.theme.textSecondary};
`,lp=bt.button`
  ${ZT}
  display: flex;
  justify-content: center;
  align-items: center;
  width: 35px;
  height: 35px;
  padding: 0;
  margin: 0 0 0 5px;
  text-align: center;
  font-size: 18px;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  opacity: ${s=>s.disabled?.4:1};
  pointer-events: ${s=>s.disabled?"none":"all"};
  box-shadow: 2px 2px 3px #00000033;

  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`,ob=bt.a`
  display: flex;
  justify-content: center;
  align-items: center;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  background-color: ${s=>s.theme.primary};
  color: ${s=>s.theme.textPrimary};
  box-shadow: 2px 2px 3px #00000033;

  width: 35px;
  height: 35px;
  font-size: 18px;
  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`;bt(lp)``;const QT=bt(lp)`
  ${JT}
`,tP=s=>O.jsx(lb,{...s}),eP=s=>O.jsx(lb,{...s,reverse:!0}),lb=({color:s,size:t,reverse:e})=>O.jsx("svg",{width:t||"100%",height:t||"100%",style:{transform:`${e?"rotate(180deg)":""}`},id:"arrow_left",version:"1.1",viewBox:"0 0 32 32",xmlSpace:"preserve",children:O.jsx("path",{clipRule:"evenodd",d:"M31.106,15H3.278l8.325-8.293  c0.391-0.391,0.391-1.024,0-1.414c-0.391-0.391-1.024-0.391-1.414,0l-9.9,9.899c-0.385,0.385-0.385,1.029,0,1.414l9.9,9.9  c0.391,0.391,1.024,0.391,1.414,0c0.391-0.391,0.391-1.024,0-1.414L3.278,17h27.828c0.552,0,1-0.448,1-1  C32.106,15.448,31.658,15,31.106,15z",fill:s||"#aaa",fillRule:"evenodd",id:"Arrow_Back"})}),nP=s=>{const{color:t,size:e}=s;return O.jsx("svg",{width:e||"100%",height:e||"100%",version:"1.1",id:"Icons",viewBox:"0 0 32 32",xmlSpace:"preserve",style:{alignSelf:"center",justifySelf:"center"},children:O.jsxs("g",{children:[O.jsx("path",{fill:t||"#aaa",d:"M16,2c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1V3C17,2.4,16.6,2,16,2z"}),O.jsx("path",{fill:t||"#aaa",d:`M7.5,6.1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.5,6.1
		z`}),O.jsx("path",{fill:t||"#aaa",d:"M9,16c0-0.6-0.4-1-1-1H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h5C8.6,17,9,16.6,9,16z"}),O.jsx("path",{fill:t||"#aaa",d:`M9.6,20.9l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4
		S10,20.6,9.6,20.9z`}),O.jsx("path",{fill:t||"#aaa",d:"M16,23c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1v-5C17,23.4,16.6,23,16,23z"}),O.jsx("path",{fill:t||"#aaa",d:`M22.4,20.9c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4
		L22.4,20.9z`}),O.jsx("path",{fill:t||"#aaa",d:"M29,15h-5c-0.6,0-1,0.4-1,1s0.4,1,1,1h5c0.6,0,1-0.4,1-1S29.6,15,29,15z"}),O.jsx("path",{fill:t||"#aaa",d:`M21.7,11.3c0.3,0,0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4
		C21.1,11.2,21.4,11.3,21.7,11.3z`})]})})};/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var iP=Object.prototype.toString,Jo=Array.isArray||function(t){return iP.call(t)==="[object Array]"};function c0(s){return typeof s=="function"}function sP(s){return Jo(s)?"array":typeof s}function Qp(s){return s.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function dv(s,t){return s!=null&&typeof s=="object"&&t in s}function rP(s,t){return s!=null&&typeof s!="object"&&s.hasOwnProperty&&s.hasOwnProperty(t)}var aP=RegExp.prototype.test;function oP(s,t){return aP.call(s,t)}var lP=/\S/;function cP(s){return!oP(lP,s)}var hP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function uP(s){return String(s).replace(/[&<>"'`=\/]/g,function(e){return hP[e]})}var dP=/\s*/,fP=/\s+/,fv=/\s*=/,pP=/\s*\}/,gP=/#|\^|\/|>|\{|&|=|!/;function mP(s,t){if(!s)return[];var e=!1,n=[],i=[],r=[],a=!1,l=!1,c="",u=0;function h(){if(a&&!l)for(;r.length;)delete i[r.pop()];else r=[];a=!1,l=!1}var f,g,v;function y(S){if(typeof S=="string"&&(S=S.split(fP,2)),!Jo(S)||S.length!==2)throw new Error("Invalid tags: "+S);f=new RegExp(Qp(S[0])+"\\s*"),g=new RegExp("\\s*"+Qp(S[1])),v=new RegExp("\\s*"+Qp("}"+S[1]))}y(t||rn.tags);for(var E=new qh(s),C,_,P,L,k,F;!E.eos();){if(C=E.pos,P=E.scanUntil(f),P)for(var I=0,M=P.length;I<M;++I)L=P.charAt(I),cP(L)?(r.push(i.length),c+=L):(l=!0,e=!0,c+=" "),i.push(["text",L,C,C+1]),C+=1,L===`
`&&(h(),c="",u=0,e=!1);if(!E.scan(f))break;if(a=!0,_=E.scan(gP)||"name",E.scan(dP),_==="="?(P=E.scanUntil(fv),E.scan(fv),E.scanUntil(g)):_==="{"?(P=E.scanUntil(v),E.scan(pP),E.scanUntil(g),_="&"):P=E.scanUntil(g),!E.scan(g))throw new Error("Unclosed tag at "+E.pos);if(_==">"?k=[_,P,C,E.pos,c,u,e]:k=[_,P,C,E.pos],u++,i.push(k),_==="#"||_==="^")n.push(k);else if(_==="/"){if(F=n.pop(),!F)throw new Error('Unopened section "'+P+'" at '+C);if(F[1]!==P)throw new Error('Unclosed section "'+F[1]+'" at '+C)}else _==="name"||_==="{"||_==="&"?l=!0:_==="="&&y(P)}if(h(),F=n.pop(),F)throw new Error('Unclosed section "'+F[1]+'" at '+E.pos);return yP(vP(i))}function vP(s){for(var t=[],e,n,i=0,r=s.length;i<r;++i)e=s[i],e&&(e[0]==="text"&&n&&n[0]==="text"?(n[1]+=e[1],n[3]=e[3]):(t.push(e),n=e));return t}function yP(s){for(var t=[],e=t,n=[],i,r,a=0,l=s.length;a<l;++a)switch(i=s[a],i[0]){case"#":case"^":e.push(i),n.push(i),e=i[4]=[];break;case"/":r=n.pop(),r[5]=i[2],e=n.length>0?n[n.length-1][4]:t;break;default:e.push(i)}return t}function qh(s){this.string=s,this.tail=s,this.pos=0}qh.prototype.eos=function(){return this.tail===""};qh.prototype.scan=function(t){var e=this.tail.match(t);if(!e||e.index!==0)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};qh.prototype.scanUntil=function(t){var e=this.tail.search(t),n;switch(e){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,e),this.tail=this.tail.substring(e)}return this.pos+=n.length,n};function Yo(s,t){this.view=s,this.cache={".":this.view},this.parent=t}Yo.prototype.push=function(t){return new Yo(t,this)};Yo.prototype.lookup=function(t){var e=this.cache,n;if(e.hasOwnProperty(t))n=e[t];else{for(var i=this,r,a,l,c=!1;i;){if(t.indexOf(".")>0)for(r=i.view,a=t.split("."),l=0;r!=null&&l<a.length;)l===a.length-1&&(c=dv(r,a[l])||rP(r,a[l])),r=r[a[l++]];else r=i.view[t],c=dv(i.view,t);if(c){n=r;break}i=i.parent}e[t]=n}return c0(n)&&(n=n.call(this.view)),n};function Be(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}Be.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};Be.prototype.parse=function(t,e){var n=this.templateCache,i=t+":"+(e||rn.tags).join(":"),r=typeof n<"u",a=r?n.get(i):void 0;return a==null&&(a=mP(t,e),r&&n.set(i,a)),a};Be.prototype.render=function(t,e,n,i){var r=this.getConfigTags(i),a=this.parse(t,r),l=e instanceof Yo?e:new Yo(e,void 0);return this.renderTokens(a,l,n,t,i)};Be.prototype.renderTokens=function(t,e,n,i,r){for(var a="",l,c,u,h=0,f=t.length;h<f;++h)u=void 0,l=t[h],c=l[0],c==="#"?u=this.renderSection(l,e,n,i,r):c==="^"?u=this.renderInverted(l,e,n,i,r):c===">"?u=this.renderPartial(l,e,n,r):c==="&"?u=this.unescapedValue(l,e):c==="name"?u=this.escapedValue(l,e,r):c==="text"&&(u=this.rawValue(l)),u!==void 0&&(a+=u);return a};Be.prototype.renderSection=function(t,e,n,i,r){var a=this,l="",c=e.lookup(t[1]);function u(g){return a.render(g,e,n,r)}if(c){if(Jo(c))for(var h=0,f=c.length;h<f;++h)l+=this.renderTokens(t[4],e.push(c[h]),n,i,r);else if(typeof c=="object"||typeof c=="string"||typeof c=="number")l+=this.renderTokens(t[4],e.push(c),n,i,r);else if(c0(c)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(e.view,i.slice(t[3],t[5]),u),c!=null&&(l+=c)}else l+=this.renderTokens(t[4],e,n,i,r);return l}};Be.prototype.renderInverted=function(t,e,n,i,r){var a=e.lookup(t[1]);if(!a||Jo(a)&&a.length===0)return this.renderTokens(t[4],e,n,i,r)};Be.prototype.indentPartial=function(t,e,n){for(var i=e.replace(/[^ \t]/g,""),r=t.split(`
`),a=0;a<r.length;a++)r[a].length&&(a>0||!n)&&(r[a]=i+r[a]);return r.join(`
`)};Be.prototype.renderPartial=function(t,e,n,i){if(n){var r=this.getConfigTags(i),a=c0(n)?n(t[1]):n[t[1]];if(a!=null){var l=t[6],c=t[5],u=t[4],h=a;c==0&&u&&(h=this.indentPartial(a,u,l));var f=this.parse(h,r);return this.renderTokens(f,e,n,h,i)}}};Be.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(n!=null)return n};Be.prototype.escapedValue=function(t,e,n){var i=this.getConfigEscape(n)||rn.escape,r=e.lookup(t[1]);if(r!=null)return typeof r=="number"&&i===rn.escape?String(r):i(r)};Be.prototype.rawValue=function(t){return t[1]};Be.prototype.getConfigTags=function(t){return Jo(t)?t:t&&typeof t=="object"?t.tags:void 0};Be.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!Jo(t))return t.escape};var rn={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(s){Sl.templateCache=s},get templateCache(){return Sl.templateCache}},Sl=new Be;rn.clearCache=function(){return Sl.clearCache()};rn.parse=function(t,e){return Sl.parse(t,e)};rn.render=function(t,e,n,i){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+sP(t)+'" was given as the first argument for mustache#render(template, view, partials)');return Sl.render(t,e,n,i)};rn.escape=uP;rn.Scanner=qh;rn.Context=Yo;rn.Writer=Be;const ra=()=>{const{state:{language:s}}=H.useContext(Ps),t=id[a0];return{t:H.useCallback((n,i)=>{const r=id[s];return r[n]?rn.render(r[n],i):t[n]?rn.render(t[n],i):n},[s,t])}},bP=()=>{const{state:{currentDocument:s,currentFileNo:t,documents:e},dispatch:n}=H.useContext(Ps),{t:i}=ra();if(e.length<=1||!s)return null;let r=s.uri||"";const a=r==null?void 0:r.split("/");return a.length&&(r=a[a.length-1]),O.jsxs(wP,{id:"doc-nav",children:[O.jsx("p",{id:"doc-nav-info",children:i("documentNavInfo",{currentFileNo:t+1,allFilesCount:e.length})}),O.jsx(cb,{id:"doc-nav-prev",onClick:()=>n(l0()),disabled:t===0,children:O.jsx(tP,{color:"#fff",size:"60%"})}),O.jsx(AP,{id:"doc-nav-next",onClick:()=>n(o0()),disabled:t>=e.length-1,children:O.jsx(eP,{color:"#fff",size:"60%"})})]})},wP=bt.div`
  min-width: 150px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
  margin: 0 10px;
  color: ${s=>s.theme.textPrimary};
`,cb=bt(QT)`
  width: 30px;
  height: 30px;
  margin: 0 5px 0 10px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,AP=bt(cb)`
  margin: 0 5px;
`,hb=(s,t)=>{var n;if(!s)return"";let e="";if(s.fileName)e=s.fileName;else{e=s.uri||"",e=decodeURI(e),t||(e=(n=e==null?void 0:e.split("?"))==null?void 0:n[0]);const i=e==null?void 0:e.split("/");i.length&&(e=i[i.length-1])}return e},EP=()=>{var n,i;const{state:{config:s,currentDocument:t}}=H.useContext(Ps);if(!t||(n=s==null?void 0:s.header)!=null&&n.disableFileName)return null;const e=hb(t,((i=s==null?void 0:s.header)==null?void 0:i.retainURLParams)||!1);return O.jsx(_P,{id:"file-name","data-testid":"file-name",children:e})},_P=bt.div`
  flex: 1;
  text-align: left;
  color: ${s=>s.theme.textPrimary};
  font-weight: bold;
  margin: 0 10px;
  overflow: hidden;
`,xP=()=>{var i,r,a;const{state:s,dispatch:t}=H.useContext(Ps),{config:e}=s;if((i=e==null?void 0:e.header)!=null&&i.disableHeader)return null;const n=(a=(r=e==null?void 0:e.header)==null?void 0:r.overrideComponent)==null?void 0:a.call(r,s,()=>t(l0()),()=>t(o0()));return n||O.jsxs(SP,{id:"header-bar","data-testid":"header-bar",children:[O.jsx(EP,{}),O.jsx(bP,{})]})},SP=bt.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
  z-index: 1;
  padding: 0 10px;
  background-color: ${s=>s.theme.primary};
  font-size: 16px;
  min-height: 50px;

  @media (max-width: 768px) {
    min-height: 30px;
    padding: 5px;
    font-size: 10px;
  }
`,cp=({documentURI:s,signal:t,fileLoaderComplete:e,readerTypeFunction:n,headers:i})=>fetch(s,{signal:t,headers:i}).then(async r=>{const a=await r.blob(),l=new FileReader;switch(l.addEventListener("loadend",()=>e(l)),n){case"arrayBuffer":l.readAsArrayBuffer(a);break;case"binaryString":l.readAsBinaryString(a);break;case"dataURL":l.readAsDataURL(a);break;case"text":l.readAsText(a);break}}).catch(r=>r),ub=s=>cp({...s,readerTypeFunction:"arrayBuffer"}),h0=s=>cp({...s,readerTypeFunction:"dataURL"}),u0=s=>cp({...s,readerTypeFunction:"text"}),CP=s=>cp({...s,readerTypeFunction:"binaryString"}),db=h0,TP=()=>{const{state:{currentDocument:s,pluginRenderers:t}}=H.useContext(Ps),[e,n]=H.useState();return H.useEffect(()=>{if(!s)return;if(!s.fileType){n(void 0);return}const i=[];t==null||t.forEach(a=>{s.fileType!==void 0&&a.fileTypes.indexOf(s.fileType)>=0&&i.push(a)});const[r]=i.sort((a,l)=>l.weight-a.weight);n(r&&r!==void 0?()=>r:null)},[s,t]),{CurrentRenderer:e}},PP=()=>{const{state:s,dispatch:t}=H.useContext(Ps),{currentFileNo:e,currentDocument:n,prefetchMethod:i}=s,{CurrentRenderer:r}=TP(),a=(n==null?void 0:n.uri)||"";return H.useEffect(()=>{if(!n||n.fileType!==void 0)return;const l=new AbortController,{signal:c}=l;return fetch(a,{method:i||a.startsWith("blob:")?"GET":"HEAD",signal:c,headers:s==null?void 0:s.requestHeaders}).then(u=>{const h=u.headers.get("content-type"),f=(h==null?void 0:h.split(";"))||[],g=f.length?f[0]:void 0;t(Tg({...n,fileType:g||void 0}))}).catch(u=>{if((u==null?void 0:u.name)!=="AbortError")throw u}),()=>{l.abort()}},[e,a,n]),H.useEffect(()=>{var f;if(!n||r===void 0)return;const l=new AbortController,{signal:c}=l,h={documentURI:a,signal:c,fileLoaderComplete:g=>{if(!n||!g){t(Jp(!1));return}const v={...n};g.result!==null&&(v.fileData=g.result),t(Tg(v)),t(Jp(!1))},headers:s==null?void 0:s.requestHeaders};return r===null?t(Jp(!1)):r.fileLoader!==void 0?(f=r.fileLoader)==null||f.call(r,h):db(h),()=>{l.abort()}},[r,e]),{state:s,dispatch:t,CurrentRenderer:r}},RP=()=>{const[s,t]=H.useState({width:void 0,height:void 0});return H.useEffect(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),s},pv=({children:s})=>{var r,a;const{state:t}=H.useContext(Ps),{config:e}=t,[n,i]=H.useState(((r=e==null?void 0:e.loadingRenderer)==null?void 0:r.showLoadingTimeout)===!1);return H.useEffect(()=>{var l;setTimeout(()=>{i(!0)},typeof((l=e==null?void 0:e.loadingRenderer)==null?void 0:l.showLoadingTimeout)=="number"?e.loadingRenderer.showLoadingTimeout:500)},[(a=e==null?void 0:e.loadingRenderer)==null?void 0:a.showLoadingTimeout]),n?O.jsx(O.Fragment,{children:s}):null},LP=({documents:s,documentLoading:t,config:e,currentDocument:n,fileName:i,CurrentRenderer:r,state:a,t:l})=>{var c,u;if(s.length)if(t){if(e&&((c=e==null?void 0:e.loadingRenderer)!=null&&c.overrideComponent)){const h=e.loadingRenderer.overrideComponent;return O.jsx(pv,{children:O.jsx(h,{document:n,fileName:i})})}return O.jsx(pv,{children:O.jsx(IP,{id:"loading-renderer","data-testid":"loading-renderer",children:O.jsx(FP,{children:O.jsx(nP,{color:"#444",size:40})})})})}else{if(r)return O.jsx(r,{mainState:a});if(r===void 0)return null;if(e&&((u=e==null?void 0:e.noRenderer)!=null&&u.overrideComponent)){const h=e.noRenderer.overrideComponent;return O.jsx(h,{document:n,fileName:i})}return O.jsxs("div",{id:"no-renderer","data-testid":"no-renderer",children:[l("noRendererMessage",{fileType:(n==null?void 0:n.fileType)??""}),O.jsx(DP,{id:"no-renderer-download",href:n==null?void 0:n.uri,download:n==null?void 0:n.uri,children:l("downloadButtonLabel")})]})}else return O.jsx("div",{id:"no-documents"})},kP=()=>{var f;const{state:s,dispatch:t,CurrentRenderer:e}=PP(),{documents:n,documentLoading:i,currentDocument:r,config:a}=s,l=RP(),{t:c}=ra(),u=H.useCallback(g=>{g&&t(qT(g==null?void 0:g.getBoundingClientRect()))},[l,t]),h=hb(r,((f=a==null?void 0:a.header)==null?void 0:f.retainURLParams)||!1);return O.jsx("div",{id:"proxy-renderer","data-testid":"proxy-renderer",ref:u,children:O.jsx(LP,{state:s,documents:n,documentLoading:i,config:a,currentDocument:r,fileName:h,CurrentRenderer:e,t:c})})},IP=bt.div`
  display: flex;
  flex: 1;
  height: 75px;
  align-items: center;
  justify-content: center;
`,MP=DS`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,FP=bt.div`
  animation-name: ${MP};
  animation-duration: 4s;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
`,DP=bt(ob)`
  width: 130px;
  height: 30px;
  background-color: ${s=>s.theme.primary};
  @media (max-width: 768px) {
    width: 125px;
    height: 25px;
  }
`,gv={primary:"#fff",secondary:"#000",tertiary:"#ffffff99",textPrimary:"#000",textSecondary:"#fff",textTertiary:"#00000044",disableThemeScrollbar:!1},Vi=s=>{const{mainState:{currentDocument:t},children:e}=s;return t?O.jsx(OP,{id:"image-renderer",...s,children:e||O.jsx(NP,{id:"image-img",src:t.fileData})}):null};Vi.fileTypes=[];Vi.weight=0;const OP=bt.div`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background-color: #fff;
`,NP=bt.img`
  max-width: 95%;
  max-height: 95%;
`,hp=s=>O.jsx(Vi,{...s});hp.fileTypes=["bmp","image/bmp"];hp.weight=0;const Xh=({mainState:{currentDocument:s}})=>(H.useEffect(()=>{const t=s==null?void 0:s.fileData;let e="";const n=(t==null?void 0:t.replace(/^data:text\/html;(?:charset=([^;]*);)?base64,/,(c,u)=>(e=u,"")))||"";let i=window.atob(n);if(e){const c=new Uint8Array(i.length);for(let u=0;u<i.length;u++)c[u]=i.charCodeAt(u);i=new TextDecoder(e).decode(c)}const r=document.getElementById("html-body"),a=(r==null?void 0:r.contentWindow)&&r.contentWindow;if(!a)return;const l=a.document;l.open(),l.write(`${i}`),l.close()},[s]),O.jsx(BP,{id:"html-renderer",children:O.jsx($P,{id:"html-body",sandbox:"allow-same-origin"})}));Xh.fileTypes=["htm","html","text/htm","text/html"];Xh.weight=0;Xh.fileLoader=h0;const BP=bt.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0 30px;
`,$P=bt.iframe`
  height: 100%;
  padding: 15px;
  margin: 20px 0 20px 0;
  border: 1px solid ${s=>s.theme.secondary};
`,up=s=>O.jsx(Vi,{...s});up.fileTypes=["jpg","jpeg","image/jpg","image/jpeg"];up.weight=0;const Yh=({mainState:{currentDocument:s}})=>s?O.jsx(jP,{id:"msdoc-renderer",children:O.jsx(HP,{id:"msdoc-iframe",title:"msdoc-iframe",src:`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(s.uri)}`,frameBorder:"0"})}):null,Ls={odt:["odt","application/vnd.oasis.opendocument.text"],doc:["doc","application/msword"],docx:["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/octet-stream"],xls:["xls","application/vnd.ms-excel"],xlsx:["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["ppt","application/vnd.ms-powerpoint"],pptx:["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"]};Yh.fileTypes=[...Ls.odt,...Ls.doc,...Ls.docx,...Ls.xls,...Ls.xlsx,...Ls.ppt,...Ls.pptx];Yh.weight=0;Yh.fileLoader=({fileLoaderComplete:s})=>s();const jP=bt.div`
  width: 100%;
`,HP=bt.iframe`
  width: 100%;
  height: 100%;
  border: 0;
`;var he={},dp={};dp.byteLength=VP;dp.toByteArray=WP;dp.fromByteArray=YP;var ti=[],on=[],UP=typeof Uint8Array<"u"?Uint8Array:Array,tg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ua=0,zP=tg.length;ua<zP;++ua)ti[ua]=tg[ua],on[tg.charCodeAt(ua)]=ua;on[45]=62;on[95]=63;function fb(s){var t=s.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=s.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function VP(s){var t=fb(s),e=t[0],n=t[1];return(e+n)*3/4-n}function GP(s,t,e){return(t+e)*3/4-e}function WP(s){var t,e=fb(s),n=e[0],i=e[1],r=new UP(GP(s,n,i)),a=0,l=i>0?n-4:n,c;for(c=0;c<l;c+=4)t=on[s.charCodeAt(c)]<<18|on[s.charCodeAt(c+1)]<<12|on[s.charCodeAt(c+2)]<<6|on[s.charCodeAt(c+3)],r[a++]=t>>16&255,r[a++]=t>>8&255,r[a++]=t&255;return i===2&&(t=on[s.charCodeAt(c)]<<2|on[s.charCodeAt(c+1)]>>4,r[a++]=t&255),i===1&&(t=on[s.charCodeAt(c)]<<10|on[s.charCodeAt(c+1)]<<4|on[s.charCodeAt(c+2)]>>2,r[a++]=t>>8&255,r[a++]=t&255),r}function qP(s){return ti[s>>18&63]+ti[s>>12&63]+ti[s>>6&63]+ti[s&63]}function XP(s,t,e){for(var n,i=[],r=t;r<e;r+=3)n=(s[r]<<16&16711680)+(s[r+1]<<8&65280)+(s[r+2]&255),i.push(qP(n));return i.join("")}function YP(s){for(var t,e=s.length,n=e%3,i=[],r=16383,a=0,l=e-n;a<l;a+=r)i.push(XP(s,a,a+r>l?l:a+r));return n===1?(t=s[e-1],i.push(ti[t>>2]+ti[t<<4&63]+"==")):n===2&&(t=(s[e-2]<<8)+s[e-1],i.push(ti[t>>10]+ti[t>>4&63]+ti[t<<2&63]+"=")),i.join("")}var d0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d0.read=function(s,t,e,n,i){var r,a,l=i*8-n-1,c=(1<<l)-1,u=c>>1,h=-7,f=e?i-1:0,g=e?-1:1,v=s[t+f];for(f+=g,r=v&(1<<-h)-1,v>>=-h,h+=l;h>0;r=r*256+s[t+f],f+=g,h-=8);for(a=r&(1<<-h)-1,r>>=-h,h+=n;h>0;a=a*256+s[t+f],f+=g,h-=8);if(r===0)r=1-u;else{if(r===c)return a?NaN:(v?-1:1)*(1/0);a=a+Math.pow(2,n),r=r-u}return(v?-1:1)*a*Math.pow(2,r-n)};d0.write=function(s,t,e,n,i,r){var a,l,c,u=r*8-i-1,h=(1<<u)-1,f=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:r-1,y=n?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+f>=1?t+=g/c:t+=g*Math.pow(2,1-f),t*c>=2&&(a++,c/=2),a+f>=h?(l=0,a=h):a+f>=1?(l=(t*c-1)*Math.pow(2,i),a=a+f):(l=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;s[e+v]=l&255,v+=y,l/=256,i-=8);for(a=a<<i|l,u+=i;u>0;s[e+v]=a&255,v+=y,a/=256,u-=8);s[e+v-y]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(s){const t=dp,e=d0,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=h,s.SlowBuffer=F,s.INSPECT_MAX_BYTES=50;const i=2147483647;s.kMaxLength=i;const{Uint8Array:r,ArrayBuffer:a,SharedArrayBuffer:l}=globalThis;h.TYPED_ARRAY_SUPPORT=c(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const b=new r(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,r.prototype),Object.setPrototypeOf(b,d),b.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function u(b){if(b>i)throw new RangeError('The value "'+b+'" is invalid for option "size"');const d=new r(b);return Object.setPrototypeOf(d,h.prototype),d}function h(b,d,p){if(typeof b=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(b)}return f(b,d,p)}h.poolSize=8192;function f(b,d,p){if(typeof b=="string")return E(b,d);if(a.isView(b))return _(b);if(b==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(lt(b,a)||b&&lt(b.buffer,a)||typeof l<"u"&&(lt(b,l)||b&&lt(b.buffer,l)))return P(b,d,p);if(typeof b=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const x=b.valueOf&&b.valueOf();if(x!=null&&x!==b)return h.from(x,d,p);const R=L(b);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof b[Symbol.toPrimitive]=="function")return h.from(b[Symbol.toPrimitive]("string"),d,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b)}h.from=function(b,d,p){return f(b,d,p)},Object.setPrototypeOf(h.prototype,r.prototype),Object.setPrototypeOf(h,r);function g(b){if(typeof b!="number")throw new TypeError('"size" argument must be of type number');if(b<0)throw new RangeError('The value "'+b+'" is invalid for option "size"')}function v(b,d,p){return g(b),b<=0?u(b):d!==void 0?typeof p=="string"?u(b).fill(d,p):u(b).fill(d):u(b)}h.alloc=function(b,d,p){return v(b,d,p)};function y(b){return g(b),u(b<0?0:k(b)|0)}h.allocUnsafe=function(b){return y(b)},h.allocUnsafeSlow=function(b){return y(b)};function E(b,d){if((typeof d!="string"||d==="")&&(d="utf8"),!h.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const p=I(b,d)|0;let x=u(p);const R=x.write(b,d);return R!==p&&(x=x.slice(0,R)),x}function C(b){const d=b.length<0?0:k(b.length)|0,p=u(d);for(let x=0;x<d;x+=1)p[x]=b[x]&255;return p}function _(b){if(lt(b,r)){const d=new r(b);return P(d.buffer,d.byteOffset,d.byteLength)}return C(b)}function P(b,d,p){if(d<0||b.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(b.byteLength<d+(p||0))throw new RangeError('"length" is outside of buffer bounds');let x;return d===void 0&&p===void 0?x=new r(b):p===void 0?x=new r(b,d):x=new r(b,d,p),Object.setPrototypeOf(x,h.prototype),x}function L(b){if(h.isBuffer(b)){const d=k(b.length)|0,p=u(d);return p.length===0||b.copy(p,0,0,d),p}if(b.length!==void 0)return typeof b.length!="number"||Ie(b.length)?u(0):C(b);if(b.type==="Buffer"&&Array.isArray(b.data))return C(b.data)}function k(b){if(b>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return b|0}function F(b){return+b!=b&&(b=0),h.alloc(+b)}h.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==h.prototype},h.compare=function(d,p){if(lt(d,r)&&(d=h.from(d,d.offset,d.byteLength)),lt(p,r)&&(p=h.from(p,p.offset,p.byteLength)),!h.isBuffer(d)||!h.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===p)return 0;let x=d.length,R=p.length;for(let N=0,j=Math.min(x,R);N<j;++N)if(d[N]!==p[N]){x=d[N],R=p[N];break}return x<R?-1:R<x?1:0},h.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(d,p){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return h.alloc(0);let x;if(p===void 0)for(p=0,x=0;x<d.length;++x)p+=d[x].length;const R=h.allocUnsafe(p);let N=0;for(x=0;x<d.length;++x){let j=d[x];if(lt(j,r))N+j.length>R.length?(h.isBuffer(j)||(j=h.from(j)),j.copy(R,N)):r.prototype.set.call(R,j,N);else if(h.isBuffer(j))j.copy(R,N);else throw new TypeError('"list" argument must be an Array of Buffers');N+=j.length}return R};function I(b,d){if(h.isBuffer(b))return b.length;if(a.isView(b)||lt(b,a))return b.byteLength;if(typeof b!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof b);const p=b.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&p===0)return 0;let R=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return ue(b).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Lt(b).length;default:if(R)return x?-1:ue(b).length;d=(""+d).toLowerCase(),R=!0}}h.byteLength=I;function M(b,d,p){let x=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,d>>>=0,p<=d))return"";for(b||(b="utf8");;)switch(b){case"hex":return z(this,d,p);case"utf8":case"utf-8":return $(this,d,p);case"ascii":return wt(this,d,p);case"latin1":case"binary":return Et(this,d,p);case"base64":return Y(this,d,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,d,p);default:if(x)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase(),x=!0}}h.prototype._isBuffer=!0;function S(b,d,p){const x=b[d];b[d]=b[p],b[p]=x}h.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<d;p+=2)S(this,p,p+1);return this},h.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<d;p+=4)S(this,p,p+3),S(this,p+1,p+2);return this},h.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<d;p+=8)S(this,p,p+7),S(this,p+1,p+6),S(this,p+2,p+5),S(this,p+3,p+4);return this},h.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?$(this,0,d):M.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(d){if(!h.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:h.compare(this,d)===0},h.prototype.inspect=function(){let d="";const p=s.INSPECT_MAX_BYTES;return d=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(d+=" ... "),"<Buffer "+d+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(d,p,x,R,N){if(lt(d,r)&&(d=h.from(d,d.offset,d.byteLength)),!h.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(p===void 0&&(p=0),x===void 0&&(x=d?d.length:0),R===void 0&&(R=0),N===void 0&&(N=this.length),p<0||x>d.length||R<0||N>this.length)throw new RangeError("out of range index");if(R>=N&&p>=x)return 0;if(R>=N)return-1;if(p>=x)return 1;if(p>>>=0,x>>>=0,R>>>=0,N>>>=0,this===d)return 0;let j=N-R,At=x-p;const Vt=Math.min(j,At),Ut=this.slice(R,N),Gt=d.slice(p,x);for(let Dt=0;Dt<Vt;++Dt)if(Ut[Dt]!==Gt[Dt]){j=Ut[Dt],At=Gt[Dt];break}return j<At?-1:At<j?1:0};function T(b,d,p,x,R){if(b.length===0)return-1;if(typeof p=="string"?(x=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Ie(p)&&(p=R?0:b.length-1),p<0&&(p=b.length+p),p>=b.length){if(R)return-1;p=b.length-1}else if(p<0)if(R)p=0;else return-1;if(typeof d=="string"&&(d=h.from(d,x)),h.isBuffer(d))return d.length===0?-1:D(b,d,p,x,R);if(typeof d=="number")return d=d&255,typeof r.prototype.indexOf=="function"?R?r.prototype.indexOf.call(b,d,p):r.prototype.lastIndexOf.call(b,d,p):D(b,[d],p,x,R);throw new TypeError("val must be string, number or Buffer")}function D(b,d,p,x,R){let N=1,j=b.length,At=d.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(b.length<2||d.length<2)return-1;N=2,j/=2,At/=2,p/=2}function Vt(Gt,Dt){return N===1?Gt[Dt]:Gt.readUInt16BE(Dt*N)}let Ut;if(R){let Gt=-1;for(Ut=p;Ut<j;Ut++)if(Vt(b,Ut)===Vt(d,Gt===-1?0:Ut-Gt)){if(Gt===-1&&(Gt=Ut),Ut-Gt+1===At)return Gt*N}else Gt!==-1&&(Ut-=Ut-Gt),Gt=-1}else for(p+At>j&&(p=j-At),Ut=p;Ut>=0;Ut--){let Gt=!0;for(let Dt=0;Dt<At;Dt++)if(Vt(b,Ut+Dt)!==Vt(d,Dt)){Gt=!1;break}if(Gt)return Ut}return-1}h.prototype.includes=function(d,p,x){return this.indexOf(d,p,x)!==-1},h.prototype.indexOf=function(d,p,x){return T(this,d,p,x,!0)},h.prototype.lastIndexOf=function(d,p,x){return T(this,d,p,x,!1)};function B(b,d,p,x){p=Number(p)||0;const R=b.length-p;x?(x=Number(x),x>R&&(x=R)):x=R;const N=d.length;x>N/2&&(x=N/2);let j;for(j=0;j<x;++j){const At=parseInt(d.substr(j*2,2),16);if(Ie(At))return j;b[p+j]=At}return j}function U(b,d,p,x){return ie(ue(d,b.length-p),b,p,x)}function V(b,d,p,x){return ie($t(d),b,p,x)}function G(b,d,p,x){return ie(Lt(d),b,p,x)}function Z(b,d,p,x){return ie(Rt(d,b.length-p),b,p,x)}h.prototype.write=function(d,p,x,R){if(p===void 0)R="utf8",x=this.length,p=0;else if(x===void 0&&typeof p=="string")R=p,x=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(x)?(x=x>>>0,R===void 0&&(R="utf8")):(R=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const N=this.length-p;if((x===void 0||x>N)&&(x=N),d.length>0&&(x<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");let j=!1;for(;;)switch(R){case"hex":return B(this,d,p,x);case"utf8":case"utf-8":return U(this,d,p,x);case"ascii":case"latin1":case"binary":return V(this,d,p,x);case"base64":return G(this,d,p,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,d,p,x);default:if(j)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),j=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(b,d,p){return d===0&&p===b.length?t.fromByteArray(b):t.fromByteArray(b.slice(d,p))}function $(b,d,p){p=Math.min(b.length,p);const x=[];let R=d;for(;R<p;){const N=b[R];let j=null,At=N>239?4:N>223?3:N>191?2:1;if(R+At<=p){let Vt,Ut,Gt,Dt;switch(At){case 1:N<128&&(j=N);break;case 2:Vt=b[R+1],(Vt&192)===128&&(Dt=(N&31)<<6|Vt&63,Dt>127&&(j=Dt));break;case 3:Vt=b[R+1],Ut=b[R+2],(Vt&192)===128&&(Ut&192)===128&&(Dt=(N&15)<<12|(Vt&63)<<6|Ut&63,Dt>2047&&(Dt<55296||Dt>57343)&&(j=Dt));break;case 4:Vt=b[R+1],Ut=b[R+2],Gt=b[R+3],(Vt&192)===128&&(Ut&192)===128&&(Gt&192)===128&&(Dt=(N&15)<<18|(Vt&63)<<12|(Ut&63)<<6|Gt&63,Dt>65535&&Dt<1114112&&(j=Dt))}}j===null?(j=65533,At=1):j>65535&&(j-=65536,x.push(j>>>10&1023|55296),j=56320|j&1023),x.push(j),R+=At}return q(x)}const W=4096;function q(b){const d=b.length;if(d<=W)return String.fromCharCode.apply(String,b);let p="",x=0;for(;x<d;)p+=String.fromCharCode.apply(String,b.slice(x,x+=W));return p}function wt(b,d,p){let x="";p=Math.min(b.length,p);for(let R=d;R<p;++R)x+=String.fromCharCode(b[R]&127);return x}function Et(b,d,p){let x="";p=Math.min(b.length,p);for(let R=d;R<p;++R)x+=String.fromCharCode(b[R]);return x}function z(b,d,p){const x=b.length;(!d||d<0)&&(d=0),(!p||p<0||p>x)&&(p=x);let R="";for(let N=d;N<p;++N)R+=Jt[b[N]];return R}function it(b,d,p){const x=b.slice(d,p);let R="";for(let N=0;N<x.length-1;N+=2)R+=String.fromCharCode(x[N]+x[N+1]*256);return R}h.prototype.slice=function(d,p){const x=this.length;d=~~d,p=p===void 0?x:~~p,d<0?(d+=x,d<0&&(d=0)):d>x&&(d=x),p<0?(p+=x,p<0&&(p=0)):p>x&&(p=x),p<d&&(p=d);const R=this.subarray(d,p);return Object.setPrototypeOf(R,h.prototype),R};function st(b,d,p){if(b%1!==0||b<0)throw new RangeError("offset is not uint");if(b+d>p)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(d,p,x){d=d>>>0,p=p>>>0,x||st(d,p,this.length);let R=this[d],N=1,j=0;for(;++j<p&&(N*=256);)R+=this[d+j]*N;return R},h.prototype.readUintBE=h.prototype.readUIntBE=function(d,p,x){d=d>>>0,p=p>>>0,x||st(d,p,this.length);let R=this[d+--p],N=1;for(;p>0&&(N*=256);)R+=this[d+--p]*N;return R},h.prototype.readUint8=h.prototype.readUInt8=function(d,p){return d=d>>>0,p||st(d,1,this.length),this[d]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(d,p){return d=d>>>0,p||st(d,2,this.length),this[d]|this[d+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(d,p){return d=d>>>0,p||st(d,2,this.length),this[d]<<8|this[d+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(d,p){return d=d>>>0,p||st(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(d,p){return d=d>>>0,p||st(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},h.prototype.readBigUInt64LE=Xt(function(d){d=d>>>0,et(d,"offset");const p=this[d],x=this[d+7];(p===void 0||x===void 0)&&Tt(d,this.length-8);const R=p+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,N=this[++d]+this[++d]*2**8+this[++d]*2**16+x*2**24;return BigInt(R)+(BigInt(N)<<BigInt(32))}),h.prototype.readBigUInt64BE=Xt(function(d){d=d>>>0,et(d,"offset");const p=this[d],x=this[d+7];(p===void 0||x===void 0)&&Tt(d,this.length-8);const R=p*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],N=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+x;return(BigInt(R)<<BigInt(32))+BigInt(N)}),h.prototype.readIntLE=function(d,p,x){d=d>>>0,p=p>>>0,x||st(d,p,this.length);let R=this[d],N=1,j=0;for(;++j<p&&(N*=256);)R+=this[d+j]*N;return N*=128,R>=N&&(R-=Math.pow(2,8*p)),R},h.prototype.readIntBE=function(d,p,x){d=d>>>0,p=p>>>0,x||st(d,p,this.length);let R=p,N=1,j=this[d+--R];for(;R>0&&(N*=256);)j+=this[d+--R]*N;return N*=128,j>=N&&(j-=Math.pow(2,8*p)),j},h.prototype.readInt8=function(d,p){return d=d>>>0,p||st(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},h.prototype.readInt16LE=function(d,p){d=d>>>0,p||st(d,2,this.length);const x=this[d]|this[d+1]<<8;return x&32768?x|4294901760:x},h.prototype.readInt16BE=function(d,p){d=d>>>0,p||st(d,2,this.length);const x=this[d+1]|this[d]<<8;return x&32768?x|4294901760:x},h.prototype.readInt32LE=function(d,p){return d=d>>>0,p||st(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},h.prototype.readInt32BE=function(d,p){return d=d>>>0,p||st(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},h.prototype.readBigInt64LE=Xt(function(d){d=d>>>0,et(d,"offset");const p=this[d],x=this[d+7];(p===void 0||x===void 0)&&Tt(d,this.length-8);const R=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(x<<24);return(BigInt(R)<<BigInt(32))+BigInt(p+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),h.prototype.readBigInt64BE=Xt(function(d){d=d>>>0,et(d,"offset");const p=this[d],x=this[d+7];(p===void 0||x===void 0)&&Tt(d,this.length-8);const R=(p<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(R)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+x)}),h.prototype.readFloatLE=function(d,p){return d=d>>>0,p||st(d,4,this.length),e.read(this,d,!0,23,4)},h.prototype.readFloatBE=function(d,p){return d=d>>>0,p||st(d,4,this.length),e.read(this,d,!1,23,4)},h.prototype.readDoubleLE=function(d,p){return d=d>>>0,p||st(d,8,this.length),e.read(this,d,!0,52,8)},h.prototype.readDoubleBE=function(d,p){return d=d>>>0,p||st(d,8,this.length),e.read(this,d,!1,52,8)};function Q(b,d,p,x,R,N){if(!h.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>R||d<N)throw new RangeError('"value" argument is out of bounds');if(p+x>b.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(d,p,x,R){if(d=+d,p=p>>>0,x=x>>>0,!R){const At=Math.pow(2,8*x)-1;Q(this,d,p,x,At,0)}let N=1,j=0;for(this[p]=d&255;++j<x&&(N*=256);)this[p+j]=d/N&255;return p+x},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(d,p,x,R){if(d=+d,p=p>>>0,x=x>>>0,!R){const At=Math.pow(2,8*x)-1;Q(this,d,p,x,At,0)}let N=x-1,j=1;for(this[p+N]=d&255;--N>=0&&(j*=256);)this[p+N]=d/j&255;return p+x},h.prototype.writeUint8=h.prototype.writeUInt8=function(d,p,x){return d=+d,p=p>>>0,x||Q(this,d,p,1,255,0),this[p]=d&255,p+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(d,p,x){return d=+d,p=p>>>0,x||Q(this,d,p,2,65535,0),this[p]=d&255,this[p+1]=d>>>8,p+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(d,p,x){return d=+d,p=p>>>0,x||Q(this,d,p,2,65535,0),this[p]=d>>>8,this[p+1]=d&255,p+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(d,p,x){return d=+d,p=p>>>0,x||Q(this,d,p,4,4294967295,0),this[p+3]=d>>>24,this[p+2]=d>>>16,this[p+1]=d>>>8,this[p]=d&255,p+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(d,p,x){return d=+d,p=p>>>0,x||Q(this,d,p,4,4294967295,0),this[p]=d>>>24,this[p+1]=d>>>16,this[p+2]=d>>>8,this[p+3]=d&255,p+4};function ct(b,d,p,x,R){ht(d,x,R,b,p,7);let N=Number(d&BigInt(4294967295));b[p++]=N,N=N>>8,b[p++]=N,N=N>>8,b[p++]=N,N=N>>8,b[p++]=N;let j=Number(d>>BigInt(32)&BigInt(4294967295));return b[p++]=j,j=j>>8,b[p++]=j,j=j>>8,b[p++]=j,j=j>>8,b[p++]=j,p}function nt(b,d,p,x,R){ht(d,x,R,b,p,7);let N=Number(d&BigInt(4294967295));b[p+7]=N,N=N>>8,b[p+6]=N,N=N>>8,b[p+5]=N,N=N>>8,b[p+4]=N;let j=Number(d>>BigInt(32)&BigInt(4294967295));return b[p+3]=j,j=j>>8,b[p+2]=j,j=j>>8,b[p+1]=j,j=j>>8,b[p]=j,p+8}h.prototype.writeBigUInt64LE=Xt(function(d,p=0){return ct(this,d,p,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Xt(function(d,p=0){return nt(this,d,p,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(d,p,x,R){if(d=+d,p=p>>>0,!R){const Vt=Math.pow(2,8*x-1);Q(this,d,p,x,Vt-1,-Vt)}let N=0,j=1,At=0;for(this[p]=d&255;++N<x&&(j*=256);)d<0&&At===0&&this[p+N-1]!==0&&(At=1),this[p+N]=(d/j>>0)-At&255;return p+x},h.prototype.writeIntBE=function(d,p,x,R){if(d=+d,p=p>>>0,!R){const Vt=Math.pow(2,8*x-1);Q(this,d,p,x,Vt-1,-Vt)}let N=x-1,j=1,At=0;for(this[p+N]=d&255;--N>=0&&(j*=256);)d<0&&At===0&&this[p+N+1]!==0&&(At=1),this[p+N]=(d/j>>0)-At&255;return p+x},h.prototype.writeInt8=function(d,p,x){return d=+d,p=p>>>0,x||Q(this,d,p,1,127,-128),d<0&&(d=255+d+1),this[p]=d&255,p+1},h.prototype.writeInt16LE=function(d,p,x){return d=+d,p=p>>>0,x||Q(this,d,p,2,32767,-32768),this[p]=d&255,this[p+1]=d>>>8,p+2},h.prototype.writeInt16BE=function(d,p,x){return d=+d,p=p>>>0,x||Q(this,d,p,2,32767,-32768),this[p]=d>>>8,this[p+1]=d&255,p+2},h.prototype.writeInt32LE=function(d,p,x){return d=+d,p=p>>>0,x||Q(this,d,p,4,2147483647,-2147483648),this[p]=d&255,this[p+1]=d>>>8,this[p+2]=d>>>16,this[p+3]=d>>>24,p+4},h.prototype.writeInt32BE=function(d,p,x){return d=+d,p=p>>>0,x||Q(this,d,p,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[p]=d>>>24,this[p+1]=d>>>16,this[p+2]=d>>>8,this[p+3]=d&255,p+4},h.prototype.writeBigInt64LE=Xt(function(d,p=0){return ct(this,d,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Xt(function(d,p=0){return nt(this,d,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function at(b,d,p,x,R,N){if(p+x>b.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function X(b,d,p,x,R){return d=+d,p=p>>>0,R||at(b,d,p,4),e.write(b,d,p,x,23,4),p+4}h.prototype.writeFloatLE=function(d,p,x){return X(this,d,p,!0,x)},h.prototype.writeFloatBE=function(d,p,x){return X(this,d,p,!1,x)};function K(b,d,p,x,R){return d=+d,p=p>>>0,R||at(b,d,p,8),e.write(b,d,p,x,52,8),p+8}h.prototype.writeDoubleLE=function(d,p,x){return K(this,d,p,!0,x)},h.prototype.writeDoubleBE=function(d,p,x){return K(this,d,p,!1,x)},h.prototype.copy=function(d,p,x,R){if(!h.isBuffer(d))throw new TypeError("argument should be a Buffer");if(x||(x=0),!R&&R!==0&&(R=this.length),p>=d.length&&(p=d.length),p||(p=0),R>0&&R<x&&(R=x),R===x||d.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),d.length-p<R-x&&(R=d.length-p+x);const N=R-x;return this===d&&typeof r.prototype.copyWithin=="function"?this.copyWithin(p,x,R):r.prototype.set.call(d,this.subarray(x,R),p),N},h.prototype.fill=function(d,p,x,R){if(typeof d=="string"){if(typeof p=="string"?(R=p,p=0,x=this.length):typeof x=="string"&&(R=x,x=this.length),R!==void 0&&typeof R!="string")throw new TypeError("encoding must be a string");if(typeof R=="string"&&!h.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(d.length===1){const j=d.charCodeAt(0);(R==="utf8"&&j<128||R==="latin1")&&(d=j)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(p<0||this.length<p||this.length<x)throw new RangeError("Out of range index");if(x<=p)return this;p=p>>>0,x=x===void 0?this.length:x>>>0,d||(d=0);let N;if(typeof d=="number")for(N=p;N<x;++N)this[N]=d;else{const j=h.isBuffer(d)?d:h.from(d,R),At=j.length;if(At===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(N=0;N<x-p;++N)this[N+p]=j[N%At]}return this};const ft={};function mt(b,d,p){ft[b]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${b}]`,this.stack,delete this.name}get code(){return b}set code(R){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:R,writable:!0})}toString(){return`${this.name} [${b}]: ${this.message}`}}}mt("ERR_BUFFER_OUT_OF_BOUNDS",function(b){return b?`${b} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),mt("ERR_INVALID_ARG_TYPE",function(b,d){return`The "${b}" argument must be of type number. Received type ${typeof d}`},TypeError),mt("ERR_OUT_OF_RANGE",function(b,d,p){let x=`The value of "${b}" is out of range.`,R=p;return Number.isInteger(p)&&Math.abs(p)>2**32?R=tt(String(p)):typeof p=="bigint"&&(R=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(R=tt(R)),R+="n"),x+=` It must be ${d}. Received ${R}`,x},RangeError);function tt(b){let d="",p=b.length;const x=b[0]==="-"?1:0;for(;p>=x+4;p-=3)d=`_${b.slice(p-3,p)}${d}`;return`${b.slice(0,p)}${d}`}function pt(b,d,p){et(d,"offset"),(b[d]===void 0||b[d+p]===void 0)&&Tt(d,b.length-(p+1))}function ht(b,d,p,x,R,N){if(b>p||b<d){const j=typeof d=="bigint"?"n":"";let At;throw d===0||d===BigInt(0)?At=`>= 0${j} and < 2${j} ** ${(N+1)*8}${j}`:At=`>= -(2${j} ** ${(N+1)*8-1}${j}) and < 2 ** ${(N+1)*8-1}${j}`,new ft.ERR_OUT_OF_RANGE("value",At,b)}pt(x,R,N)}function et(b,d){if(typeof b!="number")throw new ft.ERR_INVALID_ARG_TYPE(d,"number",b)}function Tt(b,d,p){throw Math.floor(b)!==b?(et(b,p),new ft.ERR_OUT_OF_RANGE("offset","an integer",b)):d<0?new ft.ERR_BUFFER_OUT_OF_BOUNDS:new ft.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,b)}const qt=/[^+/0-9A-Za-z-_]/g;function ne(b){if(b=b.split("=")[0],b=b.trim().replace(qt,""),b.length<2)return"";for(;b.length%4!==0;)b=b+"=";return b}function ue(b,d){d=d||1/0;let p;const x=b.length;let R=null;const N=[];for(let j=0;j<x;++j){if(p=b.charCodeAt(j),p>55295&&p<57344){if(!R){if(p>56319){(d-=3)>-1&&N.push(239,191,189);continue}else if(j+1===x){(d-=3)>-1&&N.push(239,191,189);continue}R=p;continue}if(p<56320){(d-=3)>-1&&N.push(239,191,189),R=p;continue}p=(R-55296<<10|p-56320)+65536}else R&&(d-=3)>-1&&N.push(239,191,189);if(R=null,p<128){if((d-=1)<0)break;N.push(p)}else if(p<2048){if((d-=2)<0)break;N.push(p>>6|192,p&63|128)}else if(p<65536){if((d-=3)<0)break;N.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((d-=4)<0)break;N.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return N}function $t(b){const d=[];for(let p=0;p<b.length;++p)d.push(b.charCodeAt(p)&255);return d}function Rt(b,d){let p,x,R;const N=[];for(let j=0;j<b.length&&!((d-=2)<0);++j)p=b.charCodeAt(j),x=p>>8,R=p%256,N.push(R),N.push(x);return N}function Lt(b){return t.toByteArray(ne(b))}function ie(b,d,p,x){let R;for(R=0;R<x&&!(R+p>=d.length||R>=b.length);++R)d[R+p]=b[R];return R}function lt(b,d){return b instanceof d||b!=null&&b.constructor!=null&&b.constructor.name!=null&&b.constructor.name===d.name}function Ie(b){return b!==b}const Jt=function(){const b="0123456789abcdef",d=new Array(256);for(let p=0;p<16;++p){const x=p*16;for(let R=0;R<16;++R)d[x+R]=b[p]+b[R]}return d}();function Xt(b){return typeof BigInt>"u"?Me:b}function Me(){throw new Error("BigInt not supported")}})(he);const rd=he.Buffer,KP=he.Blob,ZP=he.BlobOptions,JP=he.Buffer,QP=he.File,tR=he.FileOptions,eR=he.INSPECT_MAX_BYTES,nR=he.SlowBuffer,iR=he.TranscodeEncoding,sR=he.atob,rR=he.btoa,aR=he.constants,oR=he.isAscii,lR=he.isUtf8,cR=he.kMaxLength,hR=he.kStringMaxLength,uR=he.resolveObjectURL,dR=he.transcode,fR=Object.freeze(Object.defineProperty({__proto__:null,Blob:KP,BlobOptions:ZP,Buffer:JP,File:QP,FileOptions:tR,INSPECT_MAX_BYTES:eR,SlowBuffer:nR,TranscodeEncoding:iR,atob:sR,btoa:rR,constants:aR,default:rd,isAscii:oR,isUtf8:lR,kMaxLength:cR,kStringMaxLength:hR,resolveObjectURL:uR,transcode:dR},Symbol.toStringTag,{value:"Module"}));var Al={};Al.d=(s,t)=>{for(var e in t)Al.o(t,e)&&!Al.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})};Al.o=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var ot=globalThis.pdfjsLib={};Al.d(ot,{AbortException:()=>oa,AnnotationEditorLayer:()=>Nm,AnnotationEditorParamsType:()=>ut,AnnotationEditorType:()=>xt,AnnotationEditorUIManager:()=>ta,AnnotationLayer:()=>uk,AnnotationMode:()=>Zi,CMapCompressionType:()=>Rg,ColorPicker:()=>dd,DOMSVGFactory:()=>g0,DrawLayer:()=>Hm,FeatureTest:()=>Ve,GlobalWorkerOptions:()=>Ui,ImageKind:()=>Su,InvalidPDFException:()=>gb,MissingPDFException:()=>aa,OPS:()=>gn,Outliner:()=>ym,PDFDataRangeTransport:()=>hw,PDFDateString:()=>Eb,PDFWorker:()=>_a,PasswordResponses:()=>vR,PermissionFlag:()=>mR,PixelsPerInch:()=>Cs,RenderingCancelledException:()=>m0,TextLayer:()=>hd,UnexpectedResponseException:()=>mp,Util:()=>J,VerbosityLevel:()=>fp,XfaLayer:()=>dw,build:()=>GL,createValidAbsoluteUrl:()=>AR,fetchData:()=>Ap,getDocument:()=>OL,getFilenameFromUrl:()=>kR,getPdfFilenameFromUrl:()=>IR,getXfaPageViewport:()=>MR,isDataScheme:()=>v0,isPdfFile:()=>y0,noContextMenu:()=>Ge,normalizeUnicode:()=>TR,renderTextLayer:()=>TL,setLayerDimensions:()=>Qr,shadow:()=>Ct,updateTextLayer:()=>PL,version:()=>VL});const ke=typeof dt=="object"&&dt+""=="[object process]"&&!dt.versions.nw&&!(dt.versions.electron&&dt.type&&dt.type!=="browser"),pb=[1,0,0,1,0,0],Pg=[.001,0,0,.001,0,0],pR=1e7,eg=1.35,dn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},Zi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},gR="pdfjs_internal_editor_",xt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ut={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},mR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Se={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Su={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},se={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},el={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},fp={ERRORS:0,WARNINGS:1,INFOS:5},Rg={NONE:0,BINARY:1},gn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},vR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let pp=fp.WARNINGS;function yR(s){Number.isInteger(s)&&(pp=s)}function bR(){return pp}function gp(s){pp>=fp.INFOS&&console.log(`Info: ${s}`)}function yt(s){pp>=fp.WARNINGS&&console.log(`Warning: ${s}`)}function Ft(s){throw new Error(s)}function ce(s,t){s||Ft(t)}function wR(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function AR(s,t=null,e=null){if(!s)return null;try{if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const i=s.match(/\./g);(i==null?void 0:i.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=CR(s)}catch{}}const n=t?new URL(s,t):new URL(s);if(wR(n))return n}catch{}return null}function Ct(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Rs=function(){function t(e,n){this.constructor===t&&Ft("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class Lg extends Rs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class kg extends Rs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class gb extends Rs{constructor(t){super(t,"InvalidPDFException")}}class aa extends Rs{constructor(t){super(t,"MissingPDFException")}}class mp extends Rs{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class ER extends Rs{constructor(t){super(t,"FormatError")}}class oa extends Rs{constructor(t){super(t,"AbortException")}}function mb(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&Ft("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),a=s.subarray(i,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function vp(s){typeof s!="string"&&Ft("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function _R(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function f0(s){const t=Object.create(null);for(const[e,n]of s)t[e]=n;return t}function xR(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function SR(){try{return new Function(""),!0}catch{return!1}}class Ve{static get isLittleEndian(){return Ct(this,"isLittleEndian",xR())}static get isEvalSupported(){return Ct(this,"isEvalSupported",SR())}static get isOffscreenCanvasSupported(){return Ct(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ct(this,"platform",{isMac:navigator.platform.includes("Mac")}):Ct(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return Ct(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const ng=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var Ca,Cu,Tl,Ig;class J{static makeHexColor(t,e,n){return`#${ng[t]}${ng[e]}${ng[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[n,i]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[i,r]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],r[0],a[0]),Math.min(n[1],i[1],r[1],a[1]),Math.max(n[0],i[0],r[0],a[0]),Math.max(n[1],i[1],r[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],l=(n+a)/2,c=Math.sqrt((n+a)**2-4*(n*a-r*i))/2,u=l+c||1,h=l-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[n,r,i,a]}static bezierBoundingBox(t,e,n,i,r,a,l,c,u){return u?(u[0]=Math.min(u[0],t,l),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,l),u[3]=Math.max(u[3],e,c)):u=[Math.min(t,l),Math.min(e,c),Math.max(t,l),Math.max(e,c)],A(this,Tl,Ig).call(this,t,n,r,l,e,i,a,c,3*(-t+3*(n-r)+l),6*(t-2*n+r),3*(n-t),u),A(this,Tl,Ig).call(this,t,n,r,l,e,i,a,c,3*(-e+3*(i-a)+c),6*(e-2*i+a),3*(i-e),u),u}}Ca=new WeakSet,Cu=function(t,e,n,i,r,a,l,c,u,h){if(u<=0||u>=1)return;const f=1-u,g=u*u,v=g*u,y=f*(f*(f*t+3*u*e)+3*g*n)+v*i,E=f*(f*(f*r+3*u*a)+3*g*l)+v*c;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],E),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],E)},Tl=new WeakSet,Ig=function(t,e,n,i,r,a,l,c,u,h,f,g){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&A(this,Ca,Cu).call(this,t,e,n,i,r,a,l,c,-f/h,g);return}const v=h**2-4*f*u;if(v<0)return;const y=Math.sqrt(v),E=2*u;A(this,Ca,Cu).call(this,t,e,n,i,r,a,l,c,(-h+y)/E,g),A(this,Ca,Cu).call(this,t,e,n,i,r,a,l,c,(-h-y)/E,g)},m(J,Ca),m(J,Tl);function CR(s){return decodeURIComponent(escape(s))}let ig=null,mv=null;function TR(s){return ig||(ig=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,mv=new Map([["ï¬","Å¿t"]])),s.replaceAll(ig,(t,e,n)=>e?e.normalize("NFKC"):mv.get(n))}function PR(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const s=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(s);else for(let t=0;t<32;t++)s[t]=Math.floor(Math.random()*255);return mb(s)}const vb="pdfjs_internal_id_",si={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class yp{constructor(){this.constructor===yp&&Ft("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,r){return"none"}destroy(t=!1){}}var Pl;const x0=class x0{constructor({enableHWA:t=!1}={}){m(this,Pl,!1);this.constructor===x0&&Ft("Cannot initialize BaseCanvasFactory."),w(this,Pl,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!o(this,Pl)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ft("Abstract method `_createCanvas` called.")}};Pl=new WeakMap;let ad=x0;class bp{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===bp&&Ft("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),n=this.isCompressed?Rg.BINARY:Rg.NONE;return this._fetchData(e,n).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){Ft("Abstract method `_fetchData` called.")}}class wp{constructor({baseUrl:t=null}){this.constructor===wp&&Ft("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){Ft("Abstract method `_fetchData` called.")}}class p0{constructor(){this.constructor===p0&&Ft("Cannot initialize BaseSVGFactory.")}create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ft("Abstract method `_createSVG` called.")}}const ai="http://www.w3.org/2000/svg",Ns=class Ns{};gt(Ns,"CSS",96),gt(Ns,"PDF",72),gt(Ns,"PDF_TO_CSS_UNITS",Ns.CSS/Ns.PDF);let Cs=Ns;var Hs,Dn,di,je,gd,Us,fe,Ce,Qi,da,ts,fa,Ta,Tu,md,yb,Rl,Mg,es,pa,zs,rl,Vs,al,Ll,Fg,Gs,ol;class RR extends yp{constructor({docId:e,ownerDocument:n=globalThis.document}={}){super();m(this,fe);m(this,Qi);m(this,ts);m(this,Ta);m(this,md);m(this,Rl);m(this,es);m(this,zs);m(this,Vs);m(this,Ll);m(this,Gs);m(this,Hs,void 0);m(this,Dn,void 0);m(this,di,void 0);m(this,je,void 0);m(this,gd,void 0);m(this,Us,0);w(this,di,e),w(this,je,n)}addFilter(e){if(!e)return"none";let n=o(this,fe,Ce).get(e);if(n)return n;const[i,r,a]=A(this,Ta,Tu).call(this,e),l=e.length===1?i:`${i}${r}${a}`;if(n=o(this,fe,Ce).get(l),n)return o(this,fe,Ce).set(e,n),n;const c=`g_${o(this,di)}_transfer_map_${We(this,Us)._++}`,u=`url(#${c})`;o(this,fe,Ce).set(e,u),o(this,fe,Ce).set(l,u);const h=A(this,es,pa).call(this,c);return A(this,Vs,al).call(this,i,r,a,h),u}addHCMFilter(e,n){var y;const i=`${e}-${n}`,r="base";let a=o(this,Qi,da).get(r);if((a==null?void 0:a.key)===i||(a?((y=a.filter)==null||y.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},o(this,Qi,da).set(r,a)),!e||!n))return a.url;const l=A(this,Gs,ol).call(this,e);e=J.makeHexColor(...l);const c=A(this,Gs,ol).call(this,n);if(n=J.makeHexColor(...c),o(this,ts,fa).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const u=new Array(256);for(let E=0;E<=255;E++){const C=E/255;u[E]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const h=u.join(","),f=`g_${o(this,di)}_hcm_filter`,g=a.filter=A(this,es,pa).call(this,f);A(this,Vs,al).call(this,h,h,h,g),A(this,Rl,Mg).call(this,g);const v=(E,C)=>{const _=l[E]/255,P=c[E]/255,L=new Array(C+1);for(let k=0;k<=C;k++)L[k]=_+k/C*(P-_);return L.join(",")};return A(this,Vs,al).call(this,v(0,5),v(1,5),v(2,5),g),a.url=`url(#${f})`,a.url}addAlphaFilter(e){let n=o(this,fe,Ce).get(e);if(n)return n;const[i]=A(this,Ta,Tu).call(this,[e]),r=`alpha_${i}`;if(n=o(this,fe,Ce).get(r),n)return o(this,fe,Ce).set(e,n),n;const a=`g_${o(this,di)}_alpha_map_${We(this,Us)._++}`,l=`url(#${a})`;o(this,fe,Ce).set(e,l),o(this,fe,Ce).set(r,l);const c=A(this,es,pa).call(this,a);return A(this,Ll,Fg).call(this,i,c),l}addLuminosityFilter(e){let n=o(this,fe,Ce).get(e||"luminosity");if(n)return n;let i,r;if(e?([i]=A(this,Ta,Tu).call(this,[e]),r=`luminosity_${i}`):r="luminosity",n=o(this,fe,Ce).get(r),n)return o(this,fe,Ce).set(e,n),n;const a=`g_${o(this,di)}_luminosity_map_${We(this,Us)._++}`,l=`url(#${a})`;o(this,fe,Ce).set(e,l),o(this,fe,Ce).set(r,l);const c=A(this,es,pa).call(this,a);return A(this,md,yb).call(this,c),e&&A(this,Ll,Fg).call(this,i,c),l}addHighlightHCMFilter(e,n,i,r,a){var P;const l=`${n}-${i}-${r}-${a}`;let c=o(this,Qi,da).get(e);if((c==null?void 0:c.key)===l||(c?((P=c.filter)==null||P.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},o(this,Qi,da).set(e,c)),!n||!i))return c.url;const[u,h]=[n,i].map(A(this,Gs,ol).bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[v,y]=[r,a].map(A(this,Gs,ol).bind(this));g<f&&([f,g,v,y]=[g,f,y,v]),o(this,ts,fa).style.color="";const E=(L,k,F)=>{const I=new Array(256),M=(g-f)/F,S=L/255,T=(k-L)/(255*F);let D=0;for(let B=0;B<=F;B++){const U=Math.round(f+B*M),V=S+B*T;for(let G=D;G<=U;G++)I[G]=V;D=U+1}for(let B=D;B<256;B++)I[B]=I[D-1];return I.join(",")},C=`g_${o(this,di)}_hcm_${e}_filter`,_=c.filter=A(this,es,pa).call(this,C);return A(this,Rl,Mg).call(this,_),A(this,Vs,al).call(this,E(v[0],y[0],5),E(v[1],y[1],5),E(v[2],y[2],5),_),c.url=`url(#${C})`,c.url}destroy(e=!1){e&&o(this,Qi,da).size!==0||(o(this,Dn)&&(o(this,Dn).parentNode.parentNode.remove(),w(this,Dn,null)),o(this,Hs)&&(o(this,Hs).clear(),w(this,Hs,null)),w(this,Us,0))}}Hs=new WeakMap,Dn=new WeakMap,di=new WeakMap,je=new WeakMap,gd=new WeakMap,Us=new WeakMap,fe=new WeakSet,Ce=function(){return o(this,Hs)||w(this,Hs,new Map)},Qi=new WeakSet,da=function(){return o(this,gd)||w(this,gd,new Map)},ts=new WeakSet,fa=function(){if(!o(this,Dn)){const e=o(this,je).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=o(this,je).createElementNS(ai,"svg");i.setAttribute("width",0),i.setAttribute("height",0),w(this,Dn,o(this,je).createElementNS(ai,"defs")),e.append(i),i.append(o(this,Dn)),o(this,je).body.append(e)}return o(this,Dn)},Ta=new WeakSet,Tu=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let g=0;g<256;g++)h[g]=u[g]/255;const f=h.join(",");return[f,f,f]}const[n,i,r]=e,a=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)a[u]=n[u]/255,l[u]=i[u]/255,c[u]=r[u]/255;return[a.join(","),l.join(","),c.join(",")]},md=new WeakSet,yb=function(e){const n=o(this,je).createElementNS(ai,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Rl=new WeakSet,Mg=function(e){const n=o(this,je).createElementNS(ai,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},es=new WeakSet,pa=function(e){const n=o(this,je).createElementNS(ai,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),o(this,ts,fa).append(n),n},zs=new WeakSet,rl=function(e,n,i){const r=o(this,je).createElementNS(ai,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},Vs=new WeakSet,al=function(e,n,i,r){const a=o(this,je).createElementNS(ai,"feComponentTransfer");r.append(a),A(this,zs,rl).call(this,a,"feFuncR",e),A(this,zs,rl).call(this,a,"feFuncG",n),A(this,zs,rl).call(this,a,"feFuncB",i)},Ll=new WeakSet,Fg=function(e,n){const i=o(this,je).createElementNS(ai,"feComponentTransfer");n.append(i),A(this,zs,rl).call(this,i,"feFuncA",e)},Gs=new WeakSet,ol=function(e){return o(this,ts,fa).style.color=e,b0(getComputedStyle(o(this,ts,fa)).getPropertyValue("color"))};class LR extends ad{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}={}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}async function Ap(s,t="text"){if(ll(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class bb extends bp{_fetchData(t,e){return Ap(t,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):vp(n),compressionType:e}))}}class wb extends wp{_fetchData(t){return Ap(t,"arraybuffer").then(e=>new Uint8Array(e))}}class g0 extends p0{_createSVG(t){return document.createElementNS(ai,t)}}class Kh{constructor({viewBox:t,scale:e,rotation:n,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=i,this.offsetY=r;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let u,h,f,g;switch(n%=360,n<0&&(n+=360),n){case 180:u=-1,h=0,f=0,g=1;break;case 90:u=0,h=1,f=1,g=0;break;case 270:u=0,h=-1,f=-1,g=0;break;case 0:u=1,h=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,g=-g);let v,y,E,C;u===0?(v=Math.abs(c-t[1])*e+i,y=Math.abs(l-t[0])*e+r,E=(t[3]-t[1])*e,C=(t[2]-t[0])*e):(v=Math.abs(l-t[0])*e+i,y=Math.abs(c-t[1])*e+r,E=(t[2]-t[0])*e,C=(t[3]-t[1])*e),this.transform=[u*e,h*e,f*e,g*e,v-u*e*l-f*e*c,y-h*e*l-g*e*c],this.width=E,this.height=C}get rawDims(){const{viewBox:t}=this;return Ct(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Kh({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return J.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=J.applyTransform([t[0],t[1]],this.transform),n=J.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return J.applyInverseTransform([t,e],this.transform)}}class m0 extends Rs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function v0(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function y0(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function kR(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function IR(s,t="document.pdf"){if(typeof s!="string")return t;if(v0(s))return yt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(s);let r=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class vv{constructor(){gt(this,"started",Object.create(null));gt(this,"times",[])}time(t){t in this.started&&yt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||yt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-i}ms
`);return t.join("")}}function ll(s,t){try{const{protocol:e}=t?new URL(s,t):new URL(s);return e==="http:"||e==="https:"}catch{return!1}}function Ge(s){s.preventDefault()}function Ab(s){console.log("Deprecated API usage: "+s)}let yv;class Eb{static toDateObject(t){if(!t||typeof t!="string")return null;yv||(yv=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=yv.exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(e[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(a+=h,l+=f):u==="+"&&(a-=h,l-=f),new Date(Date.UTC(n,i,r,a,l,c))}}function MR(s,{scale:t=1,rotation:e=0}){const{width:n,height:i}=s.attributes.style,r=[0,0,parseInt(n),parseInt(i)];return new Kh({viewBox:r,scale:t,rotation:e})}function b0(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(yt(`Not a valid color format: "${s}"`),[0,0,0])}function FR(s){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,b0(n))}t.remove()}function zt(s){const{a:t,b:e,c:n,d:i,e:r,f:a}=s.getTransform();return[t,e,n,i,r,a]}function ri(s){const{a:t,b:e,c:n,d:i,e:r,f:a}=s.getTransform().invertSelf();return[t,e,n,i,r,a]}function Qr(s,t,e=!1,n=!0){if(t instanceof Kh){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:a}=s,l=Ve.isCSSRoundSupported,c=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${r}px`,h=l?`round(${c}, 1px)`:`calc(${c})`,f=l?`round(${u}, 1px)`:`calc(${u})`;!e||t.rotation%180===0?(a.width=h,a.height=f):(a.width=f,a.height=h)}n&&s.setAttribute("data-main-rotation",t.rotation)}var Ws,qs,Ye,Xs,vd,_b,yd,xb,bd,Sb,Pa,Pu,wd,Cb,kl,Og;const Ad=class Ad{constructor(t){m(this,yd);m(this,bd);m(this,Pa);m(this,wd);m(this,kl);m(this,Ws,null);m(this,qs,null);m(this,Ye,void 0);m(this,Xs,null);w(this,Ye,t)}render(){const t=w(this,Ws,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=o(this,Ye)._uiManager._signal;t.addEventListener("contextmenu",Ge,{signal:e}),t.addEventListener("pointerdown",A(Ad,vd,_b),{signal:e});const n=w(this,Xs,document.createElement("div"));n.className="buttons",t.append(n);const i=o(this,Ye).toolbarPosition;if(i){const{style:r}=t,a=o(this,Ye)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,wd,Cb).call(this),t}hide(){var t;o(this,Ws).classList.add("hidden"),(t=o(this,qs))==null||t.hideDropdown()}show(){o(this,Ws).classList.remove("hidden")}addAltTextButton(t){A(this,Pa,Pu).call(this,t),o(this,Xs).prepend(t,o(this,kl,Og))}addColorPicker(t){w(this,qs,t);const e=t.renderButton();A(this,Pa,Pu).call(this,e),o(this,Xs).prepend(e,o(this,kl,Og))}remove(){var t;o(this,Ws).remove(),(t=o(this,qs))==null||t.destroy(),w(this,qs,null)}};Ws=new WeakMap,qs=new WeakMap,Ye=new WeakMap,Xs=new WeakMap,vd=new WeakSet,_b=function(t){t.stopPropagation()},yd=new WeakSet,xb=function(t){o(this,Ye)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},bd=new WeakSet,Sb=function(t){o(this,Ye)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},Pa=new WeakSet,Pu=function(t){const e=o(this,Ye)._uiManager._signal;t.addEventListener("focusin",A(this,yd,xb).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",A(this,bd,Sb).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ge,{signal:e})},wd=new WeakSet,Cb=function(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${o(this,Ye).editorType}-button`),A(this,Pa,Pu).call(this,t),t.addEventListener("click",e=>{o(this,Ye)._uiManager.delete()},{signal:o(this,Ye)._uiManager._signal}),o(this,Xs).append(t)},kl=new WeakSet,Og=function(){const t=document.createElement("div");return t.className="divider",t},m(Ad,vd);let Dg=Ad;var Il,Ys,Ks,Ed,Tb,_d,Pb,xd,Rb;class DR{constructor(t){m(this,Ed);m(this,_d);m(this,xd);m(this,Il,null);m(this,Ys,null);m(this,Ks,void 0);w(this,Ks,t)}show(t,e,n){const[i,r]=A(this,_d,Pb).call(this,e,n),{style:a}=o(this,Ys)||w(this,Ys,A(this,Ed,Tb).call(this));t.append(o(this,Ys)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,Ys).remove()}}Il=new WeakMap,Ys=new WeakMap,Ks=new WeakMap,Ed=new WeakSet,Tb=function(){const t=w(this,Ys,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ge,{signal:o(this,Ks)._signal});const e=w(this,Il,document.createElement("div"));return e.className="buttons",t.append(e),A(this,xd,Rb).call(this),t},_d=new WeakSet,Pb=function(t,e){let n=0,i=0;for(const r of t){const a=r.y+r.height;if(a<n)continue;const l=r.x+(e?r.width:0);if(a>n){i=l,n=a;continue}e?l>i&&(i=l):l<i&&(i=l)}return[e?1-i:i,n]},xd=new WeakSet,Rb=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=o(this,Ks)._signal;t.addEventListener("contextmenu",Ge,{signal:n}),t.addEventListener("click",()=>{o(this,Ks).highlightSelection("floating_button")},{signal:n}),o(this,Il).append(t)};function od(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}function OR(s){return Math.round(Math.min(255,Math.max(1,255*s))).toString(16).padStart(2,"0")}var Sd;class NR{constructor(){m(this,Sd,0)}get id(){return`${gR}${We(this,Sd)._++}`}}Sd=new WeakMap;var Ml,Cd,ln,Fl,Bg;const S0=class S0{constructor(){m(this,Fl);m(this,Ml,PR());m(this,Cd,0);m(this,ln,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ct(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return A(this,Fl,Bg).call(this,`${e}_${n}_${i}_${r}`,t)}async getFromUrl(t){return A(this,Fl,Bg).call(this,t,t)}async getFromId(t){o(this,ln)||w(this,ln,new Map);const e=o(this,ln).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=o(this,ln).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){o(this,ln)||w(this,ln,new Map);const e=o(this,ln).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${o(this,Ml)}_`)}};Ml=new WeakMap,Cd=new WeakMap,ln=new WeakMap,Fl=new WeakSet,Bg=async function(t,e){o(this,ln)||w(this,ln,new Map);let n=o(this,ln).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${o(this,Ml)}_${We(this,Cd)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await Ap(e,"blob")):i=n.file=e,i.type==="image/svg+xml"){const r=S0._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,u()},a.onload=async()=>{const f=n.svgUrl=a.result;l.src=await r?`${f}#svgView(preserveAspectRatio(none))`:f},l.onerror=a.onerror=h});a.readAsDataURL(i),await c}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){console.error(i),n=null}return o(this,ln).set(t,n),n&&o(this,ln).set(n.id,n),n};let Ng=S0;var pe,ns,Dl,ge;class BR{constructor(t=128){m(this,pe,[]);m(this,ns,!1);m(this,Dl,void 0);m(this,ge,-1);w(this,Dl,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(i&&t(),o(this,ns))return;const c={cmd:t,undo:e,post:n,type:r};if(o(this,ge)===-1){o(this,pe).length>0&&(o(this,pe).length=0),w(this,ge,0),o(this,pe).push(c);return}if(a&&o(this,pe)[o(this,ge)].type===r){l&&(c.undo=o(this,pe)[o(this,ge)].undo),o(this,pe)[o(this,ge)]=c;return}const u=o(this,ge)+1;u===o(this,Dl)?o(this,pe).splice(0,1):(w(this,ge,u),u<o(this,pe).length&&o(this,pe).splice(u)),o(this,pe).push(c)}undo(){if(o(this,ge)===-1)return;w(this,ns,!0);const{undo:t,post:e}=o(this,pe)[o(this,ge)];t(),e==null||e(),w(this,ns,!1),w(this,ge,o(this,ge)-1)}redo(){if(o(this,ge)<o(this,pe).length-1){w(this,ge,o(this,ge)+1),w(this,ns,!0);const{cmd:t,post:e}=o(this,pe)[o(this,ge)];t(),e==null||e(),w(this,ns,!1)}}hasSomethingToUndo(){return o(this,ge)!==-1}hasSomethingToRedo(){return o(this,ge)<o(this,pe).length-1}destroy(){w(this,pe,null)}}pe=new WeakMap,ns=new WeakMap,Dl=new WeakMap,ge=new WeakMap;var Td,Lb;class Zh{constructor(t){m(this,Td);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ve.platform;for(const[n,i,r={}]of t)for(const a of n){const l=a.startsWith("mac+");e&&l?(this.callbacks.set(a.slice(4),{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!l&&(this.callbacks.set(a,{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(A(this,Td,Lb).call(this,e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:a=[],checker:l=null}}=n;l&&!l(t,e)||(i.bind(t,...a,e)(),r||(e.stopPropagation(),e.preventDefault()))}}Td=new WeakSet,Lb=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Pd=class Pd{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return FR(t),Ct(this,"_colors",t)}convert(t){const e=b0(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((r,a)=>r===e[a]))return Pd._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?J.makeHexColor(...e):t}};gt(Pd,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let $g=Pd;var Ra,Ke,re,ye,La,fi,ka,mn,Ia,Zs,On,vn,Js,Ol,Nl,Nn,Ma,is,Bn,Rd,ss,Bl,Qs,$l,Fa,be,kt,pi,tr,jl,Hl,Ul,zl,Vl,Gl,Wl,ql,Xl,Yl,Kl,Zl,Jl,rs,$n,gi,Ql,Da,Ru,Ld,kb,kd,Ib,Oa,Lu,Id,Mb,Md,Fb,Fd,Db,tc,jg,Dd,Ob,ec,Hg,nc,Ug,Od,Nb,we,Fe,jn,Xi,Nd,Bb,Bd,$b,ic,zg,$d,jb,er,cl,sc,Vg;const wa=class wa{constructor(t,e,n,i,r,a,l,c,u){m(this,Da);m(this,Ld);m(this,kd);m(this,Oa);m(this,Id);m(this,Md);m(this,Fd);m(this,tc);m(this,Dd);m(this,ec);m(this,nc);m(this,Od);m(this,we);m(this,jn);m(this,Nd);m(this,Bd);m(this,ic);m(this,$d);m(this,er);m(this,sc);m(this,Ra,new AbortController);m(this,Ke,null);m(this,re,new Map);m(this,ye,new Map);m(this,La,null);m(this,fi,null);m(this,ka,null);m(this,mn,new BR);m(this,Ia,0);m(this,Zs,new Set);m(this,On,null);m(this,vn,null);m(this,Js,new Set);m(this,Ol,!1);m(this,Nl,null);m(this,Nn,null);m(this,Ma,null);m(this,is,!1);m(this,Bn,null);m(this,Rd,new NR);m(this,ss,!1);m(this,Bl,!1);m(this,Qs,null);m(this,$l,null);m(this,Fa,null);m(this,be,xt.NONE);m(this,kt,new Set);m(this,pi,null);m(this,tr,null);m(this,jl,null);m(this,Hl,this.blur.bind(this));m(this,Ul,this.focus.bind(this));m(this,zl,this.copy.bind(this));m(this,Vl,this.cut.bind(this));m(this,Gl,this.paste.bind(this));m(this,Wl,this.keydown.bind(this));m(this,ql,this.keyup.bind(this));m(this,Xl,this.onEditingAction.bind(this));m(this,Yl,this.onPageChanging.bind(this));m(this,Kl,this.onScaleChanging.bind(this));m(this,Zl,this.onRotationChanging.bind(this));m(this,Jl,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});m(this,rs,[0,0]);m(this,$n,null);m(this,gi,null);m(this,Ql,null);this._signal=o(this,Ra).signal,w(this,gi,t),w(this,Ql,e),w(this,La,n),this._eventBus=i,this._eventBus._on("editingaction",o(this,Xl)),this._eventBus._on("pagechanging",o(this,Yl)),this._eventBus._on("scalechanging",o(this,Kl)),this._eventBus._on("rotationchanging",o(this,Zl)),A(this,Id,Mb).call(this),A(this,Od,Nb).call(this),A(this,tc,jg).call(this),w(this,fi,r.annotationStorage),w(this,Nl,r.filterFactory),w(this,tr,a),w(this,Ma,l||null),w(this,Ol,c),w(this,Fa,u||null),this.viewParameters={realScale:Cs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=wa.prototype,e=a=>o(a,gi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new Zh([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,gi).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,gi).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n;(t=o(this,Ra))==null||t.abort(),w(this,Ra,null),this._signal=null,this._eventBus._off("editingaction",o(this,Xl)),this._eventBus._off("pagechanging",o(this,Yl)),this._eventBus._off("scalechanging",o(this,Kl)),this._eventBus._off("rotationchanging",o(this,Zl));for(const i of o(this,ye).values())i.destroy();o(this,ye).clear(),o(this,re).clear(),o(this,Js).clear(),w(this,Ke,null),o(this,kt).clear(),o(this,mn).destroy(),(e=o(this,La))==null||e.destroy(),(n=o(this,Bn))==null||n.hide(),w(this,Bn,null),o(this,Nn)&&(clearTimeout(o(this,Nn)),w(this,Nn,null)),o(this,$n)&&(clearTimeout(o(this,$n)),w(this,$n,null))}async mlGuess(t){var e;return((e=o(this,Fa))==null?void 0:e.guess(t))||null}get hasMLManager(){return!!o(this,Fa)}get hcmFilter(){return Ct(this,"hcmFilter",o(this,tr)?o(this,Nl).addHCMFilter(o(this,tr).foreground,o(this,tr).background):"none")}get direction(){return Ct(this,"direction",getComputedStyle(o(this,gi)).direction)}get highlightColors(){return Ct(this,"highlightColors",o(this,Ma)?new Map(o(this,Ma).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Ct(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){w(this,$l,t)}editAltText(t){var e;(e=o(this,La))==null||e.editAltText(this,t)}onPageChanging({pageNumber:t}){w(this,Ia,t-1)}focusMainContainer(){o(this,gi).focus()}findParent(t,e){for(const n of o(this,ye).values()){const{x:i,y:r,width:a,height:l}=n.div.getBoundingClientRect();if(t>=i&&t<=i+a&&e>=r&&e<=r+l)return n}return null}disableUserSelect(t=!1){o(this,Ql).classList.toggle("noUserSelect",t)}addShouldRescale(t){o(this,Js).add(t)}removeShouldRescale(t){o(this,Js).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Cs.PDF_TO_CSS_UNITS;for(const e of o(this,Js))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:a}=e,l=e.toString(),u=A(this,Da,Ru).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(u);if(h){e.empty(),o(this,be)===xt.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:xt.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const f of o(this,ye).values())if(f.hasTextLayer(u)){f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:a,text:l});break}}}addToAnnotationStorage(t){!t.isEmpty()&&o(this,fi)&&!o(this,fi).has(t.id)&&o(this,fi).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,o(this,is)&&(w(this,is,!1),A(this,Oa,Lu).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of o(this,kt))if(e.div.contains(t)){w(this,Qs,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!o(this,Qs))return;const[t,e]=o(this,Qs);w(this,Qs,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){A(this,tc,jg).call(this),A(this,ec,Hg).call(this)}removeEditListeners(){A(this,Dd,Ob).call(this),A(this,nc,Ug).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of o(this,vn))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of o(this,vn))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=o(this,Ke))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of o(this,kt)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of o(this,vn))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){yt(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of n){const u=i.deserialize(c);if(!u)return;r.push(u)}const a=()=>{for(const c of r)A(this,ic,zg).call(this,c);A(this,sc,Vg).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(r){yt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,be)!==xt.NONE&&!this.isEditorHandlingKeyboard&&wa._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,is)&&(w(this,is,!1),A(this,Oa,Lu).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(A(this,Md,Fb).call(this),A(this,ec,Hg).call(this),A(this,we,Fe).call(this,{isEditing:o(this,be)!==xt.NONE,isEmpty:A(this,er,cl).call(this),hasSomethingToUndo:o(this,mn).hasSomethingToUndo(),hasSomethingToRedo:o(this,mn).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,Fd,Db).call(this),A(this,nc,Ug).call(this),A(this,we,Fe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!o(this,vn)){w(this,vn,t);for(const e of o(this,vn))A(this,jn,Xi).call(this,e.defaultPropertiesToUpdate)}}getId(){return o(this,Rd).id}get currentLayer(){return o(this,ye).get(o(this,Ia))}getLayer(t){return o(this,ye).get(t)}get currentPageIndex(){return o(this,Ia)}addLayer(t){o(this,ye).set(t.pageIndex,t),o(this,ss)?t.enable():t.disable()}removeLayer(t){o(this,ye).delete(t.pageIndex)}updateMode(t,e=null,n=!1){if(o(this,be)!==t){if(w(this,be,t),t===xt.NONE){this.setEditingState(!1),A(this,Bd,$b).call(this);return}this.setEditingState(!0),A(this,Nd,Bb).call(this),this.unselectAll();for(const i of o(this,ye).values())i.updateMode(t);if(!e&&n){this.addNewEditorFromKeyboard();return}if(e){for(const i of o(this,re).values())if(i.annotationElementId===e){this.setSelected(i),i.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==o(this,be)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(o(this,vn)){switch(t){case ut.CREATE:this.currentLayer.addNewEditor();return;case ut.HIGHLIGHT_DEFAULT_COLOR:(n=o(this,$l))==null||n.updateColor(e);break;case ut.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,jl)||w(this,jl,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of o(this,kt))i.updateParams(t,e);for(const i of o(this,vn))i.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const a of o(this,re).values())a.editorType===t&&a.show(e);(((r=o(this,jl))==null?void 0:r.get(ut.HIGHLIGHT_SHOW_ALL))??!0)!==e&&A(this,jn,Xi).call(this,[[ut.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(o(this,Bl)!==t){w(this,Bl,t);for(const e of o(this,ye).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of o(this,re).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return o(this,re).get(t)}addEditor(t){o(this,re).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(o(this,Nn)&&clearTimeout(o(this,Nn)),w(this,Nn,setTimeout(()=>{this.focusMainContainer(),w(this,Nn,null)},0))),o(this,re).delete(t.id),this.unselect(t),(!t.annotationElementId||!o(this,Zs).has(t.annotationElementId))&&((e=o(this,fi))==null||e.remove(t.id))}addDeletedAnnotationElement(t){o(this,Zs).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return o(this,Zs).has(t)}removeDeletedAnnotationElement(t){o(this,Zs).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){o(this,Ke)!==t&&(w(this,Ke,t),t&&A(this,jn,Xi).call(this,t.propertiesToUpdate))}updateUI(t){o(this,$d,jb)===t&&A(this,jn,Xi).call(this,t.propertiesToUpdate)}toggleSelected(t){if(o(this,kt).has(t)){o(this,kt).delete(t),t.unselect(),A(this,we,Fe).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,kt).add(t),t.select(),A(this,jn,Xi).call(this,t.propertiesToUpdate),A(this,we,Fe).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of o(this,kt))e!==t&&e.unselect();o(this,kt).clear(),o(this,kt).add(t),t.select(),A(this,jn,Xi).call(this,t.propertiesToUpdate),A(this,we,Fe).call(this,{hasSelectedEditor:!0})}isSelected(t){return o(this,kt).has(t)}get firstSelectedEditor(){return o(this,kt).values().next().value}unselect(t){t.unselect(),o(this,kt).delete(t),A(this,we,Fe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,kt).size!==0}get isEnterHandled(){return o(this,kt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){o(this,mn).undo(),A(this,we,Fe).call(this,{hasSomethingToUndo:o(this,mn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,er,cl).call(this)})}redo(){o(this,mn).redo(),A(this,we,Fe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,mn).hasSomethingToRedo(),isEmpty:A(this,er,cl).call(this)})}addCommands(t){o(this,mn).add(t),A(this,we,Fe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,er,cl).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...o(this,kt)],e=()=>{for(const i of t)i.remove()},n=()=>{for(const i of t)A(this,ic,zg).call(this,i)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=o(this,Ke))==null||t.commitOrRemove()}hasSomethingToControl(){return o(this,Ke)||this.hasSelection}selectAll(){for(const t of o(this,kt))t.commit();A(this,sc,Vg).call(this,o(this,re).values())}unselectAll(){if(!(o(this,Ke)&&(o(this,Ke).commitOrRemove(),o(this,be)!==xt.NONE))&&this.hasSelection){for(const t of o(this,kt))t.unselect();o(this,kt).clear(),A(this,we,Fe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;o(this,rs)[0]+=t,o(this,rs)[1]+=e;const[i,r]=o(this,rs),a=[...o(this,kt)],l=1e3;o(this,$n)&&clearTimeout(o(this,$n)),w(this,$n,setTimeout(()=>{w(this,$n,null),o(this,rs)[0]=o(this,rs)[1]=0,this.addCommands({cmd:()=>{for(const c of a)o(this,re).has(c.id)&&c.translateInPage(i,r)},undo:()=>{for(const c of a)o(this,re).has(c.id)&&c.translateInPage(-i,-r)},mustExec:!1})},l));for(const c of a)c.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),w(this,On,new Map);for(const t of o(this,kt))o(this,On).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,On))return!1;this.disableUserSelect(!1);const t=o(this,On);w(this,On,null);let e=!1;for(const[{x:i,y:r,pageIndex:a},l]of t)l.newX=i,l.newY=r,l.newPageIndex=a,e||(e=i!==l.savedX||r!==l.savedY||a!==l.savedPageIndex);if(!e)return!1;const n=(i,r,a,l)=>{if(o(this,re).has(i.id)){const c=o(this,ye).get(l);c?i._setParentAndPosition(c,r,a):(i.pageIndex=l,i.x=r,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:a,newPageIndex:l}]of t)n(i,r,a,l)},undo:()=>{for(const[i,{savedX:r,savedY:a,savedPageIndex:l}]of t)n(i,r,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(o(this,On))for(const n of o(this,On).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||o(this,kt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return o(this,Ke)===t}getActive(){return o(this,Ke)}getMode(){return o(this,be)}get imageManager(){return Ct(this,"imageManager",new Ng)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:a}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,h,f,g)=>({x:(h-i)/a,y:1-(u+f-n)/r,width:g/a,height:f/r});break;case"180":l=(u,h,f,g)=>({x:1-(u+f-n)/r,y:1-(h+g-i)/a,width:f/r,height:g/a});break;case"270":l=(u,h,f,g)=>({x:1-(h+g-i)/a,y:(u-n)/r,width:g/a,height:f/r});break;default:l=(u,h,f,g)=>({x:(u-n)/r,y:(h-i)/a,width:f/r,height:g/a});break}const c=[];for(let u=0,h=e.rangeCount;u<h;u++){const f=e.getRangeAt(u);if(!f.collapsed)for(const{x:g,y:v,width:y,height:E}of f.getClientRects())y===0||E===0||c.push(l(g,v,y,E))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(o(this,ka)||w(this,ka,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=o(this,ka))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=o(this,ka))==null?void 0:i.get(t.data.id);if(!e)return;const n=o(this,fi).getRawValue(e);n&&(o(this,be)===xt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};Ra=new WeakMap,Ke=new WeakMap,re=new WeakMap,ye=new WeakMap,La=new WeakMap,fi=new WeakMap,ka=new WeakMap,mn=new WeakMap,Ia=new WeakMap,Zs=new WeakMap,On=new WeakMap,vn=new WeakMap,Js=new WeakMap,Ol=new WeakMap,Nl=new WeakMap,Nn=new WeakMap,Ma=new WeakMap,is=new WeakMap,Bn=new WeakMap,Rd=new WeakMap,ss=new WeakMap,Bl=new WeakMap,Qs=new WeakMap,$l=new WeakMap,Fa=new WeakMap,be=new WeakMap,kt=new WeakMap,pi=new WeakMap,tr=new WeakMap,jl=new WeakMap,Hl=new WeakMap,Ul=new WeakMap,zl=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,Wl=new WeakMap,ql=new WeakMap,Xl=new WeakMap,Yl=new WeakMap,Kl=new WeakMap,Zl=new WeakMap,Jl=new WeakMap,rs=new WeakMap,$n=new WeakMap,gi=new WeakMap,Ql=new WeakMap,Da=new WeakSet,Ru=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Ld=new WeakSet,kb=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=A(this,Da,Ru).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(o(this,Bn)||w(this,Bn,new DR(this)),o(this,Bn).show(n,i,this.direction==="ltr"))},kd=new WeakSet,Ib=function(){var r,a,l;const t=document.getSelection();if(!t||t.isCollapsed){o(this,pi)&&((r=o(this,Bn))==null||r.hide(),w(this,pi,null),A(this,we,Fe).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===o(this,pi))return;if(!A(this,Da,Ru).call(this,t).closest(".textLayer")){o(this,pi)&&((a=o(this,Bn))==null||a.hide(),w(this,pi,null),A(this,we,Fe).call(this,{hasSelectedText:!1}));return}if((l=o(this,Bn))==null||l.hide(),w(this,pi,e),A(this,we,Fe).call(this,{hasSelectedText:!0}),!(o(this,be)!==xt.HIGHLIGHT&&o(this,be)!==xt.NONE)&&(o(this,be)===xt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),w(this,is,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=this._signal,u=h=>{h.type==="pointerup"&&h.button!==0||(window.removeEventListener("pointerup",u),window.removeEventListener("blur",u),h.type==="pointerup"&&A(this,Oa,Lu).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:c}),window.addEventListener("blur",u,{signal:c})}},Oa=new WeakSet,Lu=function(t=""){o(this,be)===xt.HIGHLIGHT?this.highlightSelection(t):o(this,Ol)&&A(this,Ld,kb).call(this)},Id=new WeakSet,Mb=function(){document.addEventListener("selectionchange",A(this,kd,Ib).bind(this),{signal:this._signal})},Md=new WeakSet,Fb=function(){const t=this._signal;window.addEventListener("focus",o(this,Ul),{signal:t}),window.addEventListener("blur",o(this,Hl),{signal:t})},Fd=new WeakSet,Db=function(){window.removeEventListener("focus",o(this,Ul)),window.removeEventListener("blur",o(this,Hl))},tc=new WeakSet,jg=function(){const t=this._signal;window.addEventListener("keydown",o(this,Wl),{signal:t}),window.addEventListener("keyup",o(this,ql),{signal:t})},Dd=new WeakSet,Ob=function(){window.removeEventListener("keydown",o(this,Wl)),window.removeEventListener("keyup",o(this,ql))},ec=new WeakSet,Hg=function(){const t=this._signal;document.addEventListener("copy",o(this,zl),{signal:t}),document.addEventListener("cut",o(this,Vl),{signal:t}),document.addEventListener("paste",o(this,Gl),{signal:t})},nc=new WeakSet,Ug=function(){document.removeEventListener("copy",o(this,zl)),document.removeEventListener("cut",o(this,Vl)),document.removeEventListener("paste",o(this,Gl))},Od=new WeakSet,Nb=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},we=new WeakSet,Fe=function(t){Object.entries(t).some(([n,i])=>o(this,Jl)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,Jl),t)}),o(this,be)===xt.HIGHLIGHT&&t.hasSelectedEditor===!1&&A(this,jn,Xi).call(this,[[ut.HIGHLIGHT_FREE,!0]]))},jn=new WeakSet,Xi=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Nd=new WeakSet,Bb=function(){if(!o(this,ss)){w(this,ss,!0);for(const t of o(this,ye).values())t.enable();for(const t of o(this,re).values())t.enable()}},Bd=new WeakSet,$b=function(){if(this.unselectAll(),o(this,ss)){w(this,ss,!1);for(const t of o(this,ye).values())t.disable();for(const t of o(this,re).values())t.disable()}},ic=new WeakSet,zg=function(t){const e=o(this,ye).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},$d=new WeakSet,jb=function(){let t=null;for(t of o(this,kt));return t},er=new WeakSet,cl=function(){if(o(this,re).size===0)return!0;if(o(this,re).size===1)for(const t of o(this,re).values())return t.isEmpty();return!1},sc=new WeakSet,Vg=function(t){for(const e of o(this,kt))e.unselect();o(this,kt).clear();for(const e of t)e.isEmpty()||(o(this,kt).add(e),e.select());A(this,we,Fe).call(this,{hasSelectedEditor:this.hasSelection})},gt(wa,"TRANSLATE_SMALL",1),gt(wa,"TRANSLATE_BIG",10);let ta=wa;var mi,vi,yn,yi,Ze,Na,bn,rc,Gg;const li=class li{constructor(t){m(this,rc);m(this,mi,"");m(this,vi,!1);m(this,yn,null);m(this,yi,null);m(this,Ze,null);m(this,Na,!1);m(this,bn,null);w(this,bn,t)}static initialize(t){li._l10nPromise||(li._l10nPromise=t)}async render(){const t=w(this,yn,document.createElement("button"));t.className="altText";const e=await li._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const n=o(this,bn)._uiManager._signal;t.addEventListener("contextmenu",Ge,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),o(this,bn)._uiManager.editAltText(o(this,bn))};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(w(this,Na,!0),i(r))},{signal:n}),await A(this,rc,Gg).call(this),t}finish(){o(this,yn)&&(o(this,yn).focus({focusVisible:o(this,Na)}),w(this,Na,!1))}isEmpty(){return!o(this,mi)&&!o(this,vi)}get data(){return{altText:o(this,mi),decorative:o(this,vi)}}set data({altText:t,decorative:e}){o(this,mi)===t&&o(this,vi)===e||(w(this,mi,t),w(this,vi,e),A(this,rc,Gg).call(this))}toggle(t=!1){o(this,yn)&&(!t&&o(this,Ze)&&(clearTimeout(o(this,Ze)),w(this,Ze,null)),o(this,yn).disabled=!t)}destroy(){var t;(t=o(this,yn))==null||t.remove(),w(this,yn,null),w(this,yi,null)}};mi=new WeakMap,vi=new WeakMap,yn=new WeakMap,yi=new WeakMap,Ze=new WeakMap,Na=new WeakMap,bn=new WeakMap,rc=new WeakSet,Gg=async function(){var i;const t=o(this,yn);if(!t)return;if(!o(this,mi)&&!o(this,vi)){t.classList.remove("done"),(i=o(this,yi))==null||i.remove();return}t.classList.add("done"),li._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(r=>{t.setAttribute("aria-label",r)});let e=o(this,yi);if(!e){w(this,yi,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const r=e.id=`alt-text-tooltip-${o(this,bn).id}`;t.setAttribute("aria-describedby",r);const a=100,l=o(this,bn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(o(this,Ze)),w(this,Ze,null)},{once:!0}),t.addEventListener("mouseenter",()=>{w(this,Ze,setTimeout(()=>{w(this,Ze,null),o(this,yi).classList.add("show"),o(this,bn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),t.addEventListener("mouseleave",()=>{var c;o(this,Ze)&&(clearTimeout(o(this,Ze)),w(this,Ze,null)),(c=o(this,yi))==null||c.classList.remove("show")},{signal:l})}e.innerText=o(this,vi)?await li._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):o(this,mi),e.parentNode||t.append(e);const n=o(this,bn).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},gt(li,"_l10nPromise",null);let ld=li;var nr,wn,Te,Ba,ir,Ae,sr,$a,ja,Pe,ac,rr,as,oc,ar,bi,Hn,Ha,Ua,cn,lc,jd,cc,Wg,hc,qg,uc,Xg,Hd,Hb,Ud,Ub,dc,Yg,fc,Kg,pc,Zg,zd,zb,Vd,Vb,Gd,Gb,Wd,Wb,gc,Jg,or,hl;const Ot=class Ot{constructor(t){m(this,cc);m(this,uc);m(this,Hd);m(this,Ud);m(this,dc);m(this,fc);m(this,pc);m(this,zd);m(this,Vd);m(this,Gd);m(this,Wd);m(this,gc);m(this,or);m(this,nr,null);m(this,wn,null);m(this,Te,null);m(this,Ba,!1);m(this,ir,!1);m(this,Ae,null);m(this,sr,null);m(this,$a,this.focusin.bind(this));m(this,ja,this.focusout.bind(this));m(this,Pe,null);m(this,ac,"");m(this,rr,!1);m(this,as,null);m(this,oc,!1);m(this,ar,!1);m(this,bi,!1);m(this,Hn,null);m(this,Ha,0);m(this,Ua,0);m(this,cn,null);gt(this,"_initialOptions",Object.create(null));gt(this,"_isVisible",!0);gt(this,"_uiManager",null);gt(this,"_focusEventsAllowed",!0);gt(this,"_l10nPromise",null);m(this,lc,!1);m(this,jd,Ot._zIndex++);this.constructor===Ot&&Ft("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,a];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ot.prototype._resizeWithKeyboard,e=ta.TRANSLATE_SMALL,n=ta.TRANSLATE_BIG;return Ct(this,"_resizerKeyboardManager",new Zh([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Ot.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Ct(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new $R({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,n){if(Ot._l10nPromise||(Ot._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(r=>[r,t.get(r.replaceAll(/([A-Z])/g,a=>`-${a.toLowerCase()}`))]))),n!=null&&n.strings)for(const r of n.strings)Ot._l10nPromise.set(r,t.get(r));if(Ot._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Ot._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ft("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,lc)}set _isDraggable(t){var e;w(this,lc,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,jd)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):A(this,or,hl).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(o(this,rr)?w(this,rr,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,a]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/a,this.fixAndSetPosition()}translate(t,e){A(this,cc,Wg).call(this,this.parentDimensions,t,e)}translateInPage(t,e){o(this,as)||w(this,as,[this.x,this.y]),A(this,cc,Wg).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){o(this,as)||w(this,as,[this.x,this.y]);const[n,i]=this.parentDimensions;if(this.x+=t/n,this.y+=e/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[l,c]=this.getBaseTranslation();r+=l,a+=c,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!o(this,as)&&(o(this,as)[0]!==this.x||o(this,as)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Ot,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:i,y:r,width:a,height:l}=this;if(a*=e,l*=n,i*=e,r*=n,this._mustFixPosition)switch(t){case 0:i=Math.max(0,Math.min(e-a,i)),r=Math.max(0,Math.min(n-l,r));break;case 90:i=Math.max(0,Math.min(e-l,i)),r=Math.min(n,Math.max(a,r));break;case 180:i=Math.min(e,Math.max(a,i)),r=Math.min(n,Math.max(l,r));break;case 270:i=Math.min(e,Math.max(l,i)),r=Math.max(0,Math.min(n-a,r));break}this.x=i/=e,this.y=r/=n;const[c,u]=this.getBaseTranslation();i+=c,r+=u;const{style:h}=this.div;h.left=`${(100*i).toFixed(2)}%`,h.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return A(n=Ot,hc,qg).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return A(n=Ot,hc,qg).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this,i=e*t,r=n*t;return Ve.isCSSRoundSupported?[Math.round(i),Math.round(r)]:[i,r]}setDims(t,e){const[n,i]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,o(this,ir)||(this.div.style.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),r=!o(this,ir)&&e.endsWith("%");if(i&&r)return;const[a,l]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!o(this,ir)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=o(this,Te))==null||t.finish()}async addEditToolbar(){return o(this,Pe)||o(this,ar)?o(this,Pe):(w(this,Pe,new Dg(this)),this.div.append(o(this,Pe).render()),o(this,Te)&&o(this,Pe).addAltTextButton(await o(this,Te).render()),o(this,Pe))}removeEditToolbar(){var t;o(this,Pe)&&(o(this,Pe).remove(),w(this,Pe,null),(t=o(this,Te))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){o(this,Te)||(ld.initialize(Ot._l10nPromise),w(this,Te,new ld(this)),o(this,nr)&&(o(this,Te).data=o(this,nr),w(this,nr,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=o(this,Te))==null?void 0:t.data}set altTextData(t){o(this,Te)&&(o(this,Te).data=t)}hasAltText(){var t;return!((t=o(this,Te))!=null&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=o(this,Ba)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const t=this._uiManager._signal;this.div.addEventListener("focusin",o(this,$a),{signal:t}),this.div.addEventListener("focusout",o(this,ja),{signal:t});const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),od(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Ve.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(w(this,rr,!0),this._isDraggable){A(this,zd,zb).call(this,t);return}A(this,pc,Zg).call(this,t)}moveInDOM(){o(this,Hn)&&clearTimeout(o(this,Hn)),w(this,Hn,setTimeout(()=>{var t;w(this,Hn,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const i=this.parentScale,[r,a]=this.pageDimensions,[l,c]=this.pageTranslation,u=t/i,h=e/i,f=this.x*r,g=this.y*a,v=this.width*r,y=this.height*a;switch(n){case 0:return[f+u+l,a-g-h-y+c,f+u+v+l,a-g-h+c];case 90:return[f+h+l,a-g+u+c,f+h+y+l,a-g+u+v+c];case 180:return[f-u-v+l,a-g+h+c,f-u+l,a-g+h+y+c];case 270:return[f-h-y+l,a-g-u-v+c,f-h+l,a-g-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,a]=t,l=r-n,c=a-i;switch(this.rotation){case 0:return[n,e-a,l,c];case 90:return[n,e-i,c,l];case 180:return[r,e-i,l,c];case 270:return[r,e-a,c,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){w(this,ar,!0)}disableEditMode(){w(this,ar,!1)}isInEditMode(){return o(this,ar)}shouldGetKeyboardEvents(){return o(this,bi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,n;const t=this._uiManager._signal;(e=this.div)==null||e.addEventListener("focusin",o(this,$a),{signal:t}),(n=this.div)==null||n.addEventListener("focusout",o(this,ja),{signal:t})}rotate(t){}serialize(t=!1,e=null){Ft("An editor must be serializable")}static deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation,w(i,nr,t.accessibilityData);const[r,a]=i.pageDimensions,[l,c,u,h]=i.getRectInCurrentCoords(t.rect,a);return i.x=l/r,i.y=c/a,i.width=u/r,i.height=h/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",o(this,$a)),this.div.removeEventListener("focusout",o(this,ja)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),o(this,Hn)&&(clearTimeout(o(this,Hn)),w(this,Hn,null)),A(this,or,hl).call(this),this.removeEditToolbar(),o(this,cn)){for(const t of o(this,cn).values())clearTimeout(t);w(this,cn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,Hd,Hb).call(this),o(this,Ae).classList.remove("hidden"),od(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),w(this,sr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=o(this,Ae).children;if(!o(this,wn)){w(this,wn,Array.from(e));const a=A(this,Vd,Vb).bind(this),l=A(this,Gd,Gb).bind(this),c=this._uiManager._signal;for(const u of o(this,wn)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",A(this,Wd,Wb).bind(this,h),{signal:c}),Ot._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(f=>u.setAttribute("aria-label",f))}}const n=o(this,wn)[0];let i=0;for(const a of e){if(a===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(o(this,wn).length/4);if(r!==i){if(r<i)for(let l=0;l<i-r;l++)o(this,Ae).append(o(this,Ae).firstChild);else if(r>i)for(let l=0;l<r-i;l++)o(this,Ae).firstChild.before(o(this,Ae).lastChild);let a=0;for(const l of e){const u=o(this,wn)[a++].getAttribute("data-resizer-name");Ot._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(h=>l.setAttribute("aria-label",h))}}A(this,gc,Jg).call(this,0),w(this,bi,!0),o(this,Ae).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){o(this,bi)&&A(this,fc,Kg).call(this,o(this,ac),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){A(this,or,hl).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!o(this,Pe)){this.addEditToolbar().then(()=>{var n,i;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((i=o(this,Pe))==null||i.show())});return}(e=o(this,Pe))==null||e.show()}unselect(){var t,e,n,i;(t=o(this,Ae))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=o(this,Pe))==null||i.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return o(this,oc)}set isEditing(t){w(this,oc,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){w(this,ir,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){o(this,cn)||w(this,cn,new Map);const{action:n}=t;let i=o(this,cn).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),o(this,cn).delete(n),o(this,cn).size===0&&w(this,cn,null)},Ot._telemetryTimeout),o(this,cn).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),w(this,Ba,!1)}disable(){this.div&&(this.div.tabIndex=-1),w(this,Ba,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};nr=new WeakMap,wn=new WeakMap,Te=new WeakMap,Ba=new WeakMap,ir=new WeakMap,Ae=new WeakMap,sr=new WeakMap,$a=new WeakMap,ja=new WeakMap,Pe=new WeakMap,ac=new WeakMap,rr=new WeakMap,as=new WeakMap,oc=new WeakMap,ar=new WeakMap,bi=new WeakMap,Hn=new WeakMap,Ha=new WeakMap,Ua=new WeakMap,cn=new WeakMap,lc=new WeakMap,jd=new WeakMap,cc=new WeakSet,Wg=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this.fixAndSetPosition()},hc=new WeakSet,qg=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},uc=new WeakSet,Xg=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},Hd=new WeakSet,Hb=function(){if(o(this,Ae))return;w(this,Ae,document.createElement("div")),o(this,Ae).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");o(this,Ae).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",A(this,Ud,Ub).bind(this,n),{signal:e}),i.addEventListener("contextmenu",Ge,{signal:e}),i.tabIndex=-1}this.div.prepend(o(this,Ae))},Ud=new WeakSet,Ub=function(t,e){var E;e.preventDefault();const{isMac:n}=Ve.platform;if(e.button!==0||e.ctrlKey&&n)return;(E=o(this,Te))==null||E.toggle(!1);const i=A(this,fc,Kg).bind(this,t),r=this._isDraggable;this._isDraggable=!1;const a=this._uiManager._signal,l={passive:!0,capture:!0,signal:a};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",i,l),window.addEventListener("contextmenu",Ge,{signal:a});const c=this.x,u=this.y,h=this.width,f=this.height,g=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const y=()=>{var C;this.parent.togglePointerEvents(!0),(C=o(this,Te))==null||C.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",y),window.removeEventListener("blur",y),window.removeEventListener("pointermove",i,l),window.removeEventListener("contextmenu",Ge),this.parent.div.style.cursor=g,this.div.style.cursor=v,A(this,dc,Yg).call(this,c,u,h,f)};window.addEventListener("pointerup",y,{signal:a}),window.addEventListener("blur",y,{signal:a})},dc=new WeakSet,Yg=function(t,e,n,i){const r=this.x,a=this.y,l=this.width,c=this.height;r===t&&a===e&&l===n&&c===i||this.addCommands({cmd:()=>{this.width=l,this.height=c,this.x=r,this.y=a;const[u,h]=this.parentDimensions;this.setDims(u*l,h*c),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=i,this.x=t,this.y=e;const[u,h]=this.parentDimensions;this.setDims(u*n,h*i),this.fixAndSetPosition()},mustExec:!0})},fc=new WeakSet,Kg=function(t,e){const[n,i]=this.parentDimensions,r=this.x,a=this.y,l=this.width,c=this.height,u=Ot.MIN_SIZE/n,h=Ot.MIN_SIZE/i,f=$=>Math.round($*1e4)/1e4,g=A(this,uc,Xg).call(this,this.rotation),v=($,W)=>[g[0]*$+g[2]*W,g[1]*$+g[3]*W],y=A(this,uc,Xg).call(this,360-this.rotation),E=($,W)=>[y[0]*$+y[2]*W,y[1]*$+y[3]*W];let C,_,P=!1,L=!1;switch(t){case"topLeft":P=!0,C=($,W)=>[0,0],_=($,W)=>[$,W];break;case"topMiddle":C=($,W)=>[$/2,0],_=($,W)=>[$/2,W];break;case"topRight":P=!0,C=($,W)=>[$,0],_=($,W)=>[0,W];break;case"middleRight":L=!0,C=($,W)=>[$,W/2],_=($,W)=>[0,W/2];break;case"bottomRight":P=!0,C=($,W)=>[$,W],_=($,W)=>[0,0];break;case"bottomMiddle":C=($,W)=>[$/2,W],_=($,W)=>[$/2,0];break;case"bottomLeft":P=!0,C=($,W)=>[0,W],_=($,W)=>[$,0];break;case"middleLeft":L=!0,C=($,W)=>[0,W/2],_=($,W)=>[$,W/2];break}const k=C(l,c),F=_(l,c);let I=v(...F);const M=f(r+I[0]),S=f(a+I[1]);let T=1,D=1,[B,U]=this.screenToPageTranslation(e.movementX,e.movementY);if([B,U]=E(B/n,U/i),P){const $=Math.hypot(l,c);T=D=Math.max(Math.min(Math.hypot(F[0]-k[0]-B,F[1]-k[1]-U)/$,1/l,1/c),u/l,h/c)}else L?T=Math.max(u,Math.min(1,Math.abs(F[0]-k[0]-B)))/l:D=Math.max(h,Math.min(1,Math.abs(F[1]-k[1]-U)))/c;const V=f(l*T),G=f(c*D);I=v(..._(V,G));const Z=M-I[0],Y=S-I[1];this.width=V,this.height=G,this.x=Z,this.y=Y,this.setDims(n*V,i*G),this.fixAndSetPosition()},pc=new WeakSet,Zg=function(t){const{isMac:e}=Ve.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},zd=new WeakSet,zb=function(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let n,i;const r=this._uiManager._signal;e&&(this.div.classList.add("moving"),n={passive:!0,capture:!0,signal:r},w(this,Ha,t.clientX),w(this,Ua,t.clientY),i=l=>{const{clientX:c,clientY:u}=l,[h,f]=this.screenToPageTranslation(c-o(this,Ha),u-o(this,Ua));w(this,Ha,c),w(this,Ua,u),this._uiManager.dragSelectedEditors(h,f)},window.addEventListener("pointermove",i,n));const a=()=>{window.removeEventListener("pointerup",a),window.removeEventListener("blur",a),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",i,n)),w(this,rr,!1),this._uiManager.endDragSession()||A(this,pc,Zg).call(this,t)};window.addEventListener("pointerup",a,{signal:r}),window.addEventListener("blur",a,{signal:r})},Vd=new WeakSet,Vb=function(t){Ot._resizerKeyboardManager.exec(this,t)},Gd=new WeakSet,Gb=function(t){var e;o(this,bi)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==o(this,Ae)&&A(this,or,hl).call(this)},Wd=new WeakSet,Wb=function(t){w(this,ac,o(this,bi)?t:"")},gc=new WeakSet,Jg=function(t){if(o(this,wn))for(const e of o(this,wn))e.tabIndex=t},or=new WeakSet,hl=function(){if(w(this,bi,!1),A(this,gc,Jg).call(this,-1),o(this,sr)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=o(this,sr);A(this,dc,Yg).call(this,t,e,n,i),w(this,sr,null)}},m(Ot,hc),gt(Ot,"_borderLineWidth",-1),gt(Ot,"_colorManager",new $g),gt(Ot,"_zIndex",1),gt(Ot,"_telemetryTimeout",1e3);let It=Ot;class $R extends It{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const bv=3285377520,an=4294901760,In=65535;class qb{constructor(t){this.h1=t?t&4294967295:bv,this.h2=t?t&4294967295:bv}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let E=0,C=t.length;E<C;E++){const _=t.charCodeAt(E);_<=255?e[n++]=_:(e[n++]=_>>>8,e[n++]=_&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,r=n-i*4,a=new Uint32Array(e.buffer,0,i);let l=0,c=0,u=this.h1,h=this.h2;const f=3432918353,g=461845907,v=f&In,y=g&In;for(let E=0;E<i;E++)E&1?(l=a[E],l=l*f&an|l*v&In,l=l<<15|l>>>17,l=l*g&an|l*y&In,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=a[E],c=c*f&an|c*v&In,c=c<<15|c>>>17,c=c*g&an|c*y&In,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=e[i*4+2]<<16;case 2:l^=e[i*4+1]<<8;case 1:l^=e[i*4],l=l*f&an|l*v&In,l=l<<15|l>>>17,l=l*g&an|l*y&In,i&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&an|t*36045&In,e=e*4283543511&an|((e<<16|t>>>16)*2950163797&an)>>>16,t^=e>>>1,t=t*444984403&an|t*60499&In,e=e*3301882366&an|((e<<16|t>>>16)*3120437893&an)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Qg=Object.freeze({map:null,hash:"",transfer:void 0});var lr,Ee,qd,Xb;class w0{constructor(){m(this,qd);m(this,lr,!1);m(this,Ee,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=o(this,Ee).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return o(this,Ee).get(t)}remove(t){if(o(this,Ee).delete(t),o(this,Ee).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of o(this,Ee).values())if(e instanceof It)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=o(this,Ee).get(t);let i=!1;if(n!==void 0)for(const[r,a]of Object.entries(e))n[r]!==a&&(i=!0,n[r]=a);else i=!0,o(this,Ee).set(t,e);i&&A(this,qd,Xb).call(this),e instanceof It&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return o(this,Ee).has(t)}getAll(){return o(this,Ee).size>0?f0(o(this,Ee)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return o(this,Ee).size}resetModified(){o(this,lr)&&(w(this,lr,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Yb(this)}get serializable(){if(o(this,Ee).size===0)return Qg;const t=new Map,e=new qb,n=[],i=Object.create(null);let r=!1;for(const[a,l]of o(this,Ee)){const c=l instanceof It?l.serialize(!1,i):l;c&&(t.set(a,c),e.update(`${a}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const a of t.values())a.bitmap&&n.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Qg}get editorStats(){let t=null;const e=new Map;for(const n of o(this,Ee).values()){if(!(n instanceof It))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const a=t[r]||(t[r]=new Map);for(const[l,c]of Object.entries(i)){if(l==="type")continue;let u=a.get(l);u||(u=new Map,a.set(l,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[n,i]of e)t[n]=i.computeTelemetryFinalData(t[n]);return t}}lr=new WeakMap,Ee=new WeakMap,qd=new WeakSet,Xb=function(){o(this,lr)||(w(this,lr,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var mc;class Yb extends w0{constructor(e){super();m(this,mc,void 0);const{map:n,hash:i,transfer:r}=e.serializable,a=structuredClone(n,r?{transfer:r}:null);w(this,mc,{map:a,hash:i,transfer:r})}get print(){Ft("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,mc)}}mc=new WeakMap;var za;class jR{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){m(this,za,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),o(this,za).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||o(this,za).has(t.loadedName))){if(ce(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:r}=t,a=new FontFace(n,i,r);this.addNativeFontFace(a);try{await a.load(),o(this,za).add(n),e==null||e(t)}catch{yt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Ft("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw yt(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Ct(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(ke||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Ct(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(ce(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ct(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(k,F){return k.charCodeAt(F)<<24|k.charCodeAt(F+1)<<16|k.charCodeAt(F+2)<<8|k.charCodeAt(F+3)&255}function i(k,F,I,M){const S=k.substring(0,F),T=k.substring(F+I);return S+M+T}let r,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(k,F){if(++u>30){yt("Load test font never loaded."),F();return}if(c.font="30px "+k,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(h.bind(null,k,F))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=i(g,976,f.length,f);const y=16,E=1482184792;let C=n(g,y);for(r=0,a=f.length-3;r<a;r+=4)C=C-E+n(f,r)|0;r<f.length&&(C=C-E+n(f+"XXX",r)|0),g=i(g,y,4,_R(C));const _=`url(data:font/opentype;base64,${btoa(g)});`,P=`@font-face {font-family:"${f}";src:${_}}`;this.insertRule(P);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const k of[t.loadedName,f]){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=k,L.append(F)}this._document.body.append(L),h(f,()=>{L.remove(),e.complete()})}}za=new WeakMap;class HR{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=mb(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),n}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(r){yt(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(r,a){};const i=[];for(let r=0,a=n.length;r<a;)switch(n[r++]){case si.BEZIER_CURVE_TO:{const[l,c,u,h,f,g]=n.slice(r,r+6);i.push(v=>v.bezierCurveTo(l,c,u,h,f,g)),r+=6}break;case si.MOVE_TO:{const[l,c]=n.slice(r,r+2);i.push(u=>u.moveTo(l,c)),r+=2}break;case si.LINE_TO:{const[l,c]=n.slice(r,r+2);i.push(u=>u.lineTo(l,c)),r+=2}break;case si.QUADRATIC_CURVE_TO:{const[l,c,u,h]=n.slice(r,r+4);i.push(f=>f.quadraticCurveTo(l,c,u,h)),r+=4}break;case si.RESTORE:i.push(l=>l.restore());break;case si.SAVE:i.push(l=>l.save());break;case si.SCALE:ce(i.length===2,"Scale command is only valid at the third position.");break;case si.TRANSFORM:{const[l,c,u,h,f,g]=n.slice(r,r+6);i.push(v=>v.transform(l,c,u,h,f,g)),r+=6}break;case si.TRANSLATE:{const[l,c]=n.slice(r,r+2);i.push(u=>u.translate(l,c)),r+=2}break}return this.compiledGlyphs[e]=function(a,l){i[0](a),i[1](a),a.scale(l,-l);for(let c=2,u=i.length;c<u;c++)i[c](a)}}}if(ke){var tm=Promise.withResolvers(),El=null;(async()=>{const t=await Promise.resolve().then(()=>require("./empty-DBAFSQIv.cjs")),e=await Promise.resolve().then(()=>require("./index-C-h-Wg6Y.cjs")).then(l=>l.index),n=await Promise.resolve().then(()=>require("./index-YsLdVSGz.cjs")).then(l=>l.index),i=await Promise.resolve().then(()=>require("./url-BbTmJwFS.cjs")).then(l=>l.url);let r,a;return new Map(Object.entries({fs:t,http:e,https:n,url:i,canvas:r,path2d:a}))})().then(t=>{El=t,tm.resolve()},t=>{yt(`loadPackages: ${t}`),El=new Map,tm.resolve()})}class ei{static get promise(){return tm.promise}static get(t){return El==null?void 0:El.get(t)}}const Kb=function(s){return ei.get("fs").promises.readFile(s).then(e=>new Uint8Array(e))};class UR extends yp{}class zR extends ad{_createCanvas(t,e){return ei.get("canvas").createCanvas(t,e)}}class VR extends bp{_fetchData(t,e){return Kb(t).then(n=>({cMapData:n,compressionType:e}))}}class GR extends wp{_fetchData(t){return Kb(t)}}const Ne={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function em(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),s.clip(i)}class Jh{constructor(){this.constructor===Jh&&Ft("Cannot initialize BaseShadingPattern.")}getPattern(){Ft("Abstract method `getPattern` called.")}}class WR extends Jh{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let r;if(i===Ne.STROKE||i===Ne.FILL){const a=e.current.getClippedPathBoundingBox(i,zt(t))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,u=e.cachedCanvases.getCanvas("pattern",l,c,!0),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),n=J.transform(n,[1,0,0,1,a[0],a[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),em(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const f=new DOMMatrix(n);r.setTransform(f)}else em(t,this._bbox),r=this._createGradient(t);return r}}function sg(s,t,e,n,i,r,a,l){const c=t.coords,u=t.colors,h=s.data,f=s.width*4;let g;c[e+1]>c[n+1]&&(g=e,e=n,n=g,g=r,r=a,a=g),c[n+1]>c[i+1]&&(g=n,n=i,i=g,g=a,a=l,l=g),c[e+1]>c[n+1]&&(g=e,e=n,n=g,g=r,r=a,a=g);const v=(c[e]+t.offsetX)*t.scaleX,y=(c[e+1]+t.offsetY)*t.scaleY,E=(c[n]+t.offsetX)*t.scaleX,C=(c[n+1]+t.offsetY)*t.scaleY,_=(c[i]+t.offsetX)*t.scaleX,P=(c[i+1]+t.offsetY)*t.scaleY;if(y>=P)return;const L=u[r],k=u[r+1],F=u[r+2],I=u[a],M=u[a+1],S=u[a+2],T=u[l],D=u[l+1],B=u[l+2],U=Math.round(y),V=Math.round(P);let G,Z,Y,$,W,q,wt,Et;for(let z=U;z<=V;z++){if(z<C){const nt=z<y?0:(y-z)/(y-C);G=v-(v-E)*nt,Z=L-(L-I)*nt,Y=k-(k-M)*nt,$=F-(F-S)*nt}else{let nt;z>P?nt=1:C===P?nt=0:nt=(C-z)/(C-P),G=E-(E-_)*nt,Z=I-(I-T)*nt,Y=M-(M-D)*nt,$=S-(S-B)*nt}let it;z<y?it=0:z>P?it=1:it=(y-z)/(y-P),W=v-(v-_)*it,q=L-(L-T)*it,wt=k-(k-D)*it,Et=F-(F-B)*it;const st=Math.round(Math.min(G,W)),Q=Math.round(Math.max(G,W));let ct=f*z+st*4;for(let nt=st;nt<=Q;nt++)it=(G-nt)/(G-W),it<0?it=0:it>1&&(it=1),h[ct++]=Z-(Z-q)*it|0,h[ct++]=Y-(Y-wt)*it|0,h[ct++]=$-($-Et)*it|0,h[ct++]=255}}function qR(s,t,e){const n=t.coords,i=t.colors;let r,a;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(n.length/l)-1,u=l-1;for(r=0;r<c;r++){let h=r*l;for(let f=0;f<u;f++,h++)sg(s,e,n[h],n[h+1],n[h+l],i[h],i[h+1],i[h+l]),sg(s,e,n[h+l+1],n[h+1],n[h+l],i[h+l+1],i[h+1],i[h+l])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)sg(s,e,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class XR extends Jh{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),v=u/f,y=h/g,E={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/v,scaleY:1/y},C=f+2*2,_=g+2*2,P=n.getCanvas("mesh",C,_,!1),L=P.context,k=L.createImageData(f,g);if(e){const I=k.data;for(let M=0,S=I.length;M<S;M+=4)I[M]=e[0],I[M+1]=e[1],I[M+2]=e[2],I[M+3]=255}for(const I of this._figures)qR(k,I,E);return L.putImageData(k,2,2),{canvas:P.canvas,offsetX:l-2*v,offsetY:c-2*y,scaleX:v,scaleY:y}}getPattern(t,e,n,i){em(t,this._bbox);let r;if(i===Ne.SHADING)r=J.singularValueDecompose2dScale(zt(t));else if(r=J.singularValueDecompose2dScale(e.baseTransform),this.matrix){const l=J.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}const a=this._createMeshCanvas(r,i===Ne.SHADING?null:this._background,e.cachedCanvases);return i!==Ne.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class YR extends Jh{getPattern(){return"hotpink"}}function KR(s){switch(s[0]){case"RadialAxial":return new WR(s);case"Mesh":return new XR(s);case"Dummy":return new YR}throw new Error(`Unknown IR type: ${s[0]}`)}const wv={COLORED:1,UNCOLORED:2},Xd=class Xd{constructor(t,e,n,i,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t){const e=this.operatorList,n=this.bbox,i=this.xstep,r=this.ystep,a=this.paintType,l=this.tilingType,c=this.color,u=this.canvasGraphicsFactory;gp("TilingType: "+l);const h=n[0],f=n[1],g=n[2],v=n[3],y=J.singularValueDecompose2dScale(this.matrix),E=J.singularValueDecompose2dScale(this.baseTransform),C=[y[0]*E[0],y[1]*E[1]],_=this.getSizeAndScale(i,this.ctx.canvas.width,C[0]),P=this.getSizeAndScale(r,this.ctx.canvas.height,C[1]),L=t.cachedCanvases.getCanvas("pattern",_.size,P.size,!0),k=L.context,F=u.createCanvasGraphics(k);F.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(F,a,c);let I=h,M=f,S=g,T=v;return h<0&&(I=0,S+=Math.abs(h)),f<0&&(M=0,T+=Math.abs(f)),k.translate(-(_.scale*I),-(P.scale*M)),F.transform(_.scale,0,0,P.scale,0,0),k.save(),this.clipBbox(F,I,M,S,T),F.baseTransform=zt(F.ctx),F.executeOperatorList(e),F.endDrawing(),{canvas:L.canvas,scaleX:_.scale,scaleY:P.scale,offsetX:I,offsetY:M}}getSizeAndScale(t,e,n){t=Math.abs(t);const i=Math.max(Xd.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,r){const a=i-e,l=r-n;t.ctx.rect(e,n,a,l),t.current.updateRectMinMax(zt(t.ctx),[e,n,i,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,r=t.current;switch(e){case wv.COLORED:const a=this.ctx;i.fillStyle=a.fillStyle,i.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case wv.UNCOLORED:const l=J.makeHexColor(n[0],n[1],n[2]);i.fillStyle=l,i.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new ER(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,i){let r=n;i!==Ne.SHADING&&(r=J.transform(r,e.baseTransform),this.matrix&&(r=J.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=t.createPattern(a.canvas,"repeat");return c.setTransform(l),c}};gt(Xd,"MAX_PATTERN_SIZE",3e3);let nm=Xd;function ZR({src:s,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const l=Ve.isLittleEndian?4278190080:255,[c,u]=a?[r,l]:[l,r],h=n>>3,f=n&7,g=s.length;e=new Uint32Array(e.buffer);let v=0;for(let y=0;y<i;y++){for(const C=t+h;t<C;t++){const _=t<g?s[t]:255;e[v++]=_&128?u:c,e[v++]=_&64?u:c,e[v++]=_&32?u:c,e[v++]=_&16?u:c,e[v++]=_&8?u:c,e[v++]=_&4?u:c,e[v++]=_&2?u:c,e[v++]=_&1?u:c}if(f===0)continue;const E=t<g?s[t++]:255;for(let C=0;C<f;C++)e[v++]=E&1<<7-C?u:c}return{srcPos:t,destPos:v}}const Av=16,Ev=100,JR=15,_v=10,xv=1e3,Ue=16;function QR(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(n,i){t.translate(n,i),this.__originalTranslate(n,i)},s.scale=function(n,i){t.scale(n,i),this.__originalScale(n,i)},s.transform=function(n,i,r,a,l,c){t.transform(n,i,r,a,l,c),this.__originalTransform(n,i,r,a,l,c)},s.setTransform=function(n,i,r,a,l,c){t.setTransform(n,i,r,a,l,c),this.__originalSetTransform(n,i,r,a,l,c)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(n){t.rotate(n),this.__originalRotate(n)},s.clip=function(n){t.clip(n),this.__originalClip(n)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,i,r,a,l){t.bezierCurveTo(e,n,i,r,a,l),this.__originalBezierCurveTo(e,n,i,r,a,l)},s.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class tL{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function du(s,t,e,n,i,r,a,l,c,u){const[h,f,g,v,y,E]=zt(s);if(f===0&&g===0){const P=a*h+y,L=Math.round(P),k=l*v+E,F=Math.round(k),I=(a+c)*h+y,M=Math.abs(Math.round(I)-L)||1,S=(l+u)*v+E,T=Math.abs(Math.round(S)-F)||1;return s.setTransform(Math.sign(h),0,0,Math.sign(v),L,F),s.drawImage(t,e,n,i,r,0,0,M,T),s.setTransform(h,f,g,v,y,E),[M,T]}if(h===0&&v===0){const P=l*g+y,L=Math.round(P),k=a*f+E,F=Math.round(k),I=(l+u)*g+y,M=Math.abs(Math.round(I)-L)||1,S=(a+c)*f+E,T=Math.abs(Math.round(S)-F)||1;return s.setTransform(0,Math.sign(f),Math.sign(g),0,L,F),s.drawImage(t,e,n,i,r,0,0,T,M),s.setTransform(h,f,g,v,y,E),[T,M]}s.drawImage(t,e,n,i,r,a,l,c,u);const C=Math.hypot(h,f),_=Math.hypot(g,v);return[C*c,_*u]}function eL(s){const{width:t,height:e}=s;if(t>xv||e>xv)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a=new Uint8Array(r*(e+1)),l,c,u;const h=t+7&-8;let f=new Uint8Array(h*e),g=0;for(const _ of s.data){let P=128;for(;P>0;)f[g++]=_&P?0:255,P>>=1}let v=0;for(g=0,f[g]!==0&&(a[0]=1,++v),c=1;c<t;c++)f[g]!==f[g+1]&&(a[c]=f[g]?2:1,++v),g++;for(f[g]!==0&&(a[c]=2,++v),l=1;l<e;l++){g=l*h,u=l*r,f[g-h]!==f[g]&&(a[u]=f[g]?1:8,++v);let _=(f[g]?4:0)+(f[g-h]?8:0);for(c=1;c<t;c++)_=(_>>2)+(f[g+1]?4:0)+(f[g-h+1]?8:0),i[_]&&(a[u+c]=i[_],++v),g++;if(f[g-h]!==f[g]&&(a[u+c]=f[g]?2:4,++v),v>n)return null}for(g=h*(e-1),u=l*r,f[g]!==0&&(a[u]=8,++v),c=1;c<t;c++)f[g]!==f[g+1]&&(a[u+c]=f[g]?4:8,++v),g++;if(f[g]!==0&&(a[u+c]=4,++v),v>n)return null;const y=new Int32Array([0,r,-1,0,-r,0,0,0,1]),E=new Path2D;for(l=0;v&&l<=e;l++){let _=l*r;const P=_+t;for(;_<P&&!a[_];)_++;if(_===P)continue;E.moveTo(_%r,l);const L=_;let k=a[_];do{const F=y[k];do _+=F;while(!a[_]);const I=a[_];I!==5&&I!==10?(k=I,a[_]=0):(k=I&51*k>>4,a[_]&=k>>2|k<<2),E.lineTo(_%r,_/r|0),a[_]||--v}while(L!==_);--l}return f=null,a=null,function(_){_.save(),_.scale(1/t,-1/e),_.translate(0,-e),_.fill(E),_.beginPath(),_.restore()}}class Sv{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=pb,this.textMatrixScale=1,this.fontMatrix=Pg,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Se.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=J.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=J.applyTransform(e,t),i=J.applyTransform(e.slice(2),t),r=J.applyTransform([e[0],e[3]],t),a=J.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],r[0],a[0]),this.minY=Math.min(this.minY,n[1],i[1],r[1],a[1]),this.maxX=Math.max(this.maxX,n[0],i[0],r[0],a[0]),this.maxY=Math.max(this.maxY,n[1],i[1],r[1],a[1])}updateScalingPathMinMax(t,e){J.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,i,r,a,l,c,u,h){const f=J.bezierBoundingBox(e,n,i,r,a,l,c,u,h);h||this.updateRectMinMax(t,f)}getPathBoundingBox(t=Ne.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ne.STROKE){e||Ft("Stroke bounding box must include transform.");const i=J.singularValueDecompose2dScale(e),r=i[0]*this.lineWidth/2,a=i[1]*this.lineWidth/2;n[0]-=r,n[1]-=a,n[2]+=r,n[3]+=a}return n}updateClipFromPath(){const t=J.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Ne.FILL,e=null){return J.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Cv(s,t){if(typeof ImageData<"u"&&t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%Ue,r=(e-i)/Ue,a=i===0?r:r+1,l=s.createImageData(n,Ue);let c=0,u;const h=t.data,f=l.data;let g,v,y,E;if(t.kind===Su.GRAYSCALE_1BPP){const C=h.byteLength,_=new Uint32Array(f.buffer,0,f.byteLength>>2),P=_.length,L=n+7>>3,k=4294967295,F=Ve.isLittleEndian?4278190080:255;for(g=0;g<a;g++){for(y=g<r?Ue:i,u=0,v=0;v<y;v++){const I=C-c;let M=0;const S=I>L?n:I*8-7,T=S&-8;let D=0,B=0;for(;M<T;M+=8)B=h[c++],_[u++]=B&128?k:F,_[u++]=B&64?k:F,_[u++]=B&32?k:F,_[u++]=B&16?k:F,_[u++]=B&8?k:F,_[u++]=B&4?k:F,_[u++]=B&2?k:F,_[u++]=B&1?k:F;for(;M<S;M++)D===0&&(B=h[c++],D=128),_[u++]=B&D?k:F,D>>=1}for(;u<P;)_[u++]=0;s.putImageData(l,0,g*Ue)}}else if(t.kind===Su.RGBA_32BPP){for(v=0,E=n*Ue*4,g=0;g<r;g++)f.set(h.subarray(c,c+E)),c+=E,s.putImageData(l,0,v),v+=Ue;g<a&&(E=n*i*4,f.set(h.subarray(c,c+E)),s.putImageData(l,0,v))}else if(t.kind===Su.RGB_24BPP)for(y=Ue,E=n*y,g=0;g<a;g++){for(g>=r&&(y=i,E=n*y),u=0,v=E;v--;)f[u++]=h[c++],f[u++]=h[c++],f[u++]=h[c++],f[u++]=255;s.putImageData(l,0,g*Ue)}else throw new Error(`bad image kind: ${t.kind}`)}function Tv(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%Ue,r=(e-i)/Ue,a=i===0?r:r+1,l=s.createImageData(n,Ue);let c=0;const u=t.data,h=l.data;for(let f=0;f<a;f++){const g=f<r?Ue:i;({srcPos:c}=ZR({src:u,srcPos:c,dest:h,width:n,height:g,nonBlackColor:0})),s.putImageData(l,0,f*Ue)}}function nl(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function fu(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!ke){const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}}function Pv(s,t){if(t)return!0;const e=J.singularValueDecompose2dScale(s);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Cs.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const nL=["butt","round","square"],iL=["miter","round","bevel"],sL={},Rv={};var vc,im,yc,sm;const C0=class C0{constructor(t,e,n,i,r,{optionalContentConfig:a,markedContentStack:l=null},c,u){m(this,vc);m(this,yc);this.ctx=t,this.current=new Sv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new tL(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...zt(this.compositeCtx))}this.ctx.save(),fu(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=zt(this.ctx)}executeOperatorList(t,e,n,i){const r=t.argsArray,a=t.fnArray;let l=e||0;const c=r.length;if(c===l)return l;const u=c-l>_v&&typeof n=="function",h=u?Date.now()+JR:0;let f=0;const g=this.commonObjs,v=this.objs;let y;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,n),l;if(y=a[l],y!==gn.dependency)this[y].apply(this,r[l]);else for(const E of r[l]){const C=E.startsWith("g_")?g:v;if(!C.has(E))return C.get(E,n),l}if(l++,l===c)return l;if(u&&++f>_v){if(Date.now()>h)return n(),l;f=0}}}endDrawing(){A(this,vc,im).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),A(this,yc,sm).call(this)}_scaleImage(t,e){const n=t.width,i=t.height;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=n,c=i,u="prescale1",h,f;for(;r>2&&l>1||a>2&&c>1;){let g=l,v=c;r>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/g),a>2&&c>1&&(v=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/v),h=this.cachedCanvases.getCanvas(u,g,v),f=h.context,f.clearRect(0,0,g,v),f.drawImage(t,0,0,l,c,0,0,g,v),t=h.canvas,l=g,c=v,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,r=this.current.fillColor,a=this.current.patternFill,l=zt(e);let c,u,h,f;if((t.bitmap||t.data)&&t.count>1){const S=t.bitmap||t.data.buffer;u=JSON.stringify(a?l:[l.slice(0,4),r]),c=this._cachedBitmapsMap.get(S),c||(c=new Map,this._cachedBitmapsMap.set(S,c));const T=c.get(u);if(T&&!a){const D=Math.round(Math.min(l[0],l[2])+l[4]),B=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:T,offsetX:D,offsetY:B}}h=T}h||(f=this.cachedCanvases.getCanvas("maskCanvas",n,i),Tv(f.context,t));let g=J.transform(l,[1/n,0,0,-1/i,0,0]);g=J.transform(g,[1,0,0,1,0,-i]);const[v,y,E,C]=J.getAxialAlignedBoundingBox([0,0,n,i],g),_=Math.round(E-v)||1,P=Math.round(C-y)||1,L=this.cachedCanvases.getCanvas("fillCanvas",_,P),k=L.context,F=v,I=y;k.translate(-F,-I),k.transform(...g),h||(h=this._scaleImage(f.canvas,ri(k)),h=h.img,c&&a&&c.set(u,h)),k.imageSmoothingEnabled=Pv(zt(k),t.interpolate),du(k,h,0,0,h.width,h.height,0,0,n,i),k.globalCompositeOperation="source-in";const M=J.transform(ri(k),[1,0,0,1,-F,-I]);return k.fillStyle=a?r.getPattern(e,this,M,Ne.FILL):r,k.fillRect(0,0,n,i),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,L.canvas)),{canvas:L.canvas,offsetX:Math.round(F),offsetY:Math.round(I)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=nL[t]}setLineJoin(t){this.ctx.lineJoin=iL[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...zt(this.suspendedCtx)),nl(this.suspendedCtx,r),QR(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),nl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const r=i[0],a=i[1],l=i[2]-r,c=i[3]-a;l===0||c===0||(this.genericComposeSMask(e.context,n,l,c,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,r,a,l,c,u,h,f){let g=t.canvas,v=c-h,y=u-f;if(a){if(v<0||y<0||v+n>g.width||y+i>g.height){const C=this.cachedCanvases.getCanvas("maskExtension",n,i),_=C.context;_.drawImage(g,-v,-y),a.some(P=>P!==0)&&(_.globalCompositeOperation="destination-atop",_.fillStyle=J.makeHexColor(...a),_.fillRect(0,0,n,i),_.globalCompositeOperation="source-over"),g=C.canvas,v=y=0}else if(a.some(C=>C!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(v,y,n,i),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=J.makeHexColor(...a),t.fillRect(v,y,n,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const E=new Path2D;E.rect(c,u,n,i),e.clip(E),e.globalCompositeOperation="destination-in",e.drawImage(g,v,y,n,i,c,u,n,i),e.restore()}save(){this.inSMaskMode?(nl(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),nl(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,i,r,a){this.ctx.transform(t,e,n,i,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const i=this.ctx,r=this.current;let a=r.x,l=r.y,c,u;const h=zt(i),f=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,g=f?n.slice(0):null;for(let v=0,y=0,E=t.length;v<E;v++)switch(t[v]|0){case gn.rectangle:a=e[y++],l=e[y++];const C=e[y++],_=e[y++],P=a+C,L=l+_;i.moveTo(a,l),C===0||_===0?i.lineTo(P,L):(i.lineTo(P,l),i.lineTo(P,L),i.lineTo(a,L)),f||r.updateRectMinMax(h,[a,l,P,L]),i.closePath();break;case gn.moveTo:a=e[y++],l=e[y++],i.moveTo(a,l),f||r.updatePathMinMax(h,a,l);break;case gn.lineTo:a=e[y++],l=e[y++],i.lineTo(a,l),f||r.updatePathMinMax(h,a,l);break;case gn.curveTo:c=a,u=l,a=e[y+4],l=e[y+5],i.bezierCurveTo(e[y],e[y+1],e[y+2],e[y+3],a,l),r.updateCurvePathMinMax(h,c,u,e[y],e[y+1],e[y+2],e[y+3],a,l,g),y+=6;break;case gn.curveTo2:c=a,u=l,i.bezierCurveTo(a,l,e[y],e[y+1],e[y+2],e[y+3]),r.updateCurvePathMinMax(h,c,u,a,l,e[y],e[y+1],e[y+2],e[y+3],g),a=e[y+2],l=e[y+3],y+=4;break;case gn.curveTo3:c=a,u=l,a=e[y+2],l=e[y+3],i.bezierCurveTo(e[y],e[y+1],a,l,a,l),r.updateCurvePathMinMax(h,c,u,e[y],e[y+1],a,l,a,l,g),y+=4;break;case gn.closePath:i.closePath();break}f&&r.updateScalingPathMinMax(h,g),r.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,ri(e),Ne.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(e.save(),e.fillStyle=n.getPattern(e,this,ri(e),Ne.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=sL}eoClip(){this.pendingClip=Rv}beginText(){this.current.textMatrix=pb,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var h;const n=this.commonObjs.get(t),i=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=n.fontMatrix||Pg,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&yt("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",a=((h=n.systemFontInfo)==null?void 0:h.css)||`"${r}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const c=n.italic?"italic":"normal";let u=e;e<Av?u=Av:e>Ev&&(u=Ev),this.current.fontSizeScale=e/u,this.ctx.font=`${c} ${l} ${u}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,i,r,a){this.current.textMatrix=[t,e,n,i,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i){const r=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,h=c&Se.FILL_STROKE_MASK,f=!!(c&Se.ADD_TO_PATH_FLAG),g=a.patternFill&&!l.missingFile;let v;(l.disableFontFace||f||g)&&(v=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||g?(r.save(),r.translate(e,n),r.beginPath(),v(r,u),i&&r.setTransform(...i),(h===Se.FILL||h===Se.FILL_STROKE)&&r.fill(),(h===Se.STROKE||h===Se.FILL_STROKE)&&r.stroke(),r.restore()):((h===Se.FILL||h===Se.FILL_STROKE)&&r.fillText(t,e,n),(h===Se.STROKE||h===Se.FILL_STROKE)&&r.strokeText(t,e,n)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:zt(r),x:e,y:n,fontSize:u,addToPath:v})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Ct(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,a=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,f=t.length,g=n.vertical,v=g?1:-1,y=n.defaultVMetrics,E=i*e.fontMatrix[0],C=e.textRenderingMode===Se.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),u>0?r.scale(h,-1):r.scale(h,1);let _;if(e.patternFill){r.save();const I=e.fillColor.getPattern(r,this,ri(r),Ne.FILL);_=zt(r),r.restore(),r.fillStyle=I}let P=e.lineWidth;const L=e.textMatrixScale;if(L===0||P===0){const I=e.textRenderingMode&Se.FILL_STROKE_MASK;(I===Se.STROKE||I===Se.FILL_STROKE)&&(P=this.getSinglePixelWidth())}else P/=L;if(a!==1&&(r.scale(a,a),P/=a),r.lineWidth=P,n.isInvalidPDFjsFont){const I=[];let M=0;for(const S of t)I.push(S.unicode),M+=S.width;r.fillText(I.join(""),0,0),e.x+=M*E*h,r.restore(),this.compose();return}let k=0,F;for(F=0;F<f;++F){const I=t[F];if(typeof I=="number"){k+=v*I*i/1e3;continue}let M=!1;const S=(I.isSpace?c:0)+l,T=I.fontChar,D=I.accent;let B,U,V=I.width;if(g){const Z=I.vmetric||y,Y=-(I.vmetric?Z[1]:V*.5)*E,$=Z[2]*E;V=Z?-Z[0]:V,B=Y/a,U=(k+$)/a}else B=k/a,U=0;if(n.remeasure&&V>0){const Z=r.measureText(T).width*1e3/i*a;if(V<Z&&this.isFontSubpixelAAEnabled){const Y=V/Z;M=!0,r.save(),r.scale(Y,1),B/=Y}else V!==Z&&(B+=(V-Z)/2e3*i/a)}if(this.contentVisible&&(I.isInFont||n.missingFile)){if(C&&!D)r.fillText(T,B,U);else if(this.paintChar(T,B,U,_),D){const Z=B+i*D.offset.x/a,Y=U-i*D.offset.y/a;this.paintChar(D.fontChar,Z,Y,_)}}const G=g?V*E-S*u:V*E+S*u;k+=G,M&&r.restore()}g?e.y-=k:e.x+=k*h,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,r=n.fontSize,a=n.fontDirection,l=i.vertical?1:-1,c=n.charSpacing,u=n.wordSpacing,h=n.textHScale*a,f=n.fontMatrix||Pg,g=t.length,v=n.textRenderingMode===Se.INVISIBLE;let y,E,C,_;if(!(v||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(h,a),y=0;y<g;++y){if(E=t[y],typeof E=="number"){_=l*E*r/1e3,this.ctx.translate(_,0),n.x+=_*h;continue}const P=(E.isSpace?u:0)+c,L=i.charProcOperatorList[E.operatorListId];if(!L){yt(`Type3 character "${E.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=E,this.save(),e.scale(r,r),e.transform(...f),this.executeOperatorList(L),this.restore()),C=J.applyTransform([E.width,0],f)[0]*r+P,e.translate(C,0),n.x+=C*h}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,r,a){this.ctx.rect(n,i,r-n,a-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],i=this.baseTransform||zt(this.ctx),r={createCanvasGraphics:a=>new C0(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new nm(t,n,this.ctx,r,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){const i=J.makeHexColor(t,e,n);this.ctx.strokeStyle=i,this.current.strokeColor=i}setFillRGBColor(t,e,n){const i=J.makeHexColor(t,e,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=KR(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,ri(e),Ne.SHADING);const i=ri(e);if(i){const{width:r,height:a}=e.canvas,[l,c,u,h]=J.getAxialAlignedBoundingBox([0,0,r,a],i);this.ctx.fillRect(l,c,u-l,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ft("Should not call beginInlineImage")}beginImageData(){Ft("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=zt(this.ctx),e)){const n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.current.updateRectMinMax(zt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||gp("TODO: Support non-isolated groups."),t.knockout&&yt("Knockout groups not supported.");const n=zt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=J.getAxialAlignedBoundingBox(t.bbox,zt(e));const r=[0,0,e.canvas.width,e.canvas.height];i=J.intersect(i,r)||[0,0,0,0];const a=Math.floor(i[0]),l=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-a,1),u=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,c,u),g=f.context;g.translate(-a,-l),g.transform(...n),t.smask?this.smaskStack.push({canvas:f.canvas,context:g,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,l),e.save()),nl(e,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=zt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=J.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,i,r){if(A(this,vc,im).call(this),fu(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=l;const[c,u]=J.singularValueDecompose2dScale(zt(this.ctx)),{viewportScale:h}=this,f=Math.ceil(a*this.outputScaleX*h),g=Math.ceil(l*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:v,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(t,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,l*u),fu(this.ctx)}else fu(this.ctx),this.ctx.rect(e[0],e[1],a,l),this.ctx.clip(),this.endPath()}this.current=new Sv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,yc,sm).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=eL(t)),i.compiled)){i.compiled(n);return}const r=this._createMaskCanvas(t),a=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,i=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=zt(l);l.transform(e,n,i,r,0,0);const u=this._createMaskCanvas(t);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,f=a.length;h<f;h+=2){const g=J.transform(c,[e,n,i,r,a[h],a[h+1]]),[v,y]=J.applyTransform([0,0],g);l.drawImage(u.canvas,v,y)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:a,width:l,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",l,c),f=h.context;f.save();const g=this.getObject(a,r);Tv(f,g),f.globalCompositeOperation="source-in",f.fillStyle=i?n.getPattern(f,this,ri(e),Ne.FILL):n,f.fillRect(0,0,l,c),f.restore(),e.save(),e.transform(...u),e.scale(1,-1),du(e,h.canvas,0,0,l,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){yt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){yt("Dependent image isn't ready yet");return}const a=r.width,l=r.height,c=[];for(let u=0,h=i.length;u<h;u+=2)c.push({transform:[e,0,0,n,i[u],i[u+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;if(this.save(),!ke){const{filter:l}=i;l!=="none"&&l!==""&&(i.filter="none")}i.scale(1/e,-1/n);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const c=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Cv(c,t),r=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(r,ri(i));i.imageSmoothingEnabled=Pv(zt(i),t.interpolate),du(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,a=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,a).context;Cv(c,t),i=this.applyTransferMapsToCanvas(c)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),du(n,i,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===Rv?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=zt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let a,l;if(n===0&&i===0){const c=Math.abs(e),u=Math.abs(r);if(c===u)if(t===0)a=l=1/c;else{const h=c*t;a=l=h<1?1/h:1}else if(t===0)a=1/c,l=1/u;else{const h=c*t,f=u*t;a=h<1?1/h:1,l=f<1?1/f:1}}else{const c=Math.abs(e*r-n*i),u=Math.hypot(e,n),h=Math.hypot(i,r);if(t===0)a=h/c,l=u/c;else{const f=t*c;a=h>f?h/f:1,l=u>f?u/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[i,r]=this.getScaleForStroking();if(e.lineWidth=n||1,i===1&&r===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(i,r),a.length>0){const l=Math.max(i,r);e.setLineDash(a.map(c=>c/l)),e.lineDashOffset/=l}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};vc=new WeakSet,im=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},yc=new WeakSet,sm=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let Ea=C0;for(const s in gn)Ea.prototype[s]!==void 0&&(Ea.prototype[gn[s]]=Ea.prototype[s]);var bc,wc;class Ui{static get workerPort(){return o(this,bc)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");w(this,bc,t)}static get workerSrc(){return o(this,wc)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");w(this,wc,t)}}bc=new WeakMap,wc=new WeakMap,m(Ui,bc,null),m(Ui,wc,"");const pu={UNKNOWN:0,DATA:1,ERROR:2},Qt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function qe(s){switch(s instanceof Error||typeof s=="object"&&s!==null||Ft('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new oa(s.message);case"MissingPDFException":return new aa(s.message);case"PasswordException":return new Lg(s.message,s.code);case"UnexpectedResponseException":return new mp(s.message,s.status);case"UnknownErrorException":return new kg(s.message,s.details);default:return new kg(s.message,s.toString())}}var Yd,Zb,Kd,Jb,Va,ku;class ul{constructor(t,e,n){m(this,Yd);m(this,Kd);m(this,Va);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=i=>{const r=i.data;if(r.targetName!==this.sourceName)return;if(r.stream){A(this,Kd,Jb).call(this,r);return}if(r.callback){const l=r.callbackId,c=this.callbackCapabilities[l];if(!c)throw new Error(`Cannot resolve callback ${l}`);if(delete this.callbackCapabilities[l],r.callback===pu.DATA)c.resolve(r.data);else if(r.callback===pu.ERROR)c.reject(qe(r.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[r.action];if(!a)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const l=this.sourceName,c=r.sourceName;new Promise(function(u){u(a(r.data))}).then(function(u){n.postMessage({sourceName:l,targetName:c,callback:pu.DATA,callbackId:r.callbackId,data:u})},function(u){n.postMessage({sourceName:l,targetName:c,callback:pu.ERROR,callbackId:r.callbackId,reason:qe(u)})});return}if(r.streamId){A(this,Yd,Zb).call(this,r);return}a(r.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,n,i){const r=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:t,streamId:r,data:e,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:a,targetName:l,stream:Qt.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{ce(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:Qt.CANCEL,streamId:r,reason:qe(u)}),h.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Yd=new WeakSet,Zb=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,a=this,l=this.actionHandler[t.action],c={enqueue(u,h=1,f){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=h,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:Qt.ENQUEUE,streamId:e,chunk:u},f)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Qt.CLOSE,streamId:e}),delete a.streamSinks[e])},error(u){ce(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Qt.ERROR,streamId:e,reason:qe(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,new Promise(function(u){u(l(t.data,c))}).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Qt.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Qt.START_COMPLETE,streamId:e,reason:qe(u)})})},Kd=new WeakSet,Jb=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,a=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Qt.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(qe(t.reason));break;case Qt.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(qe(t.reason));break;case Qt.PULL:if(!l){r.postMessage({sourceName:n,targetName:i,stream:Qt.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,new Promise(function(c){var u;c((u=l.onPull)==null?void 0:u.call(l))}).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Qt.PULL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:n,targetName:i,stream:Qt.PULL_COMPLETE,streamId:e,reason:qe(c)})});break;case Qt.ENQUEUE:if(ce(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case Qt.CLOSE:if(ce(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),A(this,Va,ku).call(this,a,e);break;case Qt.ERROR:ce(a,"error should have stream controller"),a.controller.error(qe(t.reason)),A(this,Va,ku).call(this,a,e);break;case Qt.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(qe(t.reason)),A(this,Va,ku).call(this,a,e);break;case Qt.CANCEL:if(!l)break;new Promise(function(c){var u;c((u=l.onCancel)==null?void 0:u.call(l,qe(t.reason)))}).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Qt.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:n,targetName:i,stream:Qt.CANCEL_COMPLETE,streamId:e,reason:qe(c)})}),l.sinkCapability.reject(qe(t.reason)),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Va=new WeakSet,ku=async function(t,e){var n,i,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var cr,Ac;class rL{constructor({parsedData:t,rawData:e}){m(this,cr,void 0);m(this,Ac,void 0);w(this,cr,t),w(this,Ac,e)}getRaw(){return o(this,Ac)}get(t){return o(this,cr).get(t)??null}getAll(){return f0(o(this,cr))}has(t){return o(this,cr).has(t)}}cr=new WeakMap,Ac=new WeakMap;const Yi=Symbol("INTERNAL");var Ec,_c,xc,Ga;class aL{constructor(t,{name:e,intent:n,usage:i}){m(this,Ec,!1);m(this,_c,!1);m(this,xc,!1);m(this,Ga,!0);w(this,Ec,!!(t&dn.DISPLAY)),w(this,_c,!!(t&dn.PRINT)),this.name=e,this.intent=n,this.usage=i}get visible(){if(o(this,xc))return o(this,Ga);if(!o(this,Ga))return!1;const{print:t,view:e}=this.usage;return o(this,Ec)?(e==null?void 0:e.viewState)!=="OFF":o(this,_c)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Yi&&Ft("Internal method `_setVisible` called."),w(this,xc,n),w(this,Ga,e)}}Ec=new WeakMap,_c=new WeakMap,xc=new WeakMap,Ga=new WeakMap;var os,Mt,Wa,qa,Sc,rm;class oL{constructor(t,e=dn.DISPLAY){m(this,Sc);m(this,os,null);m(this,Mt,new Map);m(this,Wa,null);m(this,qa,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,w(this,qa,t.order);for(const n of t.groups)o(this,Mt).set(n.id,new aL(e,n));if(t.baseState==="OFF")for(const n of o(this,Mt).values())n._setVisible(Yi,!1);for(const n of t.on)o(this,Mt).get(n)._setVisible(Yi,!0);for(const n of t.off)o(this,Mt).get(n)._setVisible(Yi,!1);w(this,Wa,this.getHash())}}isVisible(t){if(o(this,Mt).size===0)return!0;if(!t)return gp("Optional content group not defined."),!0;if(t.type==="OCG")return o(this,Mt).has(t.id)?o(this,Mt).get(t.id).visible:(yt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return A(this,Sc,rm).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!o(this,Mt).has(e))return yt(`Optional content group not found: ${e}`),!0;if(o(this,Mt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!o(this,Mt).has(e))return yt(`Optional content group not found: ${e}`),!0;if(!o(this,Mt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!o(this,Mt).has(e))return yt(`Optional content group not found: ${e}`),!0;if(!o(this,Mt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!o(this,Mt).has(e))return yt(`Optional content group not found: ${e}`),!0;if(o(this,Mt).get(e).visible)return!1}return!0}return yt(`Unknown optional content policy ${t.policy}.`),!0}return yt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const n=o(this,Mt).get(t);if(!n){yt(`Optional content group not found: ${t}`);return}n._setVisible(Yi,!!e,!0),w(this,os,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const r=o(this,Mt).get(i);if(r)switch(n){case"ON":r._setVisible(Yi,!0);break;case"OFF":r._setVisible(Yi,!1);break;case"Toggle":r._setVisible(Yi,!r.visible);break}}w(this,os,null)}get hasInitialVisibility(){return o(this,Wa)===null||this.getHash()===o(this,Wa)}getOrder(){return o(this,Mt).size?o(this,qa)?o(this,qa).slice():[...o(this,Mt).keys()]:null}getGroups(){return o(this,Mt).size>0?f0(o(this,Mt)):null}getGroup(t){return o(this,Mt).get(t)||null}getHash(){if(o(this,os)!==null)return o(this,os);const t=new qb;for(const[e,n]of o(this,Mt))t.update(`${e}:${n.visible}`);return w(this,os,t.hexdigest())}}os=new WeakMap,Mt=new WeakMap,Wa=new WeakMap,qa=new WeakMap,Sc=new WeakSet,rm=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const r=t[i];let a;if(Array.isArray(r))a=A(this,Sc,rm).call(this,r);else if(o(this,Mt).has(r))a=o(this,Mt).get(r).visible;else return yt(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class lL{constructor(t,{disableRange:e=!1,disableStream:n=!1}){ce(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:a,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});ce(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,i,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ce(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new cL(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new hL(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class cL{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=y0(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class hL{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function uL(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let h=l(e);return h=unescape(h),h=c(h),h=u(h),r(h)}if(e=a(s),e){const h=u(e);return r(h)}if(e=n("filename","i").exec(s),e){e=e[1];let h=l(e);return h=u(h),r(h)}function n(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function i(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const g=new TextDecoder(h,{fatal:!0}),v=vp(f);f=g.decode(v),t=!1}catch{}}return f}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),t&&(h=i("iso-8859-1",h))),h}function a(h){const f=[];let g;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=v.exec(h))!==null;){let[,E,C,_]=g;if(E=parseInt(E,10),E in f){if(E===0)break;continue}f[E]=[C,_]}const y=[];for(let E=0;E<f.length&&E in f;++E){let[C,_]=f[E];_=l(_),C&&(_=unescape(_),E===0&&(_=c(_))),y.push(_)}return y.join("")}function l(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let g=0;g<f.length;++g){const v=f[g].indexOf('"');v!==-1&&(f[g]=f[g].slice(0,v),f.length=g+1),f[g]=f[g].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function c(h){const f=h.indexOf("'");if(f===-1)return h;const g=h.slice(0,f),y=h.slice(f+1).replace(/^[^']*'/,"");return i(g,y)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,g,v,y){if(v==="q"||v==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,C){return String.fromCharCode(parseInt(C,16))}),i(g,y);try{y=atob(y)}catch{}return i(g,y)})}return""}function A0({getResponseHeader:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||n||!t||s("Accept-Ranges")!=="bytes"||(s("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function E0(s){const t=s("Content-Disposition");if(t){let e=uL(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(y0(e))return e}return null}function Ep(s,t){return s===404||s===0&&t.startsWith("file:")?new aa('Missing PDF "'+t+'".'):new mp(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s)}function Qb(s){return s===200||s===206}function tw(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function ew(s){const t=new Headers;for(const e in s){const n=s[e];n!==void 0&&t.append(e,n)}return t}function nw(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(yt(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class Lv{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ce(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new dL(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new fL(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class dL{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=ew(this._stream.httpHeaders);const n=e.url;fetch(n,tw(this._headers,this._withCredentials,this._abortController)).then(i=>{if(!Qb(i.status))throw Ep(i.status,n);this._reader=i.body.getReader(),this._headersCapability.resolve();const r=c=>i.headers.get(c),{allowRangeRequests:a,suggestedLength:l}=A0({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=E0(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new oa("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:nw(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class fL{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController,this._headers=ew(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${n-1}`);const r=i.url;fetch(r,tw(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!Qb(a.status))throw Ep(a.status,r);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:nw(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const rg=200,ag=206;function pL(s){const t=s.response;return typeof t!="string"?t:vp(t).buffer}class gL{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const i={begin:t,end:e};for(const r in n)i[r]=n[r];return this.request(i)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const a=this.httpHeaders[r];a!==void 0&&e.setRequestHeader(r,a)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=ag):i.expectedStatus=rg,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var i;const n=this.pendingRequests[t];n&&((i=n.onProgress)==null||i.call(n,e))}onStateChange(t,e){var c,u,h;const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){(c=n.onError)==null||c.call(n,i.status);return}const r=i.status||rg;if(!(r===rg&&n.expectedStatus===ag)&&r!==n.expectedStatus){(u=n.onError)==null||u.call(n,i.status);return}const l=pL(i);if(r===ag){const f=i.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);n.onDone({begin:parseInt(g[1],10),chunk:l})}else l?n.onDone({begin:0,chunk:l}):(h=n.onError)==null||h.call(n,i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class mL{constructor(t){this._source=t,this._manager=new gL(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ce(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vL(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new yL(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class vL{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=a=>e.getResponseHeader(a),{allowRangeRequests:i,suggestedLength:r}=A0({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=E0(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Ep(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class yL{constructor(t,e,n){this._manager=t;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=Ep(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const iw=/^file:\/\/\/[a-zA-Z]:\//;function bL(s){const t=ei.get("url"),e=t.parse(s);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(s)?t.parse(`file:///${s}`):(e.host||(e.protocol="file:"),e)}class wL{constructor(t){this.source=t,this.url=bL(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ce(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _L(this):new AL(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new xL(this,t,e):new EL(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class sw{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new oa("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class rw{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function cd(s,t){return{protocol:s.protocol,auth:s.auth,host:s.hostname,port:s.port,path:s.path,method:"GET",headers:t}}class AL extends sw{constructor(t){super(t);const e=n=>{if(n.statusCode===404){const l=new aa(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(n);const i=l=>this._readableStream.headers[l.toLowerCase()],{allowRangeRequests:r,suggestedLength:a}=A0({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=E0(i)};if(this._request=null,this._url.protocol==="http:"){const n=ei.get("http");this._request=n.request(cd(this._url,t.httpHeaders),e)}else{const n=ei.get("https");this._request=n.request(cd(this._url,t.httpHeaders),e)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class EL extends rw{constructor(t,e,n){super(t),this._httpHeaders={};for(const r in t.httpHeaders){const a=t.httpHeaders[r];a!==void 0&&(this._httpHeaders[r]=a)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const i=r=>{if(r.statusCode===404){const a=new aa(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(r)};if(this._request=null,this._url.protocol==="http:"){const r=ei.get("http");this._request=r.request(cd(this._url,this._httpHeaders),i)}else{const r=ei.get("https");this._request=r.request(cd(this._url,this._httpHeaders),i)}this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class _L extends sw{constructor(t){super(t);let e=decodeURIComponent(this._url.path);iw.test(this._url.href)&&(e=e.replace(/^\//,""));const n=ei.get("fs");n.promises.lstat(e).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(e)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new aa(`Missing PDF "${e}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class xL extends rw{constructor(t,e,n){super(t);let i=decodeURIComponent(this._url.path);iw.test(this._url.href)&&(i=i.replace(/^\//,""));const r=ei.get("fs");this._setReadableStream(r.createReadStream(i,{start:e,end:n-1}))}}const SL=1e5,$e=30,CL=.8;var Wv,ls,He,Cc,Tc,hr,wi,Pc,Rc,ur,Xa,Ya,cs,Ka,Lc,Za,dr,kc,Ic,te,fr,pr,hs,Ja,Zd,aw,Jd,ow,Mc,am,Qa,Iu,Qd,lw,tf,cw;let hd=(te=class{constructor({textContentSource:t,container:e,viewport:n}){m(this,Zd);m(this,Jd);m(this,Mc);m(this,ls,Promise.withResolvers());m(this,He,null);m(this,Cc,!1);m(this,Tc,!!((Wv=globalThis.FontInspector)!=null&&Wv.enabled));m(this,hr,null);m(this,wi,null);m(this,Pc,0);m(this,Rc,0);m(this,ur,null);m(this,Xa,null);m(this,Ya,0);m(this,cs,0);m(this,Ka,Object.create(null));m(this,Lc,[]);m(this,Za,null);m(this,dr,[]);m(this,kc,new WeakMap);m(this,Ic,null);var c;if(t instanceof ReadableStream)w(this,Za,t);else if(typeof t=="object")w(this,Za,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');w(this,He,w(this,Xa,e)),w(this,cs,n.scale*(globalThis.devicePixelRatio||1)),w(this,Ya,n.rotation),w(this,wi,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:a,pageY:l}=n.rawDims;w(this,Ic,[1,0,0,-1,-a,l+r]),w(this,Rc,i),w(this,Pc,r),A(c=te,Qd,lw).call(c),Qr(e,n),o(this,ls).promise.catch(()=>{}).then(()=>{o(te,Ja).delete(this),w(this,wi,null),w(this,Ka,null)})}render(){const t=()=>{o(this,ur).read().then(({value:e,done:n})=>{if(n){o(this,ls).resolve();return}o(this,hr)??w(this,hr,e.lang),Object.assign(o(this,Ka),e.styles),A(this,Zd,aw).call(this,e.items),t()},o(this,ls).reject)};return w(this,ur,o(this,Za).getReader()),o(te,Ja).add(this),t(),o(this,ls).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==o(this,Ya)&&(e==null||e(),w(this,Ya,i),Qr(o(this,Xa),{rotation:i})),n!==o(this,cs)){e==null||e(),w(this,cs,n);const a={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:A(r=te,Qa,Iu).call(r,o(this,hr))};for(const l of o(this,dr))a.properties=o(this,kc).get(l),a.div=l,A(this,Mc,am).call(this,a)}}cancel(){var e;const t=new oa("TextLayer task cancelled.");(e=o(this,ur))==null||e.cancel(t).catch(()=>{}),w(this,ur,null),o(this,ls).reject(t)}get textDivs(){return o(this,dr)}get textContentItemsStr(){return o(this,Lc)}static cleanup(){if(!(o(this,Ja).size>0)){o(this,fr).clear();for(const{canvas:t}of o(this,pr).values())t.remove();o(this,pr).clear()}}},ls=new WeakMap,He=new WeakMap,Cc=new WeakMap,Tc=new WeakMap,hr=new WeakMap,wi=new WeakMap,Pc=new WeakMap,Rc=new WeakMap,ur=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,cs=new WeakMap,Ka=new WeakMap,Lc=new WeakMap,Za=new WeakMap,dr=new WeakMap,kc=new WeakMap,Ic=new WeakMap,fr=new WeakMap,pr=new WeakMap,hs=new WeakMap,Ja=new WeakMap,Zd=new WeakSet,aw=function(t){var i,r;if(o(this,Cc))return;(r=o(this,wi)).ctx??(r.ctx=A(i=te,Qa,Iu).call(i,o(this,hr)));const e=o(this,dr),n=o(this,Lc);for(const a of t){if(e.length>SL){yt("Ignoring additional textDivs for performance reasons."),w(this,Cc,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=o(this,He);w(this,He,document.createElement("span")),o(this,He).classList.add("markedContent"),a.id!==null&&o(this,He).setAttribute("id",`${a.id}`),l.append(o(this,He))}else a.type==="endMarkedContent"&&w(this,He,o(this,He).parentNode);continue}n.push(a.str),A(this,Jd,ow).call(this,a)}},Jd=new WeakSet,ow=function(t){var E;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};o(this,dr).push(e);const i=J.transform(o(this,Ic),t.transform);let r=Math.atan2(i[1],i[0]);const a=o(this,Ka)[t.fontName];a.vertical&&(r+=Math.PI/2);const l=o(this,Tc)&&a.fontSubstitution||a.fontFamily,c=Math.hypot(i[2],i[3]),u=c*A(E=te,tf,cw).call(E,l,o(this,hr));let h,f;r===0?(h=i[4],f=i[5]-u):(h=i[4]+u*Math.sin(r),f=i[5]-u*Math.cos(r));const g="calc(var(--scale-factor)*",v=e.style;o(this,He)===o(this,Xa)?(v.left=`${(100*h/o(this,Rc)).toFixed(2)}%`,v.top=`${(100*f/o(this,Pc)).toFixed(2)}%`):(v.left=`${g}${h.toFixed(2)}px)`,v.top=`${g}${f.toFixed(2)}px)`),v.fontSize=`${g}${(o(te,hs)*c).toFixed(2)}px)`,v.fontFamily=l,n.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,o(this,Tc)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const C=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);C!==_&&Math.max(C,_)/Math.min(C,_)>1.5&&(y=!0)}if(y&&(n.canvasWidth=a.vertical?t.height:t.width),o(this,kc).set(e,n),o(this,wi).div=e,o(this,wi).properties=n,A(this,Mc,am).call(this,o(this,wi)),n.hasText&&o(this,He).append(e),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),o(this,He).append(C)}},Mc=new WeakSet,am=function(t){const{div:e,properties:n,ctx:i,prevFontSize:r,prevFontFamily:a}=t,{style:l}=e;let c="";if(o(te,hs)>1&&(c=`scale(${1/o(te,hs)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=l,{canvasWidth:h,fontSize:f}=n;(r!==f||a!==u)&&(i.font=`${f*o(this,cs)}px ${u}`,t.prevFontSize=f,t.prevFontFamily=u);const{width:g}=i.measureText(e.textContent);g>0&&(c=`scaleX(${h*o(this,cs)/g}) ${c}`)}n.angle!==0&&(c=`rotate(${n.angle}deg) ${c}`),c.length>0&&(l.transform=c)},Qa=new WeakSet,Iu=function(t=null){let e=o(this,pr).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),o(this,pr).set(t,e)}return e},Qd=new WeakSet,lw=function(){if(o(this,hs)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.textContent="X",document.body.append(t),w(this,hs,t.getBoundingClientRect().height),t.remove()},tf=new WeakSet,cw=function(t,e){const n=o(this,fr).get(t);if(n)return n;const i=A(this,Qa,Iu).call(this,e),r=i.font;i.canvas.width=i.canvas.height=$e,i.font=`${$e}px ${t}`;const a=i.measureText("");let l=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);if(l){const f=l/(l+c);return o(this,fr).set(t,f),i.canvas.width=i.canvas.height=0,i.font=r,f}i.strokeStyle="red",i.clearRect(0,0,$e,$e),i.strokeText("g",0,0);let u=i.getImageData(0,0,$e,$e).data;c=0;for(let f=u.length-1-3;f>=0;f-=4)if(u[f]>0){c=Math.ceil(f/4/$e);break}i.clearRect(0,0,$e,$e),i.strokeText("A",0,$e),u=i.getImageData(0,0,$e,$e).data,l=0;for(let f=0,g=u.length;f<g;f+=4)if(u[f]>0){l=$e-Math.floor(f/4/$e);break}i.canvas.width=i.canvas.height=0,i.font=r;const h=l?l/(l+c):CL;return o(this,fr).set(t,h),h},m(te,Qa),m(te,Qd),m(te,tf),m(te,fr,new Map),m(te,pr,new Map),m(te,hs,null),m(te,Ja,new Set),te);function TL(){Ab("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:s,container:t,viewport:e,...n}=arguments[0],i=Object.keys(n);i.length>0&&yt("Ignoring `renderTextLayer` parameters: "+i.join(", "));const r=new hd({textContentSource:s,container:t,viewport:e}),{textDivs:a,textContentItemsStr:l}=r;return{promise:r.render(),textDivs:a,textContentItemsStr:l}}function PL(){Ab("`updateTextLayer`, please use `TextLayer` instead.")}class Cl{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(r){var c;if(!r)return;let a=null;const l=r.name;if(l==="#text")a=r.value;else if(Cl.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const u of r.children)i(u)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const RL=65536,LL=100,kL=5e3,IL=ke?zR:LR,ML=ke?VR:bb,FL=ke?UR:RR,DL=ke?GR:wb;function OL(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new om,{docId:e}=t,n=s.url?NL(s.url):null,i=s.data?BL(s.data):null,r=s.httpHeaders||null,a=s.withCredentials===!0,l=s.password??null,c=s.range instanceof hw?s.range:null,u=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:RL;let h=s.worker instanceof _a?s.worker:null;const f=s.verbosity,g=typeof s.docBaseUrl=="string"&&!v0(s.docBaseUrl)?s.docBaseUrl:null,v=typeof s.cMapUrl=="string"?s.cMapUrl:null,y=s.cMapPacked!==!1,E=s.CMapReaderFactory||ML,C=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,_=s.StandardFontDataFactory||DL,P=s.stopAtErrors!==!0,L=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,k=s.isEvalSupported!==!1,F=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!ke,I=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,M=typeof s.disableFontFace=="boolean"?s.disableFontFace:ke,S=s.fontExtraProperties===!0,T=s.enableXfa===!0,D=s.ownerDocument||globalThis.document,B=s.disableRange===!0,U=s.disableStream===!0,V=s.disableAutoFetch===!0,G=s.pdfBug===!0,Z=s.enableHWA===!0,Y=c?c.length:s.length??NaN,$=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!ke&&!M,W=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:E===bb&&_===wb&&v&&C&&ll(v,document.baseURI)&&ll(C,document.baseURI),q=s.canvasFactory||new IL({ownerDocument:D,enableHWA:Z}),wt=s.filterFactory||new FL({docId:e,ownerDocument:D}),Et=null;yR(f);const z={canvasFactory:q,filterFactory:wt};if(W||(z.cMapReaderFactory=new E({baseUrl:v,isCompressed:y}),z.standardFontDataFactory=new _({baseUrl:C})),!h){const Q={verbosity:f,port:Ui.workerPort};h=Q.port?_a.fromPort(Q):new _a(Q),t._worker=h}const it={docId:e,apiVersion:"4.4.168",data:i,password:l,disableAutoFetch:V,rangeChunkSize:u,length:Y,docBaseUrl:g,enableXfa:T,evaluatorOptions:{maxImageSize:L,disableFontFace:M,ignoreErrors:P,isEvalSupported:k,isOffscreenCanvasSupported:F,canvasMaxAreaInBytes:I,fontExtraProperties:S,useSystemFonts:$,cMapUrl:W?v:null,standardFontDataUrl:W?C:null}},st={disableFontFace:M,fontExtraProperties:S,ownerDocument:D,pdfBug:G,styleElement:Et,loadingParams:{disableAutoFetch:V,enableXfa:T}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Q=h.messageHandler.sendWithPromise("GetDocRequest",it,i?[i.buffer]:null);let ct;if(c)ct=new lL(c,{disableRange:B,disableStream:U});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");ct=(at=>ke?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&ll(at.url)?new Lv(at):new wL(at):ll(at.url)?new Lv(at):new mL(at))({url:n,length:Y,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:B,disableStream:U})}return Q.then(nt=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const at=new ul(e,nt,h.port),X=new UL(at,t,ct,st,z);t._transport=X,at.send("Ready",null)})}).catch(t._capability.reject),t}function NL(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(ke&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function BL(s){if(ke&&typeof rd<"u"&&s instanceof rd)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return vp(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function kv(s){return typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0}var ef;const nf=class nf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${We(nf,ef)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};ef=new WeakMap,m(nf,ef,0);let om=nf,hw=class{constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Ft("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class $L{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var us,Ai,ds,ga,to,Mu;class jL{constructor(t,e,n,i=!1){m(this,ds);m(this,to);m(this,us,null);m(this,Ai,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new vv:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new uw,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new Kh({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:i=Zi.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null}){var L,k;(L=this._stats)==null||L.time("Overall");const f=this._transport.getRenderingIntent(n,i,h),{renderingIntent:g,cacheKey:v}=f;w(this,Ai,!1),A(this,to,Mu).call(this),l||(l=this._transport.getOptionalContentConfig(g));let y=this._intentStates.get(v);y||(y=Object.create(null),this._intentStates.set(v,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const E=!!(g&dn.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(f));const C=F=>{var I;y.renderTasks.delete(_),(this._maybeCleanupAfterRender||E)&&w(this,Ai,!0),A(this,ds,ga).call(this,!E),F?(_.capability.reject(F),this._abortOperatorList({intentState:y,reason:F instanceof Error?F:new Error(F)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new cm({callback:C,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:u});(y.renderTasks||(y.renderTasks=new Set)).add(_);const P=_.task;return Promise.all([y.displayReadyCapability.promise,l]).then(([F,I])=>{var M;if(this.destroyed){C();return}if((M=this._stats)==null||M.time("Rendering"),!(I.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:F,optionalContentConfig:I}),_.operatorListChanged()}).catch(C),P}getOperatorList({intent:t="display",annotationMode:e=Zi.ENABLE,printAnnotationStorage:n=null}={}){var c;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const r=this._transport.getRenderingIntent(t,e,n,!0);let a=this._intentStates.get(r.cacheKey);a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(r)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Cl.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function r(){a.read().then(function({value:c,done:u}){if(u){n(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},i)}const a=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),w(this,Ai,!1),A(this,to,Mu).call(this),Promise.all(t)}cleanup(t=!1){w(this,Ai,!0);const e=A(this,ds,ga).call(this,!1);return t&&e&&this._stats&&(this._stats=new vv),e}_startRenderPage(t,e){var i,r;const n=this._intentStates.get(e);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&A(this,ds,ga).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n}){const{map:i,transfer:r}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:i},r).getReader(),c=this._intentStates.get(e);c.streamReader=l;const u=()=>{l.read().then(({value:h,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),u())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();A(this,ds,ga).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof m0){let i=LL;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new oa(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}us=new WeakMap,Ai=new WeakMap,ds=new WeakSet,ga=function(t=!1){if(A(this,to,Mu).call(this),!o(this,Ai)||this.destroyed)return!1;if(t)return w(this,us,setTimeout(()=>{w(this,us,null),A(this,ds,ga).call(this,!1)},kL)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),w(this,Ai,!1),!0},to=new WeakSet,Mu=function(){o(this,us)&&(clearTimeout(o(this,us)),w(this,us,null))};var gr,sf;class HL{constructor(){m(this,gr,new Set);m(this,sf,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};o(this,sf).then(()=>{for(const i of o(this,gr))i.call(this,n)})}addEventListener(t,e){o(this,gr).add(e)}removeEventListener(t,e){o(this,gr).delete(e)}terminate(){o(this,gr).clear()}}gr=new WeakMap,sf=new WeakMap;const ui={isWorkerDisabled:!1,fakeWorkerId:0};ke&&(ui.isWorkerDisabled=!0,Ui.workerSrc||(Ui.workerSrc="./pdf.worker.mjs")),ui.isSameOrigin=function(s,t){let e;try{if(e=new URL(s),!e.origin||e.origin==="null")return!1}catch{return!1}const n=new URL(t,e);return e.origin===n.origin},ui.createCDNWrapper=function(s){const t=`await import("${s}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var mr,eo,Fu,no,Du;const Xe=class Xe{constructor({name:t=null,port:e=null,verbosity:n=bR()}={}){m(this,eo);var i;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=o(Xe,mr))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(o(Xe,mr)||w(Xe,mr,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return ke?Promise.all([ei.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new ul("main","worker",t),this._messageHandler.on("ready",function(){}),A(this,eo,Fu).call(this)}_initialize(){if(ui.isWorkerDisabled||o(Xe,no,Du)){this._setupFakeWorker();return}let{workerSrc:t}=Xe;try{ui.isSameOrigin(window.location.href,t)||(t=ui.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new ul("main","worker",e),i=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),n.on("test",l=>{if(r.abort(),this.destroyed||!l){i();return}this._messageHandler=n,this._port=e,this._webWorker=e,A(this,eo,Fu).call(this)}),n.on("ready",l=>{if(r.abort(),this.destroyed){i();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{gp("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){ui.isWorkerDisabled||(yt("Setting up fake worker."),ui.isWorkerDisabled=!0),Xe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new HL;this._port=e;const n=`fake${ui.fakeWorkerId++}`,i=new ul(n+"_worker",n,e);t.setup(i,e),this._messageHandler=new ul(n,n+"_worker",e),A(this,eo,Fu).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=o(Xe,mr))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=o(this,mr))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Xe(t)}static get workerSrc(){if(Ui.workerSrc)return Ui.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ct(this,"_setupFakeWorkerGlobal",(async()=>o(this,no,Du)?o(this,no,Du):(await import(this.workerSrc)).WorkerMessageHandler)())}};mr=new WeakMap,eo=new WeakSet,Fu=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},no=new WeakSet,Du=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},m(Xe,no),m(Xe,mr,void 0);let _a=Xe;var Ei,Un,io,so,zn,vr,dl;class UL{constructor(t,e,n,i,r){m(this,vr);m(this,Ei,new Map);m(this,Un,new Map);m(this,io,new Map);m(this,so,new Map);m(this,zn,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new uw,this.fontLoader=new jR({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ct(this,"annotationStorage",new w0)}getRenderingIntent(t,e=Zi.ENABLE,n=null,i=!1){let r=dn.DISPLAY,a=Qg;switch(t){case"any":r=dn.ANY;break;case"display":break;case"print":r=dn.PRINT;break;default:yt(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case Zi.DISABLE:r+=dn.ANNOTATIONS_DISABLE;break;case Zi.ENABLE:break;case Zi.ENABLE_FORMS:r+=dn.ANNOTATIONS_FORMS;break;case Zi.ENABLE_STORAGE:r+=dn.ANNOTATIONS_STORAGE,a=(r&dn.PRINT&&n instanceof Yb?n:this.annotationStorage).serializable;break;default:yt(`getRenderingIntent - invalid annotationMode: ${e}`)}return i&&(r+=dn.OPLIST),{renderingIntent:r,cacheKey:`${r}_${a.hash}`,annotationStorageSerializable:a}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=o(this,zn))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of o(this,Un).values())t.push(i._destroy());o(this,Un).clear(),o(this,io).clear(),o(this,so).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i;this.commonObjs.clear(),this.fontLoader.clear(),o(this,Ei).clear(),this.filterFactory.destroy(),hd.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new oa("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{ce(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){i.close();return}ce(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",n=>{const i=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{var a;(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),r.onProgress=l=>{var c;(c=e.onProgress)==null||c.call(e,{loaded:l.loaded,total:l.total})}),i.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},i.reject),i.promise}),t.on("GetRangeReader",(n,i)=>{ce(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:a,done:l}){if(l){i.close();return}ce(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{r.cancel(a),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new $L(n,this))}),t.on("DocException",function(n){let i;switch(n.name){case"PasswordException":i=new Lg(n.message,n.code);break;case"InvalidPDFException":i=new gb(n.message);break;case"MissingPDFException":i=new aa(n.message);break;case"UnexpectedResponseException":i=new mp(n.message,n.status);break;case"UnknownErrorException":i=new kg(n.message,n.details);break;default:Ft("DocException - expected a valid Error.")}e._capability.reject(i)}),t.on("PasswordRequest",n=>{if(w(this,zn,Promise.withResolvers()),e.onPassword){const i=r=>{r instanceof Error?o(this,zn).reject(r):o(this,zn).resolve({password:r})};try{e.onPassword(i,n.code)}catch(r){o(this,zn).reject(r)}}else o(this,zn).reject(new Lg(n.message,n.code));return o(this,zn).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;o(this,Un).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,r])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:l,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const v=r.error;yt(`Error during font loading: ${v}`),this.commonObjs.resolve(n,v);break}const h=u&&((a=globalThis.FontInspector)!=null&&a.enabled)?(v,y)=>globalThis.FontInspector.fontAdded(v,y):null,f=new HR(r,{disableFontFace:l,inspectFont:h});this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&f.data&&(f.data=null),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:g}=r;ce(g,"The imageRef must be defined.");for(const v of o(this,Un).values())for(const[,y]of v.objs)if((y==null?void 0:y.ref)===g)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,r,a])=>{var c;if(this.destroyed)return;const l=o(this,Un).get(i);if(!l.objs.has(n)){if(l._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(r){case"Image":l.objs.resolve(n,a),(a==null?void 0:a.dataLen)>pR&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&yt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=o(this,io).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&o(this,so).set(r.refStr,t);const a=new jL(e,r,this,this._params.pdfBug);return o(this,Un).set(e,a),a});return o(this,io).set(e,i),i}getPageIndex(t){return kv(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return A(this,vr,dl).call(this,"GetFieldObjects")}hasJSActions(){return A(this,vr,dl).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,vr,dl).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return A(this,vr,dl).call(this,"GetOptionalContentConfig").then(e=>new oL(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=o(this,Ei).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,a;return{info:i[0],metadata:i[1]?new rL(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return o(this,Ei).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of o(this,Un).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),o(this,Ei).clear(),this.filterFactory.destroy(!0),hd.cleanup()}}cachedPageNumber(t){if(!kv(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return o(this,so).get(e)??null}}Ei=new WeakMap,Un=new WeakMap,io=new WeakMap,so=new WeakMap,zn=new WeakMap,vr=new WeakSet,dl=function(t,e=null){const n=o(this,Ei).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return o(this,Ei).set(t,i),i};const gu=Symbol("INITIAL_DATA");var An,Fc,lm;class uw{constructor(){m(this,Fc);m(this,An,Object.create(null))}get(t,e=null){if(e){const i=A(this,Fc,lm).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=o(this,An)[t];if(!n||n.data===gu)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=o(this,An)[t];return!!e&&e.data!==gu}resolve(t,e=null){const n=A(this,Fc,lm).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in o(this,An)){const{data:n}=o(this,An)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}w(this,An,Object.create(null))}*[Symbol.iterator](){for(const t in o(this,An)){const{data:e}=o(this,An)[t];e!==gu&&(yield[t,e])}}}An=new WeakMap,Fc=new WeakSet,lm=function(t){var e;return(e=o(this,An))[t]||(e[t]={...Promise.withResolvers(),data:gu})};var fs;class zL{constructor(t){m(this,fs,null);w(this,fs,t),this.onContinue=null}get promise(){return o(this,fs).capability.promise}cancel(t=0){o(this,fs).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=o(this,fs).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=o(this,fs);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}fs=new WeakMap;var ps,yr;const Bs=class Bs{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:r,operatorList:a,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:g=null}){m(this,ps,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=f,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zL(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,c;if(this.cancelled)return;if(this._canvas){if(o(Bs,yr).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(Bs,yr).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:r,background:a}=this.params;this.gfx=new Ea(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),o(this,ps)&&(window.cancelAnimationFrame(o(this,ps)),w(this,ps,null)),o(Bs,yr).delete(this._canvas),this.callback(t||new m0(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?w(this,ps,window.requestAnimationFrame(()=>{w(this,ps,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(Bs,yr).delete(this._canvas),this.callback())))}};ps=new WeakMap,yr=new WeakMap,m(Bs,yr,new WeakSet);let cm=Bs;const VL="4.4.168",GL="19fbc8998";function Iv(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function il(s){return Math.max(0,Math.min(255,255*s))}class Mv{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=il(t),[t,t,t]}static G_HTML([t]){const e=Iv(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(il)}static RGB_HTML(t){return`#${t.map(Iv).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[il(1-Math.min(1,t+i)),il(1-Math.min(1,n+i)),il(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,r=1-e,a=1-n,l=Math.min(i,r,a);return["CMYK",i,r,a,l]}}class dw{static setupStorage(t,e,n,i,r){const a=i.getValue(e,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{i.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:r}){const{attributes:a}=e,l=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[c,u]of Object.entries(a))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}l&&r.addLinkAttributes(t,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(t,a.dataId,e,n)}static render(t){var f,g;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,r=t.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:n});const l=r!=="richText",c=t.div;if(c.append(a),t.viewport){const v=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=v}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const v=document.createTextNode(i.value);a.append(v),l&&Cl.shouldBuildText(i.name)&&u.push(v)}return{textDivs:u}}const h=[[i,-1,a]];for(;h.length>0;){const[v,y,E]=h.at(-1);if(y+1===v.children.length){h.pop();continue}const C=v.children[++h.at(-1)[1]];if(C===null)continue;const{name:_}=C;if(_==="#text"){const L=document.createTextNode(C.value);u.push(L),E.append(L);continue}const P=(f=C==null?void 0:C.attributes)!=null&&f.xmlns?document.createElementNS(C.attributes.xmlns,_):document.createElement(_);if(E.append(P),C.attributes&&this.setAttributes({html:P,element:C,storage:e,intent:r,linkService:n}),((g=C.children)==null?void 0:g.length)>0)h.push([C,-1,P]);else if(C.value){const L=document.createTextNode(C.value);l&&Cl.shouldBuildText(_)&&u.push(L),P.append(L)}}for(const v of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Qh=1e3,WL=9,ea=new WeakSet;function zi(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class qL{static create(t){switch(t.data.annotationType){case se.LINK:return new fw(t);case se.TEXT:return new XL(t);case se.WIDGET:switch(t.data.fieldType){case"Tx":return new YL(t);case"Btn":return t.data.radioButton?new mw(t):t.data.checkBox?new ZL(t):new JL(t);case"Ch":return new QL(t);case"Sig":return new KL(t)}return new la(t);case se.POPUP:return new um(t);case se.FREETEXT:return new Aw(t);case se.LINE:return new ek(t);case se.SQUARE:return new nk(t);case se.CIRCLE:return new ik(t);case se.POLYLINE:return new Ew(t);case se.CARET:return new rk(t);case se.INK:return new _w(t);case se.POLYGON:return new sk(t);case se.HIGHLIGHT:return new ak(t);case se.UNDERLINE:return new ok(t);case se.SQUIGGLY:return new lk(t);case se.STRIKEOUT:return new ck(t);case se.STAMP:return new xw(t);case se.FILEATTACHMENT:return new hk(t);default:return new Kt(t)}}}var br,ro,ao,Dc,hm;const T0=class T0{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){m(this,Dc);m(this,br,null);m(this,ro,!1);m(this,ao,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get hasPopupData(){return T0._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;o(this,br)||w(this,br,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&A(this,Dc,hm).call(this,e),(n=o(this,ao))==null||n.popup.updateEdited(t)}resetEdited(){var t;o(this,br)&&(A(this,Dc,hm).call(this,o(this,br).rect),(t=o(this,ao))==null||t.popup.resetEdited(),w(this,br,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof la||(r.tabIndex=Qh);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.popupRef&&r.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof um){const{rotation:E}=e;return!e.hasOwnCanvas&&E!==0&&this.setRotation(E,r),r}const{width:l,height:c}=zi(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const E=e.borderStyle.horizontalCornerRadius,C=e.borderStyle.verticalCornerRadius;if(E>0||C>0){const P=`calc(${E}px * var(--scale-factor)) / calc(${C}px * var(--scale-factor))`;a.borderRadius=P}else if(this instanceof mw){const P=`calc(${l}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=P}switch(e.borderStyle.style){case el.SOLID:a.borderStyle="solid";break;case el.DASHED:a.borderStyle="dashed";break;case el.BEVELED:yt("Unimplemented border style: beveled");break;case el.INSET:yt("Unimplemented border style: inset");break;case el.UNDERLINE:a.borderBottomStyle="solid";break}const _=e.borderColor||null;_?(w(this,ro,!0),a.borderColor=J.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):a.borderWidth=0}const u=J.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:f,pageX:g,pageY:v}=i.rawDims;a.left=`${100*(u[0]-g)/h}%`,a.top=`${100*(u[1]-v)/f}%`;const{rotation:y}=e;return e.hasOwnCanvas||y===0?(a.width=`${100*l/h}%`,a.height=`${100*c/f}%`):this.setRotation(y,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:a}=zi(this.data.rect);let l,c;t%180===0?(l=100*r/n,c=100*a/i):(l=100*a/n,c=100*r/i),e.style.width=`${l}%`,e.style.height=`${c}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const r=i.detail[e],a=r[0],l=r.slice(1);i.target.style[n]=Mv[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:Mv[`${a}_rgb`](l)})};return Ct(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||n[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const a=n[i];if(a){const l={detail:{[i]:r},target:t};a(l),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect.map(E=>Math.fround(E));if(t.length===8){const[E,C,_,P]=t.subarray(2,6);if(i===E&&r===C&&e===_&&n===P)return}const{style:a}=this.container;let l;if(o(this,ro)){const{borderColor:E,borderWidth:C}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const c=i-e,u=r-n,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const g=h.createElement("defs");f.append(g);const v=h.createElement("clipPath"),y=`clippath_${this.data.id}`;v.setAttribute("id",y),v.setAttribute("clipPathUnits","objectBoundingBox"),g.append(v);for(let E=2,C=t.length;E<C;E+=8){const _=t[E],P=t[E+1],L=t[E+2],k=t[E+3],F=h.createElement("rect"),I=(L-e)/c,M=(r-P)/u,S=(_-L)/c,T=(P-k)/u;F.setAttribute("x",I),F.setAttribute("y",M),F.setAttribute("width",S),F.setAttribute("height",T),v.append(F),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${M}" width="${S}" height="${T}"/>`)}o(this,ro)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const n=w(this,ao,new um({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){Ft("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:a,exportValues:l}of i){if(r===-1||a===e)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!ea.has(u)){yt(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:c,domElement:u})}return n}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,a=i.getAttribute("data-element-id");a!==e&&ea.has(i)&&n.push({id:a,exportValue:r,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};br=new WeakMap,ro=new WeakMap,ao=new WeakMap,Dc=new WeakSet,hm=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:c}}}}=this;n==null||n.splice(0,4,...t);const{width:u,height:h}=zi(t);e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(a-t[3]+c)/a}%`,i===0?(e.width=`${100*u/r}%`,e.height=`${100*h/a}%`):this.setRotation(i)};let Kt=T0;var _i,Ms,rf,pw,af,gw;class fw extends Kt{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});m(this,_i);m(this,rf);m(this,af);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(A(this,rf,pw).call(this,i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(A(this,af,gw).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&A(this,_i,Ms).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),A(this,_i,Ms).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const a=i.get(r);a&&(e[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),A(this,_i,Ms).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),A(this,_i,Ms).call(this),!this._fieldObjects){yt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var f;i==null||i();const{fields:r,refs:a,include:l}=n,c=[];if(r.length!==0||a.length!==0){const g=new Set(a);for(const v of r){const y=this._fieldObjects[v]||[];for(const{id:E}of y)g.add(E)}for(const v of Object.values(this._fieldObjects))for(const y of v)g.has(y.id)===l&&c.push(y)}else for(const g of Object.values(this._fieldObjects))c.push(...g);const u=this.annotationStorage,h=[];for(const g of c){const{id:v}=g;switch(h.push(v),g.type){case"text":{const E=g.defaultValue||"";u.setValue(v,{value:E});break}case"checkbox":case"radiobutton":{const E=g.defaultValue===g.exportValues;u.setValue(v,{value:E});break}case"combobox":case"listbox":{const E=g.defaultValue||"";u.setValue(v,{value:E});break}default:continue}const y=document.querySelector(`[data-element-id="${v}"]`);if(y){if(!ea.has(y)){yt(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}_i=new WeakSet,Ms=function(){this.container.setAttribute("data-internal-link","")},rf=new WeakSet,pw=function(e,n,i=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,i),!1},A(this,_i,Ms).call(this)},af=new WeakSet,gw=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),A(this,_i,Ms).call(this)};class XL extends Kt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class la extends Kt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ve.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(n,a=>{var l;if(n==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a)}}))})}_setEventListeners(t,e,n,i){var r,a,l;for(const[c,u]of n)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,i),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":J.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||WL,r=t.style;let a;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(eg*i))||1,f=u/h;a=Math.min(i,c(f/eg))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(i,c(u/eg))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=J.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class YL extends la{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=n),r.setValue(a.id,{[i]:n})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",u??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ea.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Qh,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",g=>{t.setValue(e,{value:g.target.value}),this.setPropertyOnSiblings(n,"value",g.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",g=>{const v=this.data.defaultFieldValue??"";n.value=h.userValue=v,h.formattedValue=null});let f=g=>{const{formattedValue:v}=h;v!=null&&(g.target.value=v),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{var E;if(h.focused)return;const{target:y}=v;h.userValue&&(y.value=h.userValue),h.lastCommittedValue=y.value,h.commitKey=1,(E=this.data.actions)!=null&&E.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const y={value(E){h.userValue=E.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),E.target.value=h.userValue},formattedValue(E){const{formattedValue:C}=E.detail;h.formattedValue=C,C!=null&&E.target!==document.activeElement&&(E.target.value=C),t.setValue(e,{formattedValue:C})},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{var L;const{charLimit:C}=E.detail,{target:_}=E;if(C===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",C);let P=h.userValue;!P||P.length<=C||(P=P.slice(0,C),_.value=h.userValue=P,t.setValue(e,{value:P}),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(y,v)}),n.addEventListener("keydown",v=>{var C;h.commitKey=1;let y=-1;if(v.key==="Escape"?y=0:v.key==="Enter"&&!this.data.multiLine?y=2:v.key==="Tab"&&(h.commitKey=3),y===-1)return;const{value:E}=v.target;h.lastCommittedValue!==E&&(h.lastCommittedValue=E,h.userValue=E,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:y,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const g=f;f=null,n.addEventListener("blur",v=>{var E,C;if(!h.focused||!v.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(h.focused=!1);const{value:y}=v.target;h.userValue=y,h.lastCommittedValue!==y&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),g(v)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",v=>{var F;h.lastCommittedValue=null;const{data:y,target:E}=v,{value:C,selectionStart:_,selectionEnd:P}=E;let L=_,k=P;switch(v.inputType){case"deleteWordBackward":{const I=C.substring(0,_).match(/\w*[^\w]*$/);I&&(L-=I[0].length);break}case"deleteWordForward":{const I=C.substring(_).match(/^[^\w]*\w*/);I&&(k+=I[0].length);break}case"deleteContentBackward":_===P&&(L-=1);break;case"deleteContentForward":_===P&&(k+=1);break}v.preventDefault(),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:y||"",willCommit:!1,selStart:L,selEnd:k}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class KL extends la{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class ZL extends la{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return ea.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Qh,r.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const u of this._getElementsByName(l,n)){const h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(n,{value:c})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue||"Off";a.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class mw extends la{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const a of this._getElementsByName(e.fieldName,n))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(ea.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=Qh,r.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const u of this._getElementsByName(l,n))t.setValue(u.id,{value:!1});t.setValue(n,{value:c})}),r.addEventListener("resetform",a=>{const l=e.defaultFieldValue;a.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=a===u.detail.value;for(const f of this._getElementsByName(u.target.name)){const g=h&&f.id===n;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class JL extends fw{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class QL extends la{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");ea.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Qh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const g of i.options)g.selected=g.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,n.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),r=!1),i.append(f)}let a=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),a=()=>{h.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const l=h=>{const f=h?"value":"textContent",{options:g,multiple:v}=i;return v?Array.prototype.filter.call(g,y=>y.selected).map(y=>y[f]):g.selectedIndex===-1?null:g[g.selectedIndex][f]};let c=l(!1);const u=h=>{const f=h.target.options;return Array.prototype.map.call(f,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const f={value(g){a==null||a();const v=g.detail.value,y=new Set(Array.isArray(v)?v:[v]);for(const E of i.options)E.selected=y.has(E.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(g){i.multiple=!0},remove(g){const v=i.options,y=g.detail.remove;v[y].selected=!1,i.remove(y),v.length>0&&Array.prototype.findIndex.call(v,C=>C.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:l(!0),items:u(g)}),c=l(!1)},clear(g){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(g){const{index:v,displayValue:y,exportValue:E}=g.detail.insert,C=i.children[v],_=document.createElement("option");_.textContent=y,_.value=E,C?C.before(_):i.append(_),t.setValue(e,{value:l(!0),items:u(g)}),c=l(!1)},items(g){const{items:v}=g.detail;for(;i.length!==0;)i.remove(0);for(const y of v){const{displayValue:E,exportValue:C}=y,_=document.createElement("option");_.textContent=E,_.value=C,i.append(_)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:l(!0),items:u(g)}),c=l(!1)},indices(g){const v=new Set(g.detail.indices);for(const y of g.target.options)y.selected=v.has(y.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(f,h)}),i.addEventListener("input",h=>{var v;const f=l(!0),g=l(!1);t.setValue(e,{value:f}),h.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:g,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class um extends Kt{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Kt._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new tk({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${vb}${n}`).join(",")),this.container}}var oo,of,lf,lo,wr,Wt,xi,Ar,Oc,Nc,co,Si,En,Ci,Bc,Ti,$c,Er,_r,ho,Ou,jc,dm,cf,vw,hf,yw,uf,bw,df,ww,uo,Nu,fo,Bu,Hc,fm;class tk{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:r,contentsObj:a,richText:l,parent:c,rect:u,parentRect:h,open:f}){m(this,ho);m(this,jc);m(this,cf);m(this,hf);m(this,uf);m(this,df);m(this,uo);m(this,fo);m(this,Hc);m(this,oo,A(this,uf,bw).bind(this));m(this,of,A(this,Hc,fm).bind(this));m(this,lf,A(this,fo,Bu).bind(this));m(this,lo,A(this,uo,Nu).bind(this));m(this,wr,null);m(this,Wt,null);m(this,xi,null);m(this,Ar,null);m(this,Oc,null);m(this,Nc,null);m(this,co,null);m(this,Si,!1);m(this,En,null);m(this,Ci,null);m(this,Bc,null);m(this,Ti,null);m(this,$c,null);m(this,Er,null);m(this,_r,!1);var g;w(this,Wt,t),w(this,$c,i),w(this,xi,a),w(this,Ti,l),w(this,Nc,c),w(this,wr,e),w(this,Bc,u),w(this,co,h),w(this,Oc,n),w(this,Ar,Eb.toDateObject(r)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",o(this,lo)),v.addEventListener("mouseenter",o(this,lf)),v.addEventListener("mouseleave",o(this,of)),v.classList.add("popupTriggerArea");for(const v of n)(g=v.container)==null||g.addEventListener("keydown",o(this,oo));o(this,Wt).hidden=!0,f&&A(this,uo,Nu).call(this)}render(){if(o(this,En))return;const t=w(this,En,document.createElement("div"));if(t.className="popup",o(this,wr)){const r=t.style.outlineColor=J.makeHexColor(...o(this,wr));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=J.makeHexColor(...o(this,wr).map(l=>Math.floor(.7*(255-l)+l)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=o(this,$c),t.append(e),o(this,Ar)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:o(this,Ar).toLocaleDateString(),time:o(this,Ar).toLocaleTimeString()})),e.append(r)}const i=o(this,ho,Ou);if(i)dw.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(o(this,xi));t.append(r)}o(this,Wt).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,a=i.length;r<a;++r){const l=i[r];n.append(document.createTextNode(l)),r<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;o(this,Er)||w(this,Er,{contentsObj:o(this,xi),richText:o(this,Ti)}),t&&w(this,Ci,null),e&&(w(this,Ti,A(this,hf,yw).call(this,e)),w(this,xi,null)),(n=o(this,En))==null||n.remove(),w(this,En,null)}resetEdited(){var t;o(this,Er)&&({contentsObj:We(this,xi)._,richText:We(this,Ti)._}=o(this,Er),w(this,Er,null),(t=o(this,En))==null||t.remove(),w(this,En,null),w(this,Ci,null))}forceHide(){w(this,_r,this.isVisible),o(this,_r)&&(o(this,Wt).hidden=!0)}maybeShow(){o(this,_r)&&(o(this,En)||A(this,fo,Bu).call(this),w(this,_r,!1),o(this,Wt).hidden=!1)}get isVisible(){return o(this,Wt).hidden===!1}}oo=new WeakMap,of=new WeakMap,lf=new WeakMap,lo=new WeakMap,wr=new WeakMap,Wt=new WeakMap,xi=new WeakMap,Ar=new WeakMap,Oc=new WeakMap,Nc=new WeakMap,co=new WeakMap,Si=new WeakMap,En=new WeakMap,Ci=new WeakMap,Bc=new WeakMap,Ti=new WeakMap,$c=new WeakMap,Er=new WeakMap,_r=new WeakMap,ho=new WeakSet,Ou=function(){const t=o(this,Ti),e=o(this,xi);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&o(this,Ti).html||null},jc=new WeakSet,dm=function(){var t,e,n;return((n=(e=(t=o(this,ho,Ou))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},cf=new WeakSet,vw=function(){var t,e,n;return((n=(e=(t=o(this,ho,Ou))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},hf=new WeakSet,yw=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:o(this,cf,vw),fontSize:o(this,jc,dm)?`calc(${o(this,jc,dm)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return n},uf=new WeakSet,bw=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&o(this,Si))&&A(this,uo,Nu).call(this)},df=new WeakSet,ww=function(){if(o(this,Ci)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:r}}}=o(this,Nc);let a=!!o(this,co),l=a?o(this,co):o(this,Bc);for(const y of o(this,Oc))if(!l||J.intersect(y.data.rect,l)!==null){l=y.data.rect,a=!0;break}const c=J.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),h=a?l[2]-l[0]+5:0,f=c[0]+h,g=c[1];w(this,Ci,[100*(f-i)/e,100*(g-r)/n]);const{style:v}=o(this,Wt);v.left=`${o(this,Ci)[0]}%`,v.top=`${o(this,Ci)[1]}%`},uo=new WeakSet,Nu=function(){w(this,Si,!o(this,Si)),o(this,Si)?(A(this,fo,Bu).call(this),o(this,Wt).addEventListener("click",o(this,lo)),o(this,Wt).addEventListener("keydown",o(this,oo))):(A(this,Hc,fm).call(this),o(this,Wt).removeEventListener("click",o(this,lo)),o(this,Wt).removeEventListener("keydown",o(this,oo)))},fo=new WeakSet,Bu=function(){o(this,En)||this.render(),this.isVisible?o(this,Si)&&o(this,Wt).classList.add("focused"):(A(this,df,ww).call(this),o(this,Wt).hidden=!1,o(this,Wt).style.zIndex=parseInt(o(this,Wt).style.zIndex)+1e3)},Hc=new WeakSet,fm=function(){o(this,Wt).classList.remove("focused"),!(o(this,Si)||!this.isVisible)&&(o(this,Wt).hidden=!0,o(this,Wt).style.zIndex=parseInt(o(this,Wt).style.zIndex)-1e3)};class Aw extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=xt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Uc;class ek extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,Uc,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:i}=zi(e.rect),r=this.svgFactory.create(n,i,!0),a=w(this,Uc,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Uc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Uc=new WeakMap;var zc;class nk extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,zc,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:i}=zi(e.rect),r=this.svgFactory.create(n,i,!0),a=e.borderStyle.width,l=w(this,zc,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",n-a),l.setAttribute("height",i-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,zc)}addHighlightArea(){this.container.classList.add("highlightArea")}}zc=new WeakMap;var Vc;class ik extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,Vc,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:i}=zi(e.rect),r=this.svgFactory.create(n,i,!0),a=e.borderStyle.width,l=w(this,Vc,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",i/2),l.setAttribute("rx",n/2-a/2),l.setAttribute("ry",i/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Vc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vc=new WeakMap;var Gc;class Ew extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,Gc,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:r}}=this;if(!n)return this.container;const{width:a,height:l}=zi(e),c=this.svgFactory.create(a,l,!0);let u=[];for(let f=0,g=n.length;f<g;f+=2){const v=n[f]-e[0],y=e[3]-n[f+1];u.push(`${v},${y}`)}u=u.join(" ");const h=w(this,Gc,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Gc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gc=new WeakMap;class sk extends Ew{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class rk extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Wc;class _w extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});m(this,Wc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=xt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:i,popupRef:r}}=this,{width:a,height:l}=zi(e),c=this.svgFactory.create(a,l,!0);for(const u of n){let h=[];for(let g=0,v=u.length;g<v;g+=2){const y=u[g]-e[0],E=e[3]-u[g+1];h.push(`${y},${E}`)}h=h.join(" ");const f=this.svgFactory.createElement(this.svgElementName);o(this,Wc).push(f),f.setAttribute("points",h),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),c.append(f)}return this.container.append(c),this.container}getElementsToTriggerPopup(){return o(this,Wc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wc=new WeakMap;class ak extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ok extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class lk extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ck extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class xw extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var qc,Xc,pm;class hk extends Kt{constructor(e){var i;super(e,{isRenderable:!0});m(this,Xc);m(this,qc,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",A(this,Xc,pm).bind(this)),w(this,qc,i);const{isMac:r}=Ve.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&A(this,Xc,pm).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return o(this,qc)}addHighlightArea(){this.container.classList.add("highlightArea")}}qc=new WeakMap,Xc=new WeakSet,pm=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Yc,xr,po,ff,Sw,Kc,gm,qv;let uk=(qv=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:r,viewport:a}){m(this,ff);m(this,Kc);m(this,Yc,null);m(this,xr,null);m(this,po,new Map);this.div=t,w(this,Yc,e),w(this,xr,n),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}async render(t){var a;const{annotations:e}=t,n=this.div;Qr(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new g0,annotationStorage:t.annotationStorage||new w0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===se.POPUP;if(c){const f=i.get(l.id);if(!f)continue;r.elements=f}else{const{width:f,height:g}=zi(l.rect);if(f<=0||g<=0)continue}r.data=l;const u=qL.create(r);if(!u.isRenderable)continue;if(!c&&l.popupRef){const f=i.get(l.popupRef);f?f.push(u):i.set(l.popupRef,[u])}const h=u.render();l.hidden&&(h.style.visibility="hidden"),A(this,ff,Sw).call(this,h,l.id),u.annotationEditorType>0&&(o(this,po).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}A(this,Kc,gm).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Qr(e,{rotation:t.rotation}),A(this,Kc,gm).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(o(this,po).values())}getEditableAnnotation(t){return o(this,po).get(t)}},Yc=new WeakMap,xr=new WeakMap,po=new WeakMap,ff=new WeakSet,Sw=function(t,e){var i;const n=t.firstChild||t;n.id=`${vb}${e}`,this.div.append(t),(i=o(this,Yc))==null||i.moveElementInDOM(this.div,t,n,!1)},Kc=new WeakSet,gm=function(){if(!o(this,xr))return;const t=this.div;for(const[e,n]of o(this,xr)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):i.append(n)}o(this,xr).clear()},qv);const mu=/\r\n?|\n/g;var Zc,Jc,Qc,th,eh,_n,Je,nh,Qe,go,pf,Cw,gf,Tw,mf,Pw,mo,$u,vo,ju,yo,Hu,vf,Rw,ih,vm,yf,Lw;const Nt=class Nt extends It{constructor(e){super({...e,name:"freeTextEditor"});m(this,pf);m(this,gf);m(this,mf);m(this,mo);m(this,yo);m(this,vf);m(this,yf);m(this,Zc,this.editorDivBlur.bind(this));m(this,Jc,this.editorDivFocus.bind(this));m(this,Qc,this.editorDivInput.bind(this));m(this,th,this.editorDivKeydown.bind(this));m(this,eh,this.editorDivPaste.bind(this));m(this,_n,void 0);m(this,Je,"");m(this,nh,`${this.id}-editor`);m(this,Qe,void 0);m(this,go,null);w(this,_n,e.color||Nt._defaultColor||It._defaultLineColor),w(this,Qe,e.fontSize||Nt._defaultFontSize)}static get _keyboardManager(){const e=Nt.prototype,n=a=>a.isEmpty(),i=ta.TRANSLATE_SMALL,r=ta.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new Zh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){It.initialize(e,n,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case ut.FREETEXT_SIZE:Nt._defaultFontSize=n;break;case ut.FREETEXT_COLOR:Nt._defaultColor=n;break}}updateParams(e,n){switch(e){case ut.FREETEXT_SIZE:A(this,pf,Cw).call(this,n);break;case ut.FREETEXT_COLOR:A(this,gf,Tw).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ut.FREETEXT_SIZE,Nt._defaultFontSize],[ut.FREETEXT_COLOR,Nt._defaultColor||It._defaultLineColor]]}get propertiesToUpdate(){return[[ut.FREETEXT_SIZE,o(this,Qe)],[ut.FREETEXT_COLOR,o(this,_n)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Nt._internalPadding*e,-(Nt._internalPadding+o(this,Qe))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(xt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",o(this,th),{signal:e}),this.editorDiv.addEventListener("focus",o(this,Jc),{signal:e}),this.editorDiv.addEventListener("blur",o(this,Zc),{signal:e}),this.editorDiv.addEventListener("input",o(this,Qc),{signal:e}),this.editorDiv.addEventListener("paste",o(this,eh),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,nh)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",o(this,th)),this.editorDiv.removeEventListener("focus",o(this,Jc)),this.editorDiv.removeEventListener("blur",o(this,Zc)),this.editorDiv.removeEventListener("input",o(this,Qc)),this.editorDiv.removeEventListener("paste",o(this,eh)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=o(this,Je),n=w(this,Je,A(this,mf,Pw).call(this).trimEnd());if(e===n)return;const i=r=>{if(w(this,Je,r),!r){this.remove();return}A(this,yo,Hu).call(this),this._uiManager.rebuild(this),A(this,mo,$u).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),A(this,mo,$u).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Nt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,nh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),It._l10nPromise.get("pdfjs-free-text-default-content").then(r=>{var a;return(a=this.editorDiv)==null?void 0:a.setAttribute("default-content",r)}),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${o(this,Qe)}px * var(--scale-factor))`,i.color=o(this,_n),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),od(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=o(this,go);let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,f]=this.pageDimensions,[g,v]=this.pageTranslation;let y,E;switch(this.rotation){case 0:y=e+(l[0]-g)/h,E=n+this.height-(l[1]-v)/f;break;case 90:y=e+(l[0]-g)/h,E=n-(l[1]-v)/f,[c,u]=[u,-c];break;case 180:y=e-this.width+(l[0]-g)/h,E=n-(l[1]-v)/f,[c,u]=[-c,-u];break;case 270:y=e+(l[0]-g-this.height*f)/h,E=n+(l[1]-v-this.width*h)/f,[c,u]=[-u,c];break}this.setAt(y*r,E*a,c,u)}else this.setAt(e*r,n*a,this.width*r,this.height*a);A(this,yo,Hu).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var y,E,C;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=A(y=Nt,ih,vm).call(y,n.getData("text")||"").replaceAll(mu,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const _=c.parentElement;if(f.push(c.nodeValue.slice(u).replaceAll(mu,"")),_!==this.editorDiv){let P=h;for(const L of this.editorDiv.childNodes){if(L===_){P=f;continue}P.push(A(E=Nt,vo,ju).call(E,L))}}h.push(c.nodeValue.slice(0,u).replaceAll(mu,""))}else if(c===this.editorDiv){let _=h,P=0;for(const L of this.editorDiv.childNodes)P++===u&&(_=f),_.push(A(C=Nt,vo,ju).call(C,L))}w(this,Je,`${h.join(`
`)}${r}${f.join(`
`)}`),A(this,yo,Hu).call(this);const g=new Range;let v=h.reduce((_,P)=>_+P.length,0);for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const P=_.nodeValue.length;if(v<=P){g.setStart(_,v),g.setEnd(_,v);break}v-=P}a.removeAllRanges(),a.addRange(g)}get contentDiv(){return this.editorDiv}static deserialize(e,n,i){var l;let r=null;if(e instanceof Aw){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:f,id:g},textContent:v,textPosition:y,parent:{page:{pageNumber:E}}}=e;if(!v||v.length===0)return null;r=e={annotationType:xt.FREETEXT,color:Array.from(u),fontSize:c,value:v.join(`
`),position:y,pageIndex:E-1,rect:h.slice(0),rotation:f,id:g,deleted:!1}}const a=super.deserialize(e,n,i);return w(a,Qe,e.fontSize),w(a,_n,J.makeHexColor(...e.color)),w(a,Je,A(l=Nt,ih,vm).call(l,e.value)),a.annotationElementId=e.id||null,w(a,go,r),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const n=Nt._internalPadding*this.parentScale,i=this.getRect(n,n),r=It._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:o(this,_n)),a={annotationType:xt.FREETEXT,color:r,fontSize:o(this,Qe),value:A(this,vf,Rw).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?a:this.annotationElementId&&!A(this,yf,Lw).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${o(this,Qe)}px * var(--scale-factor))`,i.color=o(this,_n),n.replaceChildren();for(const a of o(this,Je).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),n.append(l)}const r=Nt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:o(this,Je)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Zc=new WeakMap,Jc=new WeakMap,Qc=new WeakMap,th=new WeakMap,eh=new WeakMap,_n=new WeakMap,Je=new WeakMap,nh=new WeakMap,Qe=new WeakMap,go=new WeakMap,pf=new WeakSet,Cw=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-o(this,Qe))*this.parentScale),w(this,Qe,r),A(this,mo,$u).call(this)},i=o(this,Qe);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},gf=new WeakSet,Tw=function(e){const n=r=>{w(this,_n,this.editorDiv.style.color=r)},i=o(this,_n);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},mf=new WeakSet,Pw=function(){var n;const e=[];this.editorDiv.normalize();for(const i of this.editorDiv.childNodes)e.push(A(n=Nt,vo,ju).call(n,i));return e.join(`
`)},mo=new WeakSet,$u=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},vo=new WeakSet,ju=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(mu,"")},yo=new WeakSet,Hu=function(){if(this.editorDiv.replaceChildren(),!!o(this,Je))for(const e of o(this,Je).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},vf=new WeakSet,Rw=function(){return o(this,Je).replaceAll("Â "," ")},ih=new WeakSet,vm=function(e){return e.replaceAll(" ","Â ")},yf=new WeakSet,Lw=function(e){const{value:n,fontSize:i,color:r,pageIndex:a}=o(this,go);return this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==a},m(Nt,vo),m(Nt,ih),gt(Nt,"_freeTextDefaultContent",""),gt(Nt,"_internalPadding",0),gt(Nt,"_defaultColor",null),gt(Nt,"_defaultFontSize",10),gt(Nt,"_type","freetext"),gt(Nt,"_editorType",xt.FREETEXT);let mm=Nt;var sh,gs,xn,bf,kw,bo,Uu,wf,Iw,Af,Mw,rh,bm;class ym{constructor(t,e=0,n=0,i=!0){m(this,bf);m(this,bo);m(this,wf);m(this,Af);m(this,rh);m(this,sh,void 0);m(this,gs,[]);m(this,xn,[]);let r=1/0,a=-1/0,l=1/0,c=-1/0;const h=10**-4;for(const{x:_,y:P,width:L,height:k}of t){const F=Math.floor((_-e)/h)*h,I=Math.ceil((_+L+e)/h)*h,M=Math.floor((P-e)/h)*h,S=Math.ceil((P+k+e)/h)*h,T=[F,M,S,!0],D=[I,M,S,!1];o(this,gs).push(T,D),r=Math.min(r,F),a=Math.max(a,I),l=Math.min(l,M),c=Math.max(c,S)}const f=a-r+2*n,g=c-l+2*n,v=r-n,y=l-n,E=o(this,gs).at(i?-1:-2),C=[E[0],E[2]];for(const _ of o(this,gs)){const[P,L,k]=_;_[0]=(P-v)/f,_[1]=(L-y)/g,_[2]=(k-y)/g}w(this,sh,{x:v,y,width:f,height:g,lastPoint:C})}getOutlines(){o(this,gs).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of o(this,gs))e[3]?(t.push(...A(this,rh,bm).call(this,e)),A(this,wf,Iw).call(this,e)):(A(this,Af,Mw).call(this,e),t.push(...A(this,rh,bm).call(this,e)));return A(this,bf,kw).call(this,t)}}sh=new WeakMap,gs=new WeakMap,xn=new WeakMap,bf=new WeakSet,kw=function(t){const e=[],n=new Set;for(const a of t){const[l,c,u]=a;e.push([l,c,a],[l,u,a])}e.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=e.length;a<l;a+=2){const c=e[a][2],u=e[a+1][2];c.push(u),u.push(c),n.add(c),n.add(u)}const i=[];let r;for(;n.size>0;){const a=n.values().next().value;let[l,c,u,h,f]=a;n.delete(a);let g=l,v=c;for(r=[l,u],i.push(r);;){let y;if(n.has(h))y=h;else if(n.has(f))y=f;else break;n.delete(y),[l,c,u,h,f]=y,g!==l&&(r.push(g,v,l,v===c?c:u),g=l),v=v===c?u:c}r.push(g,v)}return new dk(i,o(this,sh))},bo=new WeakSet,Uu=function(t){const e=o(this,xn);let n=0,i=e.length-1;for(;n<=i;){const r=n+i>>1,a=e[r][0];if(a===t)return r;a<t?n=r+1:i=r-1}return i+1},wf=new WeakSet,Iw=function([,t,e]){const n=A(this,bo,Uu).call(this,t);o(this,xn).splice(n,0,[t,e])},Af=new WeakSet,Mw=function([,t,e]){const n=A(this,bo,Uu).call(this,t);for(let i=n;i<o(this,xn).length;i++){const[r,a]=o(this,xn)[i];if(r!==t)break;if(r===t&&a===e){o(this,xn).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[r,a]=o(this,xn)[i];if(r!==t)break;if(r===t&&a===e){o(this,xn).splice(i,1);return}}},rh=new WeakSet,bm=function(t){const[e,n,i]=t,r=[[e,n,i]],a=A(this,bo,Uu).call(this,i);for(let l=0;l<a;l++){const[c,u]=o(this,xn)[l];for(let h=0,f=r.length;h<f;h++){const[,g,v]=r[h];if(!(u<=g||v<=c)){if(g>=c){if(v>u)r[h][1]=u;else{if(f===1)return[];r.splice(h,1),h--,f--}continue}r[h][2]=c,v>u&&r.push([e,u,v])}}}return r};class Fw{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof Am}}var ah,wo;class dk extends Fw{constructor(e,n){super();m(this,ah,void 0);m(this,wo,void 0);w(this,wo,e),w(this,ah,n)}toSVGPath(){const e=[];for(const n of o(this,wo)){let[i,r]=n;e.push(`M${i} ${r}`);for(let a=2;a<n.length;a+=2){const l=n[a],c=n[a+1];l===i?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),i=l)}e.push("Z")}return e.join(" ")}serialize([e,n,i,r],a){const l=[],c=i-e,u=r-n;for(const h of o(this,wo)){const f=new Array(h.length);for(let g=0;g<h.length;g+=2)f[g]=e+h[g]*c,f[g+1]=r-h[g+1]*u;l.push(f)}return l}get box(){return o(this,ah)}}ah=new WeakMap,wo=new WeakMap;var Vn,Pi,Ao,Eo,Gn,_t,Sr,Cr,oh,lh,_o,xo,ms,ch,Ef,_f,hh,wm;const ci=class ci{constructor({x:t,y:e},n,i,r,a,l=0){m(this,hh);m(this,Vn,void 0);m(this,Pi,[]);m(this,Ao,void 0);m(this,Eo,void 0);m(this,Gn,[]);m(this,_t,new Float64Array(18));m(this,Sr,void 0);m(this,Cr,void 0);m(this,oh,void 0);m(this,lh,void 0);m(this,_o,void 0);m(this,xo,void 0);m(this,ms,[]);w(this,Vn,n),w(this,xo,r*i),w(this,Eo,a),o(this,_t).set([NaN,NaN,NaN,NaN,t,e],6),w(this,Ao,l),w(this,lh,o(ci,ch)*i),w(this,oh,o(ci,_f)*i),w(this,_o,i),o(this,ms).push(t,e)}get free(){return!0}isEmpty(){return isNaN(o(this,_t)[8])}add({x:t,y:e}){var T;w(this,Sr,t),w(this,Cr,e);const[n,i,r,a]=o(this,Vn);let[l,c,u,h]=o(this,_t).subarray(8,12);const f=t-u,g=e-h,v=Math.hypot(f,g);if(v<o(this,oh))return!1;const y=v-o(this,lh),E=y/v,C=E*f,_=E*g;let P=l,L=c;l=u,c=h,u+=C,h+=_,(T=o(this,ms))==null||T.push(t,e);const k=-_/y,F=C/y,I=k*o(this,xo),M=F*o(this,xo);return o(this,_t).set(o(this,_t).subarray(2,8),0),o(this,_t).set([u+I,h+M],4),o(this,_t).set(o(this,_t).subarray(14,18),12),o(this,_t).set([u-I,h-M],16),isNaN(o(this,_t)[6])?(o(this,Gn).length===0&&(o(this,_t).set([l+I,c+M],2),o(this,Gn).push(NaN,NaN,NaN,NaN,(l+I-n)/r,(c+M-i)/a),o(this,_t).set([l-I,c-M],14),o(this,Pi).push(NaN,NaN,NaN,NaN,(l-I-n)/r,(c-M-i)/a)),o(this,_t).set([P,L,l,c,u,h],6),!this.isEmpty()):(o(this,_t).set([P,L,l,c,u,h],6),Math.abs(Math.atan2(L-c,P-l)-Math.atan2(_,C))<Math.PI/2?([l,c,u,h]=o(this,_t).subarray(2,6),o(this,Gn).push(NaN,NaN,NaN,NaN,((l+u)/2-n)/r,((c+h)/2-i)/a),[l,c,P,L]=o(this,_t).subarray(14,18),o(this,Pi).push(NaN,NaN,NaN,NaN,((P+l)/2-n)/r,((L+c)/2-i)/a),!0):([P,L,l,c,u,h]=o(this,_t).subarray(0,6),o(this,Gn).push(((P+5*l)/6-n)/r,((L+5*c)/6-i)/a,((5*l+u)/6-n)/r,((5*c+h)/6-i)/a,((l+u)/2-n)/r,((c+h)/2-i)/a),[u,h,l,c,P,L]=o(this,_t).subarray(12,18),o(this,Pi).push(((P+5*l)/6-n)/r,((L+5*c)/6-i)/a,((5*l+u)/6-n)/r,((5*c+h)/6-i)/a,((l+u)/2-n)/r,((c+h)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=o(this,Gn),e=o(this,Pi),n=o(this,_t).subarray(4,6),i=o(this,_t).subarray(16,18),[r,a,l,c]=o(this,Vn),[u,h,f,g]=A(this,hh,wm).call(this);if(isNaN(o(this,_t)[6])&&!this.isEmpty())return`M${(o(this,_t)[2]-r)/l} ${(o(this,_t)[3]-a)/c} L${(o(this,_t)[4]-r)/l} ${(o(this,_t)[5]-a)/c} L${u} ${h} L${f} ${g} L${(o(this,_t)[16]-r)/l} ${(o(this,_t)[17]-a)/c} L${(o(this,_t)[14]-r)/l} ${(o(this,_t)[15]-a)/c} Z`;const v=[];v.push(`M${t[4]} ${t[5]}`);for(let y=6;y<t.length;y+=6)isNaN(t[y])?v.push(`L${t[y+4]} ${t[y+5]}`):v.push(`C${t[y]} ${t[y+1]} ${t[y+2]} ${t[y+3]} ${t[y+4]} ${t[y+5]}`);v.push(`L${(n[0]-r)/l} ${(n[1]-a)/c} L${u} ${h} L${f} ${g} L${(i[0]-r)/l} ${(i[1]-a)/c}`);for(let y=e.length-6;y>=6;y-=6)isNaN(e[y])?v.push(`L${e[y+4]} ${e[y+5]}`):v.push(`C${e[y]} ${e[y+1]} ${e[y+2]} ${e[y+3]} ${e[y+4]} ${e[y+5]}`);return v.push(`L${e[4]} ${e[5]} Z`),v.join(" ")}getOutlines(){var _;const t=o(this,Gn),e=o(this,Pi),n=o(this,_t),i=n.subarray(4,6),r=n.subarray(16,18),[a,l,c,u]=o(this,Vn),h=new Float64Array((((_=o(this,ms))==null?void 0:_.length)??0)+2);for(let P=0,L=h.length-2;P<L;P+=2)h[P]=(o(this,ms)[P]-a)/c,h[P+1]=(o(this,ms)[P+1]-l)/u;h[h.length-2]=(o(this,Sr)-a)/c,h[h.length-1]=(o(this,Cr)-l)/u;const[f,g,v,y]=A(this,hh,wm).call(this);if(isNaN(n[6])&&!this.isEmpty()){const P=new Float64Array(36);return P.set([NaN,NaN,NaN,NaN,(n[2]-a)/c,(n[3]-l)/u,NaN,NaN,NaN,NaN,(n[4]-a)/c,(n[5]-l)/u,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,v,y,NaN,NaN,NaN,NaN,(n[16]-a)/c,(n[17]-l)/u,NaN,NaN,NaN,NaN,(n[14]-a)/c,(n[15]-l)/u],0),new Am(P,h,o(this,Vn),o(this,_o),o(this,Ao),o(this,Eo))}const E=new Float64Array(o(this,Gn).length+24+o(this,Pi).length);let C=t.length;for(let P=0;P<C;P+=2){if(isNaN(t[P])){E[P]=E[P+1]=NaN;continue}E[P]=t[P],E[P+1]=t[P+1]}E.set([NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-l)/u,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,v,y,NaN,NaN,NaN,NaN,(r[0]-a)/c,(r[1]-l)/u],C),C+=24;for(let P=e.length-6;P>=6;P-=6)for(let L=0;L<6;L+=2){if(isNaN(e[P+L])){E[C]=E[C+1]=NaN,C+=2;continue}E[C]=e[P+L],E[C+1]=e[P+L+1],C+=2}return E.set([NaN,NaN,NaN,NaN,e[4],e[5]],C),new Am(E,h,o(this,Vn),o(this,_o),o(this,Ao),o(this,Eo))}};Vn=new WeakMap,Pi=new WeakMap,Ao=new WeakMap,Eo=new WeakMap,Gn=new WeakMap,_t=new WeakMap,Sr=new WeakMap,Cr=new WeakMap,oh=new WeakMap,lh=new WeakMap,_o=new WeakMap,xo=new WeakMap,ms=new WeakMap,ch=new WeakMap,Ef=new WeakMap,_f=new WeakMap,hh=new WeakSet,wm=function(){const t=o(this,_t).subarray(4,6),e=o(this,_t).subarray(16,18),[n,i,r,a]=o(this,Vn);return[(o(this,Sr)+(t[0]-e[0])/2-n)/r,(o(this,Cr)+(t[1]-e[1])/2-i)/a,(o(this,Sr)+(e[0]-t[0])/2-n)/r,(o(this,Cr)+(e[1]-t[1])/2-i)/a]},m(ci,ch,8),m(ci,Ef,2),m(ci,_f,o(ci,ch)+o(ci,Ef));let ud=ci;var So,Tr,Ri,uh,tn,dh,Yt,Pr,fl,Rr,pl,xf,Dw;class Am extends Fw{constructor(e,n,i,r,a,l){super();m(this,Pr);m(this,Rr);m(this,xf);m(this,So,void 0);m(this,Tr,null);m(this,Ri,void 0);m(this,uh,void 0);m(this,tn,void 0);m(this,dh,void 0);m(this,Yt,void 0);w(this,Yt,e),w(this,tn,n),w(this,So,i),w(this,dh,r),w(this,Ri,a),w(this,uh,l),A(this,xf,Dw).call(this,l);const{x:c,y:u,width:h,height:f}=o(this,Tr);for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-c)/h,e[g+1]=(e[g+1]-u)/f;for(let g=0,v=n.length;g<v;g+=2)n[g]=(n[g]-c)/h,n[g+1]=(n[g+1]-u)/f}toSVGPath(){const e=[`M${o(this,Yt)[4]} ${o(this,Yt)[5]}`];for(let n=6,i=o(this,Yt).length;n<i;n+=6){if(isNaN(o(this,Yt)[n])){e.push(`L${o(this,Yt)[n+4]} ${o(this,Yt)[n+5]}`);continue}e.push(`C${o(this,Yt)[n]} ${o(this,Yt)[n+1]} ${o(this,Yt)[n+2]} ${o(this,Yt)[n+3]} ${o(this,Yt)[n+4]} ${o(this,Yt)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,r],a){const l=i-e,c=r-n;let u,h;switch(a){case 0:u=A(this,Pr,fl).call(this,o(this,Yt),e,r,l,-c),h=A(this,Pr,fl).call(this,o(this,tn),e,r,l,-c);break;case 90:u=A(this,Rr,pl).call(this,o(this,Yt),e,n,l,c),h=A(this,Rr,pl).call(this,o(this,tn),e,n,l,c);break;case 180:u=A(this,Pr,fl).call(this,o(this,Yt),i,n,-l,c),h=A(this,Pr,fl).call(this,o(this,tn),i,n,-l,c);break;case 270:u=A(this,Rr,pl).call(this,o(this,Yt),i,r,-l,-c),h=A(this,Rr,pl).call(this,o(this,tn),i,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return o(this,Tr)}getNewOutline(e,n){const{x:i,y:r,width:a,height:l}=o(this,Tr),[c,u,h,f]=o(this,So),g=a*h,v=l*f,y=i*h+c,E=r*f+u,C=new ud({x:o(this,tn)[0]*g+y,y:o(this,tn)[1]*v+E},o(this,So),o(this,dh),e,o(this,uh),n??o(this,Ri));for(let _=2;_<o(this,tn).length;_+=2)C.add({x:o(this,tn)[_]*g+y,y:o(this,tn)[_+1]*v+E});return C.getOutlines()}}So=new WeakMap,Tr=new WeakMap,Ri=new WeakMap,uh=new WeakMap,tn=new WeakMap,dh=new WeakMap,Yt=new WeakMap,Pr=new WeakSet,fl=function(e,n,i,r,a){const l=new Float64Array(e.length);for(let c=0,u=e.length;c<u;c+=2)l[c]=n+e[c]*r,l[c+1]=i+e[c+1]*a;return l},Rr=new WeakSet,pl=function(e,n,i,r,a){const l=new Float64Array(e.length);for(let c=0,u=e.length;c<u;c+=2)l[c]=n+e[c+1]*r,l[c+1]=i+e[c]*a;return l},xf=new WeakSet,Dw=function(e){const n=o(this,Yt);let i=n[4],r=n[5],a=i,l=r,c=i,u=r,h=i,f=r;const g=e?Math.max:Math.min;for(let _=6,P=n.length;_<P;_+=6){if(isNaN(n[_]))a=Math.min(a,n[_+4]),l=Math.min(l,n[_+5]),c=Math.max(c,n[_+4]),u=Math.max(u,n[_+5]),f<n[_+5]?(h=n[_+4],f=n[_+5]):f===n[_+5]&&(h=g(h,n[_+4]));else{const L=J.bezierBoundingBox(i,r,...n.slice(_,_+6));a=Math.min(a,L[0]),l=Math.min(l,L[1]),c=Math.max(c,L[2]),u=Math.max(u,L[3]),f<L[3]?(h=L[2],f=L[3]):f===L[3]&&(h=g(h,L[2]))}i=n[_+4],r=n[_+5]}const v=a-o(this,Ri),y=l-o(this,Ri),E=c-a+2*o(this,Ri),C=u-l+2*o(this,Ri);w(this,Tr,{x:v,y,width:E,height:C,lastPoint:[h,f]})};var fh,ph,Sn,Lr,Co,ae,gh,To,mh,vh,Cn,Po,yh,Em,bh,_m,Sf,Ow,Li,Fs,Cf,Nw,Wn,Ki;const hi=class hi{constructor({editor:t=null,uiManager:e=null}){m(this,yh);m(this,bh);m(this,Sf);m(this,Li);m(this,Cf);m(this,Wn);m(this,fh,A(this,Sf,Ow).bind(this));m(this,ph,A(this,Cf,Nw).bind(this));m(this,Sn,null);m(this,Lr,null);m(this,Co,void 0);m(this,ae,null);m(this,gh,!1);m(this,To,!1);m(this,mh,null);m(this,vh,void 0);m(this,Cn,null);m(this,Po,void 0);var n;t?(w(this,To,!1),w(this,Po,ut.HIGHLIGHT_COLOR),w(this,mh,t)):(w(this,To,!0),w(this,Po,ut.HIGHLIGHT_DEFAULT_COLOR)),w(this,Cn,(t==null?void 0:t._uiManager)||e),w(this,vh,o(this,Cn)._eventBus),w(this,Co,(t==null?void 0:t.color)||((n=o(this,Cn))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Ct(this,"_keyboardManager",new Zh([[["Escape","mac+Escape"],hi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],hi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],hi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],hi.prototype._moveToPrevious],[["Home","mac+Home"],hi.prototype._moveToBeginning],[["End","mac+End"],hi.prototype._moveToEnd]]))}renderButton(){const t=w(this,Sn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=o(this,Cn)._signal;t.addEventListener("click",A(this,Li,Fs).bind(this),{signal:e}),t.addEventListener("keydown",o(this,fh),{signal:e});const n=w(this,Lr,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=o(this,Co),t.append(n),t}renderMainDropdown(){const t=w(this,ae,A(this,yh,Em).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===o(this,Sn)){A(this,Li,Fs).call(this,t);return}const e=t.target.getAttribute("data-color");e&&A(this,bh,_m).call(this,e,t)}_moveToNext(t){var e,n;if(!o(this,Wn,Ki)){A(this,Li,Fs).call(this,t);return}if(t.target===o(this,Sn)){(e=o(this,ae).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=o(this,ae))==null?void 0:e.firstChild)||t.target===o(this,Sn)){o(this,Wn,Ki)&&this._hideDropdownFromKeyboard();return}o(this,Wn,Ki)||A(this,Li,Fs).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!o(this,Wn,Ki)){A(this,Li,Fs).call(this,t);return}(e=o(this,ae).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!o(this,Wn,Ki)){A(this,Li,Fs).call(this,t);return}(e=o(this,ae).lastChild)==null||e.focus()}hideDropdown(){var t;(t=o(this,ae))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",o(this,ph))}_hideDropdownFromKeyboard(){var t;if(!o(this,To)){if(!o(this,Wn,Ki)){(t=o(this,mh))==null||t.unselect();return}this.hideDropdown(),o(this,Sn).focus({preventScroll:!0,focusVisible:o(this,gh)})}}updateColor(t){if(o(this,Lr)&&(o(this,Lr).style.backgroundColor=t),!o(this,ae))return;const e=o(this,Cn).highlightColors.values();for(const n of o(this,ae).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=o(this,Sn))==null||t.remove(),w(this,Sn,null),w(this,Lr,null),(e=o(this,ae))==null||e.remove(),w(this,ae,null)}};fh=new WeakMap,ph=new WeakMap,Sn=new WeakMap,Lr=new WeakMap,Co=new WeakMap,ae=new WeakMap,gh=new WeakMap,To=new WeakMap,mh=new WeakMap,vh=new WeakMap,Cn=new WeakMap,Po=new WeakMap,yh=new WeakSet,Em=function(){const t=document.createElement("div"),e=o(this,Cn)._signal;t.addEventListener("contextmenu",Ge,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of o(this,Cn).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${n}`);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=i,r.setAttribute("aria-selected",i===o(this,Co)),r.addEventListener("click",A(this,bh,_m).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",o(this,fh),{signal:e}),t},bh=new WeakSet,_m=function(t,e){e.stopPropagation(),o(this,vh).dispatch("switchannotationeditorparams",{source:this,type:o(this,Po),value:t})},Sf=new WeakSet,Ow=function(t){hi._keyboardManager.exec(this,t)},Li=new WeakSet,Fs=function(t){if(o(this,Wn,Ki)){this.hideDropdown();return}if(w(this,gh,t.detail===0),window.addEventListener("pointerdown",o(this,ph),{signal:o(this,Cn)._signal}),o(this,ae)){o(this,ae).classList.remove("hidden");return}const e=w(this,ae,A(this,yh,Em).call(this));o(this,Sn).append(e)},Cf=new WeakSet,Nw=function(t){var e;(e=o(this,ae))!=null&&e.contains(t.target)||this.hideDropdown()},Wn=new WeakSet,Ki=function(){return o(this,ae)&&!o(this,ae).classList.contains("hidden")};let dd=hi;var Ro,wh,vs,kr,Lo,hn,Ah,Eh,Ir,Tn,De,en,Tf,ko,Mr,oe,Io,qn,_h,xh,xm,Sh,Sm,Pf,Bw,Rf,$w,Lf,jw,Ch,Cm,Fr,gl,ys,ma,kf,Hw,Mo,zu,Dr,ml,If,Uw,Mf,zw,Ff,Vw,Df,Gw;const St=class St extends It{constructor(e){super({...e,name:"highlightEditor"});m(this,xh);m(this,Sh);m(this,Pf);m(this,Rf);m(this,Lf);m(this,Ch);m(this,Fr);m(this,kf);m(this,Mo);m(this,Dr);m(this,If);m(this,Mf);m(this,Ro,null);m(this,wh,0);m(this,vs,void 0);m(this,kr,null);m(this,Lo,null);m(this,hn,null);m(this,Ah,null);m(this,Eh,0);m(this,Ir,null);m(this,Tn,null);m(this,De,null);m(this,en,!1);m(this,Tf,A(this,kf,Hw).bind(this));m(this,ko,null);m(this,Mr,void 0);m(this,oe,null);m(this,Io,"");m(this,qn,void 0);m(this,_h,"");this.color=e.color||St._defaultColor,w(this,qn,e.thickness||St._defaultThickness),w(this,Mr,e.opacity||St._defaultOpacity),w(this,vs,e.boxes||null),w(this,_h,e.methodOfCreation||""),w(this,Io,e.text||""),this._isDraggable=!1,e.highlightId>-1?(w(this,en,!0),A(this,Sh,Sm).call(this,e),A(this,Fr,gl).call(this)):(w(this,Ro,e.anchorNode),w(this,wh,e.anchorOffset),w(this,Ah,e.focusNode),w(this,Eh,e.focusOffset),A(this,xh,xm).call(this),A(this,Fr,gl).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=St.prototype;return Ct(this,"_keyboardManager",new Zh([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,en)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:o(this,qn),methodOfCreation:o(this,_h)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var i;It.initialize(e,n),St._defaultColor||(St._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case ut.HIGHLIGHT_DEFAULT_COLOR:St._defaultColor=n;break;case ut.HIGHLIGHT_THICKNESS:St._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return o(this,ko)}updateParams(e,n){switch(e){case ut.HIGHLIGHT_COLOR:A(this,Pf,Bw).call(this,n);break;case ut.HIGHLIGHT_THICKNESS:A(this,Rf,$w).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ut.HIGHLIGHT_DEFAULT_COLOR,St._defaultColor],[ut.HIGHLIGHT_THICKNESS,St._defaultThickness]]}get propertiesToUpdate(){return[[ut.HIGHLIGHT_COLOR,this.color||St._defaultColor],[ut.HIGHLIGHT_THICKNESS,o(this,qn)||St._defaultThickness],[ut.HIGHLIGHT_FREE,o(this,en)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(w(this,Lo,new dd({editor:this})),e.addColorPicker(o(this,Lo))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,Dr,ml).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,A(this,Dr,ml).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){A(this,Ch,Cm).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Fr,gl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?A(this,Ch,Cm).call(this):e&&(A(this,Fr,gl).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,a,l;const{drawLayer:n}=this.parent;let i;o(this,en)?(e=(e-this.rotation+360)%360,i=A(r=St,ys,ma).call(r,o(this,Tn).box,e)):i=A(a=St,ys,ma).call(a,this,e),n.rotate(o(this,De),e),n.rotate(o(this,oe),e),n.updateBox(o(this,De),i),n.updateBox(o(this,oe),A(l=St,ys,ma).call(l,o(this,hn).box,e))}render(){if(this.div)return this.div;const e=super.render();o(this,Io)&&(e.setAttribute("aria-label",o(this,Io)),e.setAttribute("role","mark")),o(this,en)?e.classList.add("free"):this.div.addEventListener("keydown",o(this,Tf),{signal:this._uiManager._signal});const n=w(this,Ir,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=o(this,kr);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),od(this,o(this,Ir),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(o(this,oe),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(o(this,oe),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:A(this,Mo,zu).call(this,!0);break;case 1:case 3:A(this,Mo,zu).call(this,!1);break}}select(){var e,n;super.select(),o(this,oe)&&((e=this.parent)==null||e.drawLayer.removeClass(o(this,oe),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(o(this,oe),"selected"))}unselect(){var e;super.unselect(),o(this,oe)&&((e=this.parent)==null||e.drawLayer.removeClass(o(this,oe),"selected"),o(this,en)||A(this,Mo,zu).call(this,!1))}get _mustFixPosition(){return!o(this,en)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(o(this,De),e),this.parent.drawLayer.show(o(this,oe),e))}static startHighlighting(e,n,{target:i,x:r,y:a}){const{x:l,y:c,width:u,height:h}=i.getBoundingClientRect(),f=C=>{A(this,Ff,Vw).call(this,e,C)},g=e._signal,v={capture:!0,passive:!1,signal:g},y=C=>{C.preventDefault(),C.stopPropagation()},E=C=>{i.removeEventListener("pointermove",f),window.removeEventListener("blur",E),window.removeEventListener("pointerup",E),window.removeEventListener("pointerdown",y,v),window.removeEventListener("contextmenu",Ge),A(this,Df,Gw).call(this,e,C)};window.addEventListener("blur",E,{signal:g}),window.addEventListener("pointerup",E,{signal:g}),window.addEventListener("pointerdown",y,v),window.addEventListener("contextmenu",Ge,{signal:g}),i.addEventListener("pointermove",f,{signal:g}),this._freeHighlight=new ud({x:r,y:a},[l,c,u,h],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,n,i){var E;const r=super.deserialize(e,n,i),{rect:[a,l,c,u],color:h,quadPoints:f}=e;r.color=J.makeHexColor(...h),w(r,Mr,e.opacity);const[g,v]=r.pageDimensions;r.width=(c-a)/g,r.height=(u-l)/v;const y=w(r,vs,[]);for(let C=0;C<f.length;C+=8)y.push({x:(f[4]-c)/g,y:(u-(1-f[C+5]))/v,width:(f[C+2]-f[C])/g,height:(f[C+5]-f[C+1])/v});return A(E=r,xh,xm).call(E),r}serialize(e=!1){if(this.isEmpty()||e)return null;const n=this.getRect(0,0),i=It._colorManager.convert(this.color);return{annotationType:xt.HIGHLIGHT,color:i,opacity:o(this,Mr),thickness:o(this,qn),quadPoints:A(this,If,Uw).call(this),outlines:A(this,Mf,zw).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:A(this,Dr,ml).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};Ro=new WeakMap,wh=new WeakMap,vs=new WeakMap,kr=new WeakMap,Lo=new WeakMap,hn=new WeakMap,Ah=new WeakMap,Eh=new WeakMap,Ir=new WeakMap,Tn=new WeakMap,De=new WeakMap,en=new WeakMap,Tf=new WeakMap,ko=new WeakMap,Mr=new WeakMap,oe=new WeakMap,Io=new WeakMap,qn=new WeakMap,_h=new WeakMap,xh=new WeakSet,xm=function(){const e=new ym(o(this,vs),.001);w(this,Tn,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=o(this,Tn).box;const n=new ym(o(this,vs),.0025,.001,this._uiManager.direction==="ltr");w(this,hn,n.getOutlines());const{lastPoint:i}=o(this,hn).box;w(this,ko,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Sh=new WeakSet,Sm=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var f,g;if(w(this,Tn,e),w(this,hn,e.getNewOutline(o(this,qn)/2+1.5,.0025)),n>=0)w(this,De,n),w(this,kr,i),this.parent.drawLayer.finalizeLine(n,e),w(this,oe,this.parent.drawLayer.highlightOutline(o(this,hn)));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(o(this,De),e),this.parent.drawLayer.updateBox(o(this,De),A(f=St,ys,ma).call(f,o(this,Tn).box,(v-this.rotation+360)%360)),this.parent.drawLayer.updateLine(o(this,oe),o(this,hn)),this.parent.drawLayer.updateBox(o(this,oe),A(g=St,ys,ma).call(g,o(this,hn).box,v))}const{x:a,y:l,width:c,height:u}=e.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=u;break;case 90:{const[v,y]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*y/v,this.height=u*v/y;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[v,y]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*y/v,this.height=u*v/y;break}}const{lastPoint:h}=o(this,hn).box;w(this,ko,[(h[0]-a)/c,(h[1]-l)/u])},Pf=new WeakSet,Bw=function(e){const n=r=>{var a,l;this.color=r,(a=this.parent)==null||a.drawLayer.changeColor(o(this,De),r),(l=o(this,Lo))==null||l.updateColor(r)},i=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},Rf=new WeakSet,$w=function(e){const n=o(this,qn),i=r=>{w(this,qn,r),A(this,Lf,jw).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},Lf=new WeakSet,jw=function(e){if(!o(this,en))return;A(this,Sh,Sm).call(this,{highlightOutlines:o(this,Tn).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},Ch=new WeakSet,Cm=function(){o(this,De)===null||!this.parent||(this.parent.drawLayer.remove(o(this,De)),w(this,De,null),this.parent.drawLayer.remove(o(this,oe)),w(this,oe,null))},Fr=new WeakSet,gl=function(e=this.parent){o(this,De)===null&&({id:We(this,De)._,clipPathId:We(this,kr)._}=e.drawLayer.highlight(o(this,Tn),this.color,o(this,Mr)),w(this,oe,e.drawLayer.highlightOutline(o(this,hn))),o(this,Ir)&&(o(this,Ir).style.clipPath=o(this,kr)))},ys=new WeakSet,ma=function({x:e,y:n,width:i,height:r},a){switch(a){case 90:return{x:1-n-r,y:e,width:r,height:i};case 180:return{x:1-e-i,y:1-n-r,width:i,height:r};case 270:return{x:n,y:1-e-i,width:r,height:i}}return{x:e,y:n,width:i,height:r}},kf=new WeakSet,Hw=function(e){St._keyboardManager.exec(this,e)},Mo=new WeakSet,zu=function(e){if(!o(this,Ro))return;const n=window.getSelection();e?n.setPosition(o(this,Ro),o(this,wh)):n.setPosition(o(this,Ah),o(this,Eh))},Dr=new WeakSet,ml=function(){return o(this,en)?this.rotation:0},If=new WeakSet,Uw=function(){if(o(this,en))return null;const[e,n]=this.pageDimensions,i=o(this,vs),r=new Float32Array(i.length*8);let a=0;for(const{x:l,y:c,width:u,height:h}of i){const f=l*e,g=(1-c-h)*n;r[a]=r[a+4]=f,r[a+1]=r[a+3]=g,r[a+2]=r[a+6]=f+u*e,r[a+5]=r[a+7]=g+h*n,a+=8}return r},Mf=new WeakSet,zw=function(e){return o(this,Tn).serialize(e,A(this,Dr,ml).call(this))},Ff=new WeakSet,Vw=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},Df=new WeakSet,Gw=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},m(St,ys),m(St,Ff),m(St,Df),gt(St,"_defaultColor",null),gt(St,"_defaultOpacity",1),gt(St,"_defaultThickness",12),gt(St,"_l10nPromise"),gt(St,"_type","highlight"),gt(St,"_editorType",xt.HIGHLIGHT),gt(St,"_freeHighlightId",-1),gt(St,"_freeHighlight",null),gt(St,"_freeHighlightClipId","");let fd=St;var Or,Nr,Th,Ph,Rh,Br,Xn,ki,un,$r,jr,Ii,Hr,Ur,bs,Of,Ww,Nf,qw,Bf,Xw,$f,Yw,Lh,Pm,jf,Kw,kh,Rm,Hf,Zw,Uf,Jw,zf,Qw,Vf,t1,Gf,e1,Mi,Ds,Ih,Lm,Fo,Vu,Do,Gu,ws,va,Mh,km,Oo,Wu,Wf,n1,Fh,Im,qf,i1,Xf,s1,Dh,Mm,No,qu,zr,vl;const Ht=class Ht extends It{constructor(e){super({...e,name:"inkEditor"});m(this,Of);m(this,Nf);m(this,Bf);m(this,$f);m(this,Lh);m(this,jf);m(this,kh);m(this,Hf);m(this,Uf);m(this,zf);m(this,Vf);m(this,Gf);m(this,Mi);m(this,Ih);m(this,Fo);m(this,Do);m(this,ws);m(this,Mh);m(this,Oo);m(this,Xf);m(this,Dh);m(this,No);m(this,zr);m(this,Or,0);m(this,Nr,0);m(this,Th,this.canvasPointermove.bind(this));m(this,Ph,this.canvasPointerleave.bind(this));m(this,Rh,this.canvasPointerup.bind(this));m(this,Br,this.canvasPointerdown.bind(this));m(this,Xn,null);m(this,ki,new Path2D);m(this,un,!1);m(this,$r,!1);m(this,jr,!1);m(this,Ii,null);m(this,Hr,0);m(this,Ur,0);m(this,bs,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){It.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case ut.INK_THICKNESS:Ht._defaultThickness=n;break;case ut.INK_COLOR:Ht._defaultColor=n;break;case ut.INK_OPACITY:Ht._defaultOpacity=n/100;break}}updateParams(e,n){switch(e){case ut.INK_THICKNESS:A(this,Of,Ww).call(this,n);break;case ut.INK_COLOR:A(this,Nf,qw).call(this,n);break;case ut.INK_OPACITY:A(this,Bf,Xw).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ut.INK_THICKNESS,Ht._defaultThickness],[ut.INK_COLOR,Ht._defaultColor||It._defaultLineColor],[ut.INK_OPACITY,Math.round(Ht._defaultOpacity*100)]]}get propertiesToUpdate(){return[[ut.INK_THICKNESS,this.thickness||Ht._defaultThickness],[ut.INK_COLOR,this.color||Ht._defaultColor||It._defaultLineColor],[ut.INK_OPACITY,Math.round(100*(this.opacity??Ht._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(A(this,Fo,Vu).call(this),A(this,Do,Gu).call(this)),this.isAttachedToDOM||(this.parent.add(this),A(this,ws,va).call(this)),A(this,zr,vl).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,o(this,Xn)&&(clearTimeout(o(this,Xn)),w(this,Xn,null)),(e=o(this,Ii))==null||e.disconnect(),w(this,Ii,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions,i=this.width*e,r=this.height*n;this.setDimensions(i,r)}enableEditMode(){o(this,un)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",o(this,Br),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",o(this,Br)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){o(this,un)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),w(this,un,!0),this.div.classList.add("disabled"),A(this,zr,vl).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||o(this,un)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),A(this,jf,Kw).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),A(this,kh,Rm).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),A(this,Ih,Lm).call(this,e)}canvasPointerleave(e){A(this,Ih,Lm).call(this,e)}get isResizable(){return!this.isEmpty()&&o(this,un)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,r,a,l]=A(this,$f,Yw).call(this);if(this.setAt(i,r,0,0),this.setDims(a,l),A(this,Fo,Vu).call(this),this.width){const[c,u]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*u),this.setAt(e*c,n*u,this.width*c,this.height*u),w(this,jr,!0),A(this,ws,va).call(this),this.setDims(this.width*c,this.height*u),A(this,Mi,Ds).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return A(this,Do,Gu).call(this),this.div}setDimensions(e,n){const i=Math.round(e),r=Math.round(n);if(o(this,Hr)===i&&o(this,Ur)===r)return;w(this,Hr,i),w(this,Ur,r),this.canvas.style.visibility="hidden";const[a,l]=this.parentDimensions;this.width=e/a,this.height=n/l,this.fixAndSetPosition(),o(this,un)&&A(this,Mh,km).call(this,e,n),A(this,ws,va).call(this),A(this,Mi,Ds).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,n,i){var C,_,P;if(e instanceof _w)return null;const r=super.deserialize(e,n,i);r.thickness=e.thickness,r.color=J.makeHexColor(...e.color),r.opacity=e.opacity;const[a,l]=r.pageDimensions,c=r.width*a,u=r.height*l,h=r.parentScale,f=e.thickness/2;w(r,un,!0),w(r,Hr,Math.round(c)),w(r,Ur,Math.round(u));const{paths:g,rect:v,rotation:y}=e;for(let{bezier:L}of g){L=A(C=Ht,qf,i1).call(C,L,v,y);const k=[];r.paths.push(k);let F=h*(L[0]-f),I=h*(L[1]-f);for(let S=2,T=L.length;S<T;S+=6){const D=h*(L[S]-f),B=h*(L[S+1]-f),U=h*(L[S+2]-f),V=h*(L[S+3]-f),G=h*(L[S+4]-f),Z=h*(L[S+5]-f);k.push([[F,I],[D,B],[U,V],[G,Z]]),F=G,I=Z}const M=A(this,Wf,n1).call(this,k);r.bezierPath2D.push(M)}const E=A(_=r,Dh,Mm).call(_);return w(r,Nr,Math.max(It.MIN_SIZE,E[2]-E[0])),w(r,Or,Math.max(It.MIN_SIZE,E[3]-E[1])),A(P=r,Mh,km).call(P,c,u),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=It._colorManager.convert(this.ctx.strokeStyle);return{annotationType:xt.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:A(this,Xf,s1).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Or=new WeakMap,Nr=new WeakMap,Th=new WeakMap,Ph=new WeakMap,Rh=new WeakMap,Br=new WeakMap,Xn=new WeakMap,ki=new WeakMap,un=new WeakMap,$r=new WeakMap,jr=new WeakMap,Ii=new WeakMap,Hr=new WeakMap,Ur=new WeakMap,bs=new WeakMap,Of=new WeakSet,Ww=function(e){const n=r=>{this.thickness=r,A(this,zr,vl).call(this)},i=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Nf=new WeakSet,qw=function(e){const n=r=>{this.color=r,A(this,Mi,Ds).call(this)},i=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Bf=new WeakSet,Xw=function(e){const n=r=>{this.opacity=r,A(this,Mi,Ds).call(this)};e/=100;const i=this.opacity;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$f=new WeakSet,Yw=function(){const{parentRotation:e,parentDimensions:[n,i]}=this;switch(e){case 90:return[0,i,i,n];case 180:return[n,i,n,i];case 270:return[n,0,i,n];default:return[0,0,n,i]}},Lh=new WeakSet,Pm=function(){const{ctx:e,color:n,opacity:i,thickness:r,parentScale:a,scaleFactor:l}=this;e.lineWidth=r*a/l,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${OR(i)}`},jf=new WeakSet,Kw=function(e,n){const i=this._uiManager._signal;this.canvas.addEventListener("contextmenu",Ge,{signal:i}),this.canvas.addEventListener("pointerleave",o(this,Ph),{signal:i}),this.canvas.addEventListener("pointermove",o(this,Th),{signal:i}),this.canvas.addEventListener("pointerup",o(this,Rh),{signal:i}),this.canvas.removeEventListener("pointerdown",o(this,Br)),this.isEditing=!0,o(this,jr)||(w(this,jr,!0),A(this,ws,va).call(this),this.thickness||(this.thickness=Ht._defaultThickness),this.color||(this.color=Ht._defaultColor||It._defaultLineColor),this.opacity??(this.opacity=Ht._defaultOpacity)),this.currentPath.push([e,n]),w(this,$r,!1),A(this,Lh,Pm).call(this),w(this,bs,()=>{A(this,zf,Qw).call(this),o(this,bs)&&window.requestAnimationFrame(o(this,bs))}),window.requestAnimationFrame(o(this,bs))},kh=new WeakSet,Rm=function(e,n){const[i,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===i&&n===r)return;const a=this.currentPath;let l=o(this,ki);if(a.push([e,n]),w(this,$r,!0),a.length<=2){l.moveTo(...a[0]),l.lineTo(e,n);return}a.length===3&&(w(this,ki,l=new Path2D),l.moveTo(...a[0])),A(this,Vf,t1).call(this,l,...a.at(-3),...a.at(-2),e,n)},Hf=new WeakSet,Zw=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);o(this,ki).lineTo(...e)},Uf=new WeakSet,Jw=function(e,n){w(this,bs,null),e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),A(this,kh,Rm).call(this,e,n),A(this,Hf,Zw).call(this);let i;if(this.currentPath.length!==1)i=A(this,Gf,e1).call(this);else{const u=[e,n];i=[[u,u.slice(),u.slice(),u]]}const r=o(this,ki),a=this.currentPath;this.currentPath=[],w(this,ki,new Path2D);const l=()=>{this.allRawPaths.push(a),this.paths.push(i),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(A(this,Fo,Vu).call(this),A(this,Do,Gu).call(this)),A(this,zr,vl).call(this))};this.addCommands({cmd:l,undo:c,mustExec:!0})},zf=new WeakSet,Qw=function(){if(!o(this,$r))return;w(this,$r,!1);const e=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),i=n.map(l=>l[0]),r=n.map(l=>l[1]);Math.min(...i)-e,Math.max(...i)+e,Math.min(...r)-e,Math.max(...r)+e;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const l of this.bezierPath2D)a.stroke(l);a.stroke(o(this,ki)),a.restore()},Vf=new WeakSet,t1=function(e,n,i,r,a,l,c){const u=(n+r)/2,h=(i+a)/2,f=(r+l)/2,g=(a+c)/2;e.bezierCurveTo(u+2*(r-u)/3,h+2*(a-h)/3,f+2*(r-f)/3,g+2*(a-g)/3,f,g)},Gf=new WeakSet,e1=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let i,[r,a]=e[0];for(i=1;i<e.length-2;i++){const[v,y]=e[i],[E,C]=e[i+1],_=(v+E)/2,P=(y+C)/2,L=[r+2*(v-r)/3,a+2*(y-a)/3],k=[_+2*(v-_)/3,P+2*(y-P)/3];n.push([[r,a],L,k,[_,P]]),[r,a]=[_,P]}const[l,c]=e[i],[u,h]=e[i+1],f=[r+2*(l-r)/3,a+2*(c-a)/3],g=[u+2*(l-u)/3,h+2*(c-h)/3];return n.push([[r,a],f,g,[u,h]]),n},Mi=new WeakSet,Ds=function(){if(this.isEmpty()){A(this,Oo,Wu).call(this);return}A(this,Lh,Pm).call(this);const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),A(this,Oo,Wu).call(this);for(const i of this.bezierPath2D)n.stroke(i)},Ih=new WeakSet,Lm=function(e){this.canvas.removeEventListener("pointerleave",o(this,Ph)),this.canvas.removeEventListener("pointermove",o(this,Th)),this.canvas.removeEventListener("pointerup",o(this,Rh)),this.canvas.addEventListener("pointerdown",o(this,Br),{signal:this._uiManager._signal}),o(this,Xn)&&clearTimeout(o(this,Xn)),w(this,Xn,setTimeout(()=>{w(this,Xn,null),this.canvas.removeEventListener("contextmenu",Ge)},10)),A(this,Uf,Jw).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Fo=new WeakSet,Vu=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Do=new WeakSet,Gu=function(){w(this,Ii,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),o(this,Ii).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=o(this,Ii))==null||e.disconnect(),w(this,Ii,null)},{once:!0})},ws=new WeakSet,va=function(){if(!o(this,jr))return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),A(this,Oo,Wu).call(this)},Mh=new WeakSet,km=function(e,n){const i=A(this,No,qu).call(this),r=(e-i)/o(this,Nr),a=(n-i)/o(this,Or);this.scaleFactor=Math.min(r,a)},Oo=new WeakSet,Wu=function(){const e=A(this,No,qu).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},Wf=new WeakSet,n1=function(e){const n=new Path2D;for(let i=0,r=e.length;i<r;i++){const[a,l,c,u]=e[i];i===0&&n.moveTo(...a),n.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}return n},Fh=new WeakSet,Im=function(e,n,i){const[r,a,l,c]=n;switch(i){case 0:for(let u=0,h=e.length;u<h;u+=2)e[u]+=r,e[u+1]=c-e[u+1];break;case 90:for(let u=0,h=e.length;u<h;u+=2){const f=e[u];e[u]=e[u+1]+r,e[u+1]=f+a}break;case 180:for(let u=0,h=e.length;u<h;u+=2)e[u]=l-e[u],e[u+1]+=a;break;case 270:for(let u=0,h=e.length;u<h;u+=2){const f=e[u];e[u]=l-e[u+1],e[u+1]=c-f}break;default:throw new Error("Invalid rotation")}return e},qf=new WeakSet,i1=function(e,n,i){const[r,a,l,c]=n;switch(i){case 0:for(let u=0,h=e.length;u<h;u+=2)e[u]-=r,e[u+1]=c-e[u+1];break;case 90:for(let u=0,h=e.length;u<h;u+=2){const f=e[u];e[u]=e[u+1]-a,e[u+1]=f-r}break;case 180:for(let u=0,h=e.length;u<h;u+=2)e[u]=l-e[u],e[u+1]-=a;break;case 270:for(let u=0,h=e.length;u<h;u+=2){const f=e[u];e[u]=c-e[u+1],e[u+1]=l-f}break;default:throw new Error("Invalid rotation")}return e},Xf=new WeakSet,s1=function(e,n,i,r){var h,f;const a=[],l=this.thickness/2,c=e*n+l,u=e*i+l;for(const g of this.paths){const v=[],y=[];for(let E=0,C=g.length;E<C;E++){const[_,P,L,k]=g[E];if(_[0]===k[0]&&_[1]===k[1]&&C===1){const V=e*_[0]+c,G=e*_[1]+u;v.push(V,G),y.push(V,G);break}const F=e*_[0]+c,I=e*_[1]+u,M=e*P[0]+c,S=e*P[1]+u,T=e*L[0]+c,D=e*L[1]+u,B=e*k[0]+c,U=e*k[1]+u;E===0&&(v.push(F,I),y.push(F,I)),v.push(M,S,T,D,B,U),y.push(M,S),E===C-1&&y.push(B,U)}a.push({bezier:A(h=Ht,Fh,Im).call(h,v,r,this.rotation),points:A(f=Ht,Fh,Im).call(f,y,r,this.rotation)})}return a},Dh=new WeakSet,Mm=function(){let e=1/0,n=-1/0,i=1/0,r=-1/0;for(const a of this.paths)for(const[l,c,u,h]of a){const f=J.bezierBoundingBox(...l,...c,...u,...h);e=Math.min(e,f[0]),i=Math.min(i,f[1]),n=Math.max(n,f[2]),r=Math.max(r,f[3])}return[e,i,n,r]},No=new WeakSet,qu=function(){return o(this,un)?Math.ceil(this.thickness*this.parentScale):0},zr=new WeakSet,vl=function(e=!1){if(this.isEmpty())return;if(!o(this,un)){A(this,Mi,Ds).call(this);return}const n=A(this,Dh,Mm).call(this),i=A(this,No,qu).call(this);w(this,Nr,Math.max(It.MIN_SIZE,n[2]-n[0])),w(this,Or,Math.max(It.MIN_SIZE,n[3]-n[1]));const r=Math.ceil(i+o(this,Nr)*this.scaleFactor),a=Math.ceil(i+o(this,Or)*this.scaleFactor),[l,c]=this.parentDimensions;this.width=r/l,this.height=a/c,this.setAspectRatio(r,a);const u=this.translationX,h=this.translationY;this.translationX=-n[0],this.translationY=-n[1],A(this,ws,va).call(this),A(this,Mi,Ds).call(this),w(this,Hr,r),w(this,Ur,a),this.setDims(r,a);const f=e?i/this.scaleFactor/2:0;this.translate(u-this.translationX-f,h-this.translationY-f)},m(Ht,Wf),m(Ht,Fh),m(Ht,qf),gt(Ht,"_defaultColor",null),gt(Ht,"_defaultOpacity",1),gt(Ht,"_defaultThickness",1),gt(Ht,"_type","ink"),gt(Ht,"_editorType",xt.INK);let Tm=Ht;var _e,xe,As,Fi,Es,Bo,Yn,Di,Kn,Pn,Oh,Vr,yl,Gr,bl,$o,Xu,Nh,Dm,Yf,r1,Kf,a1,Bh,Om,jo,Yu,Zf,o1;const _l=class _l extends It{constructor(e){super({...e,name:"stampEditor"});m(this,Vr);m(this,Gr);m(this,$o);m(this,Nh);m(this,Yf);m(this,Kf);m(this,Bh);m(this,jo);m(this,Zf);m(this,_e,null);m(this,xe,null);m(this,As,null);m(this,Fi,null);m(this,Es,null);m(this,Bo,"");m(this,Yn,null);m(this,Di,null);m(this,Kn,null);m(this,Pn,!1);m(this,Oh,!1);w(this,Fi,e.bitmapUrl),w(this,Es,e.bitmapFile)}static initialize(e,n){It.initialize(e,n)}static get supportedTypes(){return Ct(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Ct(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(xt.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,n;o(this,xe)&&(w(this,_e,null),this._uiManager.imageManager.deleteId(o(this,xe)),(e=o(this,Yn))==null||e.remove(),w(this,Yn,null),(n=o(this,Di))==null||n.disconnect(),w(this,Di,null),o(this,Kn)&&(clearTimeout(o(this,Kn)),w(this,Kn,null))),super.remove()}rebuild(){if(!this.parent){o(this,xe)&&A(this,$o,Xu).call(this);return}super.rebuild(),this.div!==null&&(o(this,xe)&&o(this,Yn)===null&&A(this,$o,Xu).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(o(this,As)||o(this,_e)||o(this,Fi)||o(this,Es)||o(this,xe))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),o(this,_e)?A(this,Nh,Dm).call(this):A(this,$o,Xu).call(this),this.width){const[i,r]=this.parentDimensions;this.setAt(e*i,n*r,this.width*i,this.height*r)}return this.div}getImageForAltText(){return o(this,Yn)}static deserialize(e,n,i){if(e instanceof xw)return null;const r=super.deserialize(e,n,i),{rect:a,bitmapUrl:l,bitmapId:c,isSvg:u,accessibilityData:h}=e;c&&i.imageManager.isValidId(c)?w(r,xe,c):w(r,Fi,l),w(r,Pn,u);const[f,g]=r.pageDimensions;return r.width=(a[2]-a[0])/f,r.height=(a[3]-a[1])/g,h&&(r.altTextData=h),r}serialize(e=!1,n=null){if(this.isEmpty())return null;const i={annotationType:xt.STAMP,bitmapId:o(this,xe),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:o(this,Pn),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=A(this,jo,Yu).call(this,!0),i.accessibilityData=this.altTextData,i;const{decorative:r,altText:a}=this.altTextData;if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),n===null)return i;n.stamps||(n.stamps=new Map);const l=o(this,Pn)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(o(this,xe)))n.stamps.set(o(this,xe),{area:l,serialized:i}),i.bitmap=A(this,jo,Yu).call(this,!1);else if(o(this,Pn)){const c=n.stamps.get(o(this,xe));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,jo,Yu).call(this,!1))}return i}};_e=new WeakMap,xe=new WeakMap,As=new WeakMap,Fi=new WeakMap,Es=new WeakMap,Bo=new WeakMap,Yn=new WeakMap,Di=new WeakMap,Kn=new WeakMap,Pn=new WeakMap,Oh=new WeakMap,Vr=new WeakSet,yl=function(e,n=!1){if(!e){this.remove();return}w(this,_e,e.bitmap),n||(w(this,xe,e.id),w(this,Pn,e.isSvg)),e.file&&w(this,Bo,e.file.name),A(this,Nh,Dm).call(this)},Gr=new WeakSet,bl=function(){w(this,As,null),this._uiManager.enableWaiting(!1),o(this,Yn)&&this.div.focus()},$o=new WeakSet,Xu=function(){if(o(this,xe)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,xe)).then(i=>A(this,Vr,yl).call(this,i,!0)).finally(()=>A(this,Gr,bl).call(this));return}if(o(this,Fi)){const i=o(this,Fi);w(this,Fi,null),this._uiManager.enableWaiting(!0),w(this,As,this._uiManager.imageManager.getFromUrl(i).then(r=>A(this,Vr,yl).call(this,r)).finally(()=>A(this,Gr,bl).call(this)));return}if(o(this,Es)){const i=o(this,Es);w(this,Es,null),this._uiManager.enableWaiting(!0),w(this,As,this._uiManager.imageManager.getFromFile(i).then(r=>A(this,Vr,yl).call(this,r)).finally(()=>A(this,Gr,bl).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=_l.supportedTypesStr;const n=this._uiManager._signal;w(this,As,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);A(this,Vr,yl).call(this,r)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>A(this,Gr,bl).call(this))),e.click()},Nh=new WeakSet,Dm=function(){const{div:e}=this;let{width:n,height:i}=o(this,_e);const[r,a]=this.pageDimensions,l=.75;if(this.width)n=this.width*r,i=this.height*a;else if(n>l*r||i>l*a){const f=Math.min(l*r/n,l*a/i);n*=f,i*=f}const[c,u]=this.parentDimensions;this.setDims(n*c/r,i*u/a),this._uiManager.enableWaiting(!1);const h=w(this,Yn,document.createElement("canvas"));e.append(h),e.hidden=!1,A(this,Bh,Om).call(this,n,i),A(this,Zf,o1).call(this),o(this,Oh)||(this.parent.addUndoableEditor(this),w(this,Oh,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,Bo)&&h.setAttribute("aria-label",o(this,Bo))},Yf=new WeakSet,r1=function(e,n){var l;const[i,r]=this.parentDimensions;this.width=e/i,this.height=n/r,this.setDims(e,n),(l=this._initialOptions)!=null&&l.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,o(this,Kn)!==null&&clearTimeout(o(this,Kn)),w(this,Kn,setTimeout(()=>{w(this,Kn,null),A(this,Bh,Om).call(this,e,n)},200))},Kf=new WeakSet,a1=function(e,n){const{width:i,height:r}=o(this,_e);let a=i,l=r,c=o(this,_e);for(;a>2*e||l>2*n;){const u=a,h=l;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(a,l);f.getContext("2d").drawImage(c,0,0,u,h,0,0,a,l),c=f.transferToImageBitmap()}return c},Bh=new WeakSet,Om=function(e,n){e=Math.ceil(e),n=Math.ceil(n);const i=o(this,Yn);if(!i||i.width===e&&i.height===n)return;i.width=e,i.height=n;const r=o(this,Pn)?o(this,_e):A(this,Kf,a1).call(this,e,n);if(this._uiManager.hasMLManager&&!this.hasAltText()){const c=new OffscreenCanvas(e,n).getContext("2d");c.drawImage(r,0,0,r.width,r.height,0,0,e,n),this._uiManager.mlGuess({service:"image-to-text",request:{data:c.getImageData(0,0,e,n).data,width:e,height:n,channels:4}}).then(u=>{const h=(u==null?void 0:u.output)||"";this.parent&&h&&!this.hasAltText()&&(this.altTextData={altText:h,decorative:!1})})}const a=i.getContext("2d");a.filter=this._uiManager.hcmFilter,a.drawImage(r,0,0,r.width,r.height,0,0,e,n)},jo=new WeakSet,Yu=function(e){if(e){if(o(this,Pn)){const r=this._uiManager.imageManager.getSvgUrl(o(this,xe));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=o(this,_e),n.getContext("2d").drawImage(o(this,_e),0,0),n.toDataURL()}if(o(this,Pn)){const[n,i]=this.pageDimensions,r=Math.round(this.width*n*Cs.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*Cs.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,a);return l.getContext("2d").drawImage(o(this,_e),0,0,o(this,_e).width,o(this,_e).height,0,0,r,a),l.transferToImageBitmap()}return structuredClone(o(this,_e))},Zf=new WeakSet,o1=function(){this._uiManager._signal&&(w(this,Di,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&A(this,Yf,r1).call(this,n.width,n.height)})),o(this,Di).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=o(this,Di))==null||e.disconnect(),w(this,Di,null)},{once:!0}))},gt(_l,"_type","stamp"),gt(_l,"_editorType",xt.STAMP);let Fm=_l;var Wr,Ho,Zn,qr,Oi,Ni,Bi,nn,_s,Uo,zo,Oe,rt,xs,Jf,l1,$h,Bm,jh,$m,Hh,jm,Vo,Ku;const pn=class pn{constructor({uiManager:t,pageIndex:e,div:n,accessibilityManager:i,annotationLayer:r,drawLayer:a,textLayer:l,viewport:c,l10n:u}){m(this,Jf);m(this,$h);m(this,jh);m(this,Hh);m(this,Vo);m(this,Wr,void 0);m(this,Ho,!1);m(this,Zn,null);m(this,qr,null);m(this,Oi,null);m(this,Ni,null);m(this,Bi,null);m(this,nn,new Map);m(this,_s,!1);m(this,Uo,!1);m(this,zo,!1);m(this,Oe,null);m(this,rt,void 0);const h=[...o(pn,xs).values()];if(!pn._initialized){pn._initialized=!0;for(const f of h)f.initialize(u,t)}t.registerEditorTypes(h),w(this,rt,t),this.pageIndex=e,this.div=n,w(this,Wr,i),w(this,Zn,r),this.viewport=c,w(this,Oe,l),this.drawLayer=a,o(this,rt).addLayer(this)}get isEmpty(){return o(this,nn).size===0}get isInvisible(){return this.isEmpty&&o(this,rt).getMode()===xt.NONE}updateToolbar(t){o(this,rt).updateToolbar(t)}updateMode(t=o(this,rt).getMode()){switch(A(this,Vo,Ku).call(this),t){case xt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case xt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of o(pn,xs).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=o(this,Oe))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(o(this,rt).getMode()!==xt.INK)return;if(!t){for(const n of o(this,nn).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){o(this,rt).setEditingState(t)}addCommands(t){o(this,rt).addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=o(this,Zn))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of o(this,nn).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(o(this,rt).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!o(this,Zn))return;const e=o(this,Zn).getEditableAnnotations();for(const n of e){if(n.hide(),o(this,rt).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}}disable(){var i;w(this,zo,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of o(this,nn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(o(this,Zn)){const r=o(this,Zn).getEditableAnnotations();for(const a of r){const{id:l}=a.data;if(o(this,rt).isDeletedAnnotationElement(l))continue;let c=e.get(l);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=t.get(l),c&&(o(this,rt).addChangedExistingAnnotation(c),c.renderAnnotationElement(a),c.show(!1)),a.show()}}A(this,Vo,Ku).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of o(pn,xs).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),w(this,zo,!1)}getEditableAnnotation(t){var e;return((e=o(this,Zn))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){o(this,rt).getActive()!==t&&o(this,rt).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,(t=o(this,Oe))!=null&&t.div&&!o(this,Ni)&&(w(this,Ni,A(this,Jf,l1).bind(this)),o(this,Oe).div.addEventListener("pointerdown",o(this,Ni),{signal:o(this,rt)._signal}),o(this,Oe).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,(t=o(this,Oe))!=null&&t.div&&o(this,Ni)&&(o(this,Oe).div.removeEventListener("pointerdown",o(this,Ni)),w(this,Ni,null),o(this,Oe).div.classList.remove("highlighting"))}enableClick(){if(o(this,Oi))return;const t=o(this,rt)._signal;w(this,Oi,this.pointerdown.bind(this)),w(this,qr,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",o(this,Oi),{signal:t}),this.div.addEventListener("pointerup",o(this,qr),{signal:t})}disableClick(){o(this,Oi)&&(this.div.removeEventListener("pointerdown",o(this,Oi)),this.div.removeEventListener("pointerup",o(this,qr)),w(this,Oi,null),w(this,qr,null))}attach(t){o(this,nn).set(t.id,t);const{annotationElementId:e}=t;e&&o(this,rt).isDeletedAnnotationElement(e)&&o(this,rt).removeDeletedAnnotationElement(t)}detach(t){var e;o(this,nn).delete(t.id),(e=o(this,Wr))==null||e.removePointerInTextLayer(t.contentDiv),!o(this,zo)&&t.annotationElementId&&o(this,rt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),o(this,rt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,o(this,Uo)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(o(this,rt).addDeletedAnnotationElement(t.annotationElementId),It.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),o(this,rt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),o(this,rt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!o(this,Bi)&&(t._focusEventsAllowed=!1,w(this,Bi,setTimeout(()=>{w(this,Bi,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:o(this,rt)._signal}),e.focus())},0))),t._structTreeParentId=(n=o(this,Wr))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return o(this,rt).getId()}get _signal(){return o(this,rt)._signal}canCreateNewEmptyEditor(){var t;return(t=o(this,$h,Bm))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){o(this,rt).updateToolbar(t),o(this,rt).updateMode(t);const{offsetX:n,offsetY:i}=A(this,Hh,jm).call(this),r=this.getNextId(),a=A(this,jh,$m).call(this,{parent:this,id:r,x:n,y:i,uiManager:o(this,rt),isCentered:!0,...e});a&&this.add(a)}deserialize(t){var e;return((e=o(pn,xs).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,o(this,rt)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),r=A(this,jh,$m).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:o(this,rt),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(A(this,Hh,jm).call(this),!0)}setSelected(t){o(this,rt).setSelected(t)}toggleSelected(t){o(this,rt).toggleSelected(t)}isSelected(t){return o(this,rt).isSelected(t)}unselect(t){o(this,rt).unselect(t)}pointerup(t){const{isMac:e}=Ve.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&o(this,_s)){if(w(this,_s,!1),!o(this,Ho)){w(this,Ho,!0);return}if(o(this,rt).getMode()===xt.STAMP){o(this,rt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(o(this,rt).getMode()===xt.HIGHLIGHT&&this.enableTextSelection(),o(this,_s)){w(this,_s,!1);return}const{isMac:e}=Ve.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;w(this,_s,!0);const n=o(this,rt).getActive();w(this,Ho,!n||n.isEmpty())}findNewParent(t,e,n){const i=o(this,rt).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}destroy(){var t,e;((t=o(this,rt).getActive())==null?void 0:t.parent)===this&&(o(this,rt).commitOrRemove(),o(this,rt).setActiveEditor(null)),o(this,Bi)&&(clearTimeout(o(this,Bi)),w(this,Bi,null));for(const n of o(this,nn).values())(e=o(this,Wr))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,o(this,nn).clear(),o(this,rt).removeLayer(this)}render({viewport:t}){this.viewport=t,Qr(this.div,t);for(const e of o(this,rt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){o(this,rt).commitOrRemove(),A(this,Vo,Ku).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Qr(this.div,{rotation:n}),e!==n)for(const i of o(this,nn).values())i.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return o(this,rt).viewParameters.realScale}};Wr=new WeakMap,Ho=new WeakMap,Zn=new WeakMap,qr=new WeakMap,Oi=new WeakMap,Ni=new WeakMap,Bi=new WeakMap,nn=new WeakMap,_s=new WeakMap,Uo=new WeakMap,zo=new WeakMap,Oe=new WeakMap,rt=new WeakMap,xs=new WeakMap,Jf=new WeakSet,l1=function(t){if(o(this,rt).unselectAll(),t.target===o(this,Oe).div){const{isMac:e}=Ve.platform;if(t.button!==0||t.ctrlKey&&e)return;o(this,rt).showAllEditors("highlight",!0,!0),o(this,Oe).div.classList.add("free"),fd.startHighlighting(this,o(this,rt).direction==="ltr",t),o(this,Oe).div.addEventListener("pointerup",()=>{o(this,Oe).div.classList.remove("free")},{once:!0,signal:o(this,rt)._signal}),t.preventDefault()}},$h=new WeakSet,Bm=function(){return o(pn,xs).get(o(this,rt).getMode())},jh=new WeakSet,$m=function(t){const e=o(this,$h,Bm);return e?new e.prototype.constructor(t):null},Hh=new WeakSet,jm=function(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),l=Math.min(window.innerWidth,t+n),c=Math.min(window.innerHeight,e+i),u=(r+l)/2-t,h=(a+c)/2-e,[f,g]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:f,offsetY:g}},Vo=new WeakSet,Ku=function(){w(this,Uo,!0);for(const t of o(this,nn).values())t.isEmpty()&&t.remove();w(this,Uo,!1)},gt(pn,"_initialized",!1),m(pn,xs,new Map([mm,Tm,Fm,fd].map(t=>[t._editorType,t])));let Nm=pn;var Jn,Uh,le,Ss,zh,Um,Vh,zm,Qf,c1;const ve=class ve{constructor({pageIndex:t}){m(this,Vh);m(this,Qf);m(this,Jn,null);m(this,Uh,0);m(this,le,new Map);m(this,Ss,new Map);this.pageIndex=t}setParent(t){if(!o(this,Jn)){w(this,Jn,t);return}if(o(this,Jn)!==t){if(o(this,le).size>0)for(const e of o(this,le).values())e.remove(),t.append(e);w(this,Jn,t)}}static get _svgFactory(){return Ct(this,"_svgFactory",new g0)}highlight(t,e,n,i=!1){const r=We(this,Uh)._++,a=A(this,Vh,zm).call(this,t.box);a.classList.add("highlight"),t.free&&a.classList.add("free");const l=ve._svgFactory.createElement("defs");a.append(l);const c=ve._svgFactory.createElement("path");l.append(c);const u=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",u),c.setAttribute("d",t.toSVGPath()),i&&o(this,Ss).set(r,c);const h=A(this,Qf,c1).call(this,l,u),f=ve._svgFactory.createElement("use");return a.append(f),a.setAttribute("fill",e),a.setAttribute("fill-opacity",n),f.setAttribute("href",`#${u}`),o(this,le).set(r,a),{id:r,clipPathId:`url(#${h})`}}highlightOutline(t){const e=We(this,Uh)._++,n=A(this,Vh,zm).call(this,t.box);n.classList.add("highlightOutline");const i=ve._svgFactory.createElement("defs");n.append(i);const r=ve._svgFactory.createElement("path");i.append(r);const a=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",a),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let l;if(t.free){n.classList.add("free");const h=ve._svgFactory.createElement("mask");i.append(h),l=`mask_p${this.pageIndex}_${e}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const f=ve._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=ve._svgFactory.createElement("use");h.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const c=ve._svgFactory.createElement("use");n.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return n.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),o(this,le).set(e,n),e}finalizeLine(t,e){const n=o(this,Ss).get(t);o(this,Ss).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){o(this,le).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),o(this,Ss).delete(t)}updatePath(t,e){o(this,Ss).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;A(n=ve,zh,Um).call(n,o(this,le).get(t),e)}show(t,e){o(this,le).get(t).classList.toggle("hidden",!e)}rotate(t,e){o(this,le).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){o(this,le).get(t).setAttribute("fill",e)}changeOpacity(t,e){o(this,le).get(t).setAttribute("fill-opacity",e)}addClass(t,e){o(this,le).get(t).classList.add(e)}removeClass(t,e){o(this,le).get(t).classList.remove(e)}remove(t){o(this,Jn)!==null&&(o(this,le).get(t).remove(),o(this,le).delete(t))}destroy(){w(this,Jn,null);for(const t of o(this,le).values())t.remove();o(this,le).clear()}};Jn=new WeakMap,Uh=new WeakMap,le=new WeakMap,Ss=new WeakMap,zh=new WeakSet,Um=function(t,{x:e=0,y:n=0,width:i=1,height:r=1}={}){const{style:a}=t;a.top=`${100*n}%`,a.left=`${100*e}%`,a.width=`${100*i}%`,a.height=`${100*r}%`},Vh=new WeakSet,zm=function(t){var n;const e=ve._svgFactory.create(1,1,!0);return o(this,Jn).append(e),e.setAttribute("aria-hidden",!0),A(n=ve,zh,Um).call(n,e,t),e},Qf=new WeakSet,c1=function(t,e){const n=ve._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=ve._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},m(ve,zh);let Hm=ve;var fk=ot.AbortException,pk=ot.AnnotationEditorLayer,gk=ot.AnnotationEditorParamsType,mk=ot.AnnotationEditorType,vk=ot.AnnotationEditorUIManager,h1=ot.AnnotationLayer,u1=ot.AnnotationMode,yk=ot.CMapCompressionType,bk=ot.ColorPicker,wk=ot.DOMSVGFactory,Ak=ot.DrawLayer,Ek=ot.FeatureTest,_0=ot.GlobalWorkerOptions,_k=ot.ImageKind,xk=ot.InvalidPDFException,Sk=ot.MissingPDFException,Ck=ot.OPS,Tk=ot.Outliner,Pk=ot.PDFDataRangeTransport,Rk=ot.PDFDateString,Lk=ot.PDFWorker,kk=ot.PasswordResponses,Ik=ot.PermissionFlag,Mk=ot.PixelsPerInch,Fk=ot.RenderingCancelledException,d1=ot.TextLayer,Dk=ot.UnexpectedResponseException,Ok=ot.Util,Nk=ot.VerbosityLevel,Bk=ot.XfaLayer,$k=ot.build,jk=ot.createValidAbsoluteUrl,Hk=ot.fetchData,f1=ot.getDocument,Uk=ot.getFilenameFromUrl,zk=ot.getPdfFilenameFromUrl,Vk=ot.getXfaPageViewport,Gk=ot.isDataScheme,Wk=ot.isPdfFile,qk=ot.noContextMenu,Xk=ot.normalizeUnicode,Yk=ot.renderTextLayer,Kk=ot.setLayerDimensions,Zk=ot.shadow,Jk=ot.updateTextLayer,p1=ot.version;const Qk=Object.freeze(Object.defineProperty({__proto__:null,AbortException:fk,AnnotationEditorLayer:pk,AnnotationEditorParamsType:gk,AnnotationEditorType:mk,AnnotationEditorUIManager:vk,AnnotationLayer:h1,AnnotationMode:u1,CMapCompressionType:yk,ColorPicker:bk,DOMSVGFactory:wk,DrawLayer:Ak,FeatureTest:Ek,GlobalWorkerOptions:_0,ImageKind:_k,InvalidPDFException:xk,MissingPDFException:Sk,OPS:Ck,Outliner:Tk,PDFDataRangeTransport:Pk,PDFDateString:Rk,PDFWorker:Lk,PasswordResponses:kk,PermissionFlag:Ik,PixelsPerInch:Mk,RenderingCancelledException:Fk,TextLayer:d1,UnexpectedResponseException:Dk,Util:Ok,VerbosityLevel:Nk,XfaLayer:Bk,build:$k,createValidAbsoluteUrl:jk,fetchData:Hk,getDocument:f1,getFilenameFromUrl:Uk,getPdfFilenameFromUrl:zk,getXfaPageViewport:Vk,isDataScheme:Gk,isPdfFile:Wk,noContextMenu:qk,normalizeUnicode:Xk,renderTextLayer:Yk,setLayerDimensions:Kk,shadow:Zk,updateTextLayer:Jk,version:p1},Symbol.toStringTag,{value:"Module"}));var de=function(s,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,r;n<i;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return s.concat(r||Array.prototype.slice.call(t))},tI=["onCopy","onCut","onPaste"],eI=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],nI=["onFocus","onBlur"],iI=["onInput","onInvalid","onReset","onSubmit"],sI=["onLoad","onError"],rI=["onKeyDown","onKeyPress","onKeyUp"],aI=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],oI=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],lI=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],cI=["onSelect"],hI=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],uI=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],dI=["onScroll"],fI=["onWheel"],pI=["onAnimationStart","onAnimationEnd","onAnimationIteration"],gI=["onTransitionEnd"],mI=["onToggle"],vI=["onChange"],yI=de(de(de(de(de(de(de(de(de(de(de(de(de(de(de(de(de(de([],tI,!0),eI,!0),nI,!0),iI,!0),sI,!0),rI,!0),aI,!0),oI,!0),lI,!0),cI,!0),hI,!0),uI,!0),dI,!0),fI,!0),pI,!0),gI,!0),vI,!0),mI,!0);function g1(s,t){var e={};return yI.forEach(function(n){var i=s[n];i&&(t?e[n]=function(r){return i(r,t(n))}:e[n]=i)}),e}function tu(s){var t=!1,e=new Promise(function(n,i){s.then(function(r){return!t&&n(r)}).catch(function(r){return!t&&i(r)})});return{promise:e,cancel:function(){t=!0}}}function m1(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s))for(t=0;t<s.length;t++)s[t]&&(e=m1(s[t]))&&(n&&(n+=" "),n+=e);else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function _p(){for(var s,t,e=0,n="";e<arguments.length;)(s=arguments[e++])&&(t=m1(s))&&(n&&(n+=" "),n+=t);return n}var bI=dt.env.NODE_ENV==="production",og="Invariant failed";function Bt(s,t){if(!s){if(bI)throw new Error(og);var e=typeof t=="function"?t():t,n=e?"".concat(og,": ").concat(e):og;throw new Error(n)}}var wI=dt.env.NODE_ENV!=="production",v1=function(){};if(wI){var AI=function(t,e){var n=arguments.length;e=new Array(n>1?n-1:0);for(var i=1;i<n;i++)e[i-1]=arguments[i];var r=0,a="Warning: "+t.replace(/%s/g,function(){return e[r++]});typeof console<"u"&&console.error(a);try{throw new Error(a)}catch{}};v1=function(s,t,e){var n=arguments.length;e=new Array(n>2?n-2:0);for(var i=2;i<n;i++)e[i-2]=arguments[i];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");s||AI.apply(null,[t].concat(e))}}var EI=v1;const Re=Wm(EI);var Fv=Object.prototype.hasOwnProperty;function Dv(s,t,e){for(e of s.keys())if(xa(e,t))return e}function xa(s,t){var e,n,i;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((n=s.length)===t.length)for(;n--&&xa(s[n],t[n]););return n===-1}if(e===Set){if(s.size!==t.size)return!1;for(n of s)if(i=n,i&&typeof i=="object"&&(i=Dv(t,i),!i)||!t.has(i))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(n of s)if(i=n[0],i&&typeof i=="object"&&(i=Dv(t,i),!i)||!xa(n[1],t.get(i)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((n=s.byteLength)===t.byteLength)for(;n--&&s.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===t.byteLength)for(;n--&&s[n]===t[n];);return n===-1}if(!e||typeof s=="object"){n=0;for(e in s)if(Fv.call(s,e)&&++n&&!Fv.call(t,e)||!(e in t)||!xa(s[e],t[e]))return!1;return Object.keys(t).length===n}}return s!==s&&t!==t}const y1=H.createContext(null);function Sa({children:s,type:t}){return O.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:s})}const _I="noopener noreferrer nofollow";class xI{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Bt(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(t){Bt(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Bt(this.pdfDocument,"PDF document not loaded."),Bt(t,"Destination is not specified."),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Bt(Array.isArray(e),`"${e}" is not a valid destination array.`);const n=e[0];new Promise(i=>{Bt(this.pdfDocument,"PDF document not loaded."),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{i(r)}).catch(()=>{Bt(!1,`"${n}" is not a valid page reference.`)}):typeof n=="number"?i(n):Bt(!1,`"${n}" is not a valid destination reference.`)}).then(i=>{const r=i+1;Bt(this.pdfViewer,"PDF viewer is not initialized."),Bt(r>=1&&r<=this.pagesCount,`"${r}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:i,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Bt(this.pdfViewer,"PDF viewer is not initialized."),Bt(t>=1&&t<=this.pagesCount,`"${t}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||_I,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Ov={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},xp=typeof document<"u",b1=xp&&window.location.protocol==="file:";function SI(s){return typeof s<"u"}function ks(s){return SI(s)&&s!==null}function CI(s){return typeof s=="string"}function TI(s){return s instanceof ArrayBuffer}function PI(s){return Bt(xp,"isBlob can only be used in a browser environment"),s instanceof Blob}function Vm(s){return CI(s)&&/^data:/.test(s)}function Nv(s){Bt(Vm(s),"Invalid data URI.");const[t="",e=""]=s.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function RI(){return xp&&window.devicePixelRatio||1}const w1="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Bv(){Re(!b1,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${w1}`)}function LI(){Re(!b1,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${w1}`)}function na(s){s!=null&&s.cancel&&s.cancel()}function Gm(s,t){return Object.defineProperty(s,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.view[3]},configurable:!0}),s}function kI(s){return s.name==="RenderingCancelledException"}function II(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=i=>{if(!i.target)return e(new Error("Error while reading a file."));const{error:r}=i.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}function MI(s,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function Ko(){return H.useReducer(MI,{value:void 0,error:void 0})}var FI=function(s,t,e,n){function i(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function l(h){try{u(n.next(h))}catch(f){a(f)}}function c(h){try{u(n.throw(h))}catch(f){a(f)}}function u(h){h.done?r(h.value):i(h.value).then(l,c)}u((n=n.apply(s,t||[])).next())})},$v=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e};const{PDFDataRangeTransport:DI}=Qk,OI=(s,t)=>{switch(t){case Ov.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");s(e);break}case Ov.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");s(e);break}}};function jv(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const NI=H.forwardRef(function(t,e){var{children:n,className:i,error:r="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:l,file:c,inputRef:u,imageResourcesPath:h,loading:f="Loading PDFâ¦",noData:g="No PDF file specified.",onItemClick:v,onLoadError:y,onLoadProgress:E,onLoadSuccess:C,onPassword:_=OI,onSourceError:P,onSourceSuccess:L,options:k,renderMode:F,rotate:I}=t,M=$v(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[S,T]=Ko(),{value:D,error:B}=S,[U,V]=Ko(),{value:G,error:Z}=U,Y=H.useRef(new xI),$=H.useRef([]),W=H.useRef(void 0),q=H.useRef(void 0);c&&c!==W.current&&jv(c)&&(Re(!xa(c,W.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),W.current=c),k&&k!==q.current&&(Re(!xa(k,q.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),q.current=k);const wt=H.useRef({scrollPageIntoView:tt=>{const{dest:pt,pageNumber:ht,pageIndex:et=ht-1}=tt;if(v){v({dest:pt,pageIndex:et,pageNumber:ht});return}const Tt=$.current[et];if(Tt){Tt.scrollIntoView();return}Re(!1,`An internal link leading to page ${ht} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});H.useImperativeHandle(e,()=>({linkService:Y,pages:$,viewer:wt}),[]);function Et(){L&&L()}function z(){B&&(Re(!1,B.toString()),P&&P(B))}function it(){T({type:"RESET"})}H.useEffect(it,[c,T]);const st=H.useCallback(()=>FI(this,void 0,void 0,function*(){if(!c)return null;if(typeof c=="string")return Vm(c)?{data:Nv(c)}:(Bv(),{url:c});if(c instanceof DI)return{range:c};if(TI(c))return{data:c};if(xp&&PI(c))return{data:yield II(c)};if(Bt(typeof c=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),Bt(jv(c),"Invalid parameter object: need either .data, .range or .url"),"url"in c&&typeof c.url=="string"){if(Vm(c.url)){const{url:tt}=c,pt=$v(c,["url"]),ht=Nv(tt);return Object.assign({data:ht},pt)}Bv()}return c}),[c]);H.useEffect(()=>{const tt=tu(st());return tt.promise.then(pt=>{T({type:"RESOLVE",value:pt})}).catch(pt=>{T({type:"REJECT",error:pt})}),()=>{na(tt)}},[st,T]),H.useEffect(()=>{if(!(typeof D>"u")){if(D===!1){z();return}Et()}},[D]);function Q(){G&&(C&&C(G),$.current=new Array(G.numPages),Y.current.setDocument(G))}function ct(){Z&&(Re(!1,Z.toString()),y&&y(Z))}H.useEffect(function(){V({type:"RESET"})},[V,D]),H.useEffect(function(){if(!D)return;const pt=Object.assign(Object.assign({},D),k),ht=f1(pt);E&&(ht.onProgress=E),_&&(ht.onPassword=_);const et=ht;return et.promise.then(Tt=>{V({type:"RESOLVE",value:Tt})}).catch(Tt=>{et.destroyed||V({type:"REJECT",error:Tt})}),()=>{et.destroy()}},[k,V,D]),H.useEffect(()=>{if(!(typeof G>"u")){if(G===!1){ct();return}Q()}},[G]),H.useEffect(function(){Y.current.setViewer(wt.current),Y.current.setExternalLinkRel(a),Y.current.setExternalLinkTarget(l)},[a,l]);const nt=H.useCallback((tt,pt)=>{$.current[tt]=pt},[]),at=H.useCallback(tt=>{delete $.current[tt]},[]),X=H.useMemo(()=>({imageResourcesPath:h,linkService:Y.current,onItemClick:v,pdf:G,registerPage:nt,renderMode:F,rotate:I,unregisterPage:at}),[h,v,G,nt,F,I,at]),K=H.useMemo(()=>g1(M,()=>G),[M,G]);function ft(){return O.jsx(y1.Provider,{value:X,children:n})}function mt(){return c?G==null?O.jsx(Sa,{type:"loading",children:typeof f=="function"?f():f}):G===!1?O.jsx(Sa,{type:"error",children:typeof r=="function"?r():r}):ft():O.jsx(Sa,{type:"no-data",children:typeof g=="function"?g():g})}return O.jsx("div",Object.assign({className:_p("react-pdf__Document",i),ref:u,style:{"--scale-factor":"1"}},K,{children:mt()}))});function A1(){return H.useContext(y1)}function E1(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=s.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(r){e.forEach(function(a){typeof a=="function"?a(r):a&&(a.current=r)})}}const _1=H.createContext(null),x1={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},BI=/^H(\d+)$/;function $I(s){return s in x1}function Sp(s){return"children"in s}function S1(s){return Sp(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function jI(s){const t={};if(Sp(s)){const{role:e}=s,n=e.match(BI);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if($I(e)){const i=x1[e];i&&(t.role=i)}}return t}function C1(s){const t={};if(Sp(s)){if(s.alt!==void 0&&(t["aria-label"]=s.alt),s.lang!==void 0&&(t.lang=s.lang),S1(s)){const[e]=s.children;if(e){const n=C1(e);return Object.assign(Object.assign({},t),n)}}}else"id"in s&&(t["aria-owns"]=s.id);return t}function HI(s){return s?Object.assign(Object.assign({},jI(s)),C1(s)):null}function T1({className:s,node:t}){const e=H.useMemo(()=>HI(t),[t]),n=H.useMemo(()=>!Sp(t)||S1(t)?null:t.children.map((i,r)=>O.jsx(T1,{node:i},r)),[t]);return O.jsx("span",Object.assign({className:s},e,{children:n}))}function Cp(){return H.useContext(_1)}function UI(){const s=Cp();Bt(s,"Unable to find Page context.");const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=s,[n,i]=Ko(),{value:r,error:a}=n,{customTextRenderer:l,page:c}=s;function u(){r&&e&&e(r)}function h(){a&&(Re(!1,a.toString()),t&&t(a))}return H.useEffect(function(){i({type:"RESET"})},[i,c]),H.useEffect(function(){if(l||!c)return;const g=tu(c.getStructTree()),v=g;return g.promise.then(y=>{i({type:"RESOLVE",value:y})}).catch(y=>{i({type:"REJECT",error:y})}),()=>na(v)},[l,c,i]),H.useEffect(()=>{if(r!==void 0){if(r===!1){h();return}u()}},[r]),r?O.jsx(T1,{className:"react-pdf__Page__structTree structTree",node:r}):null}const Hv=u1;function zI(s){const t=Cp();Bt(t,"Unable to find Page context.");const e=Object.assign(Object.assign({},t),s),{_className:n,canvasBackground:i,devicePixelRatio:r=RI(),onRenderError:a,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:h,rotate:f,scale:g}=e,{canvasRef:v}=s;Bt(c,"Attempted to render page canvas, but no page was specified.");const y=H.useRef(null);function E(){c&&l&&l(Gm(c,g))}function C(k){kI(k)||(Re(!1,k.toString()),a&&a(k))}const _=H.useMemo(()=>c.getViewport({scale:g*r,rotation:f}),[r,c,f,g]),P=H.useMemo(()=>c.getViewport({scale:g,rotation:f}),[c,f,g]);H.useEffect(function(){if(!c)return;c.cleanup();const{current:F}=y;if(!F)return;F.width=_.width,F.height=_.height,F.style.width=`${Math.floor(P.width)}px`,F.style.height=`${Math.floor(P.height)}px`,F.style.visibility="hidden";const I={annotationMode:u?Hv.ENABLE_FORMS:Hv.ENABLE,canvasContext:F.getContext("2d",{alpha:!1}),viewport:_};i&&(I.background=i);const M=c.render(I),S=M;return M.promise.then(()=>{F.style.visibility="",E()}).catch(C),()=>na(S)},[i,c,u,_,P]);const L=H.useCallback(()=>{const{current:k}=y;k&&(k.width=0,k.height=0)},[]);return H.useEffect(()=>L,[L]),O.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:E1(v,y),style:{display:"block",userSelect:"none"},children:h?O.jsx(UI,{}):null})}function VI(s){return"str"in s}function GI(){const s=Cp();Bt(s,"Unable to find Page context.");const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:r,page:a,pageIndex:l,pageNumber:c,rotate:u,scale:h}=s;Bt(a,"Attempted to load page text content, but no page was specified.");const[f,g]=Ko(),{value:v,error:y}=f,E=H.useRef(null),C=H.useRef(void 0);Re(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){v&&n&&n(v)}function P(){y&&(Re(!1,y.toString()),e&&e(y))}H.useEffect(function(){g({type:"RESET"})},[a,g]),H.useEffect(function(){if(!a)return;const T=tu(a.getTextContent()),D=T;return T.promise.then(B=>{g({type:"RESOLVE",value:B})}).catch(B=>{g({type:"REJECT",error:B})}),()=>na(D)},[a,g]),H.useEffect(()=>{if(v!==void 0){if(v===!1){P();return}_()}},[v]);const L=H.useCallback(()=>{r&&r()},[r]),k=H.useCallback(S=>{Re(!1,S.toString()),i&&i(S)},[i]);function F(){const S=C.current;S&&S.classList.add("active")}function I(){const S=C.current;S&&S.classList.remove("active")}const M=H.useMemo(()=>a.getViewport({scale:h,rotation:u}),[a,u,h]);return H.useLayoutEffect(function(){if(!a||!v)return;const{current:T}=E;if(!T)return;T.innerHTML="";const D=a.streamTextContent({includeMarkedContent:!0}),B={container:T,textContentSource:D,viewport:M},U=new d1(B),V=U;return U.render().then(()=>{const G=document.createElement("div");G.className="endOfContent",T.append(G),C.current=G;const Z=T.querySelectorAll('[role="presentation"]');if(t){let Y=0;v.items.forEach(($,W)=>{if(!VI($))return;const q=Z[Y];if(!q)return;const wt=t(Object.assign({pageIndex:l,pageNumber:c,itemIndex:W},$));q.innerHTML=wt,Y+=$.str&&$.hasEOL?2:1})}L()}).catch(k),()=>na(V)},[t,k,L,a,l,c,v,M]),O.jsx("div",{className:_p("react-pdf__Page__textContent","textLayer"),onMouseUp:I,onMouseDown:F,ref:E})}function WI(){const s=A1(),t=Cp();Bt(t,"Unable to find Page context.");const e=Object.assign(Object.assign({},s),t),{imageResourcesPath:n,linkService:i,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:u,pdf:h,renderForms:f,rotate:g,scale:v=1}=e;Bt(h,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),Bt(u,"Attempted to load page annotations, but no page was specified."),Bt(i,"Attempted to load page annotations, but no linkService was specified.");const[y,E]=Ko(),{value:C,error:_}=y,P=H.useRef(null);Re(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function L(){C&&a&&a(C)}function k(){_&&(Re(!1,_.toString()),r&&r(_))}H.useEffect(function(){E({type:"RESET"})},[E,u]),H.useEffect(function(){if(!u)return;const T=tu(u.getAnnotations()),D=T;return T.promise.then(B=>{E({type:"RESOLVE",value:B})}).catch(B=>{E({type:"REJECT",error:B})}),()=>{na(D)}},[E,u]),H.useEffect(()=>{if(C!==void 0){if(C===!1){k();return}L()}},[C]);function F(){c&&c()}function I(S){Re(!1,`${S}`),l&&l(S)}const M=H.useMemo(()=>u.getViewport({scale:v,rotation:g}),[u,g,v]);return H.useEffect(function(){if(!h||!u||!i||!C)return;const{current:T}=P;if(!T)return;const D=M.clone({dontFlip:!0}),B={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:T,l10n:null,page:u,viewport:D},U={annotations:C,annotationStorage:h.annotationStorage,div:T,imageResourcesPath:n,linkService:i,page:u,renderForms:f,viewport:D};T.innerHTML="";try{new h1(B).render(U),F()}catch(V){I(V)}return()=>{}},[C,n,i,u,h,f,M]),O.jsx("div",{className:_p("react-pdf__Page__annotations","annotationLayer"),ref:P})}var qI=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e};const Uv=1;function XI(s){const t=A1(),e=Object.assign(Object.assign({},t),s),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:a,children:l,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:f,error:g="Failed to load the page.",height:v,inputRef:y,loading:E="Loading pageâ¦",noData:C="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:P,onGetStructTreeError:L,onGetStructTreeSuccess:k,onGetTextError:F,onGetTextSuccess:I,onLoadError:M,onLoadSuccess:S,onRenderAnnotationLayerError:T,onRenderAnnotationLayerSuccess:D,onRenderError:B,onRenderSuccess:U,onRenderTextLayerError:V,onRenderTextLayerSuccess:G,pageIndex:Z,pageNumber:Y,pdf:$,registerPage:W,renderAnnotationLayer:q=!0,renderForms:wt=!1,renderMode:Et="canvas",renderTextLayer:z=!0,rotate:it,scale:st=Uv,unregisterPage:Q,width:ct}=e,nt=qI(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[at,X]=Ko(),{value:K,error:ft}=at,mt=H.useRef(null);Bt($,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const tt=ks(Y)?Y-1:Z??null,pt=Y??(ks(Z)?Z+1:null),ht=it??(K?K.rotate:null),et=H.useMemo(()=>{if(!K)return null;let Jt=1;const Xt=st??Uv;if(ct||v){const Me=K.getViewport({scale:1,rotation:ht});ct?Jt=ct/Me.width:v&&(Jt=v/Me.height)}return Xt*Jt},[v,K,ht,st,ct]);H.useEffect(function(){return()=>{ks(tt)&&i&&Q&&Q(tt)}},[i,$,tt,Q]);function Tt(){if(S){if(!K||!et)return;S(Gm(K,et))}if(i&&W){if(!ks(tt)||!mt.current)return;W(tt,mt.current)}}function qt(){ft&&(Re(!1,ft.toString()),M&&M(ft))}H.useEffect(function(){X({type:"RESET"})},[X,$,tt]),H.useEffect(function(){if(!$||!pt)return;const Xt=tu($.getPage(pt)),Me=Xt;return Xt.promise.then(b=>{X({type:"RESOLVE",value:b})}).catch(b=>{X({type:"REJECT",error:b})}),()=>na(Me)},[X,$,pt]),H.useEffect(()=>{if(K!==void 0){if(K===!1){qt();return}Tt()}},[K,et]);const ne=H.useMemo(()=>K&&ks(tt)&&pt&&ks(ht)&&ks(et)?{_className:n,canvasBackground:r,customTextRenderer:h,devicePixelRatio:f,onGetAnnotationsError:_,onGetAnnotationsSuccess:P,onGetStructTreeError:L,onGetStructTreeSuccess:k,onGetTextError:F,onGetTextSuccess:I,onRenderAnnotationLayerError:T,onRenderAnnotationLayerSuccess:D,onRenderError:B,onRenderSuccess:U,onRenderTextLayerError:V,onRenderTextLayerSuccess:G,page:K,pageIndex:tt,pageNumber:pt,renderForms:wt,renderTextLayer:z,rotate:ht,scale:et}:null,[n,r,h,f,_,P,L,k,F,I,T,D,B,U,V,G,K,tt,pt,wt,z,ht,et]),ue=H.useMemo(()=>g1(nt,()=>K&&(et?Gm(K,et):void 0)),[nt,K,et]),$t=`${tt}@${et}/${ht}`;function Rt(){switch(Et){case"custom":return Bt(u,'renderMode was set to "custom", but no customRenderer was passed.'),O.jsx(u,{},`${$t}_custom`);case"none":return null;case"canvas":default:return O.jsx(zI,{canvasRef:a},`${$t}_canvas`)}}function Lt(){return z?O.jsx(GI,{},`${$t}_text`):null}function ie(){return q?O.jsx(WI,{},`${$t}_annotations`):null}function lt(){return O.jsxs(_1.Provider,{value:ne,children:[Rt(),Lt(),ie(),l]})}function Ie(){return pt?$===null||K===void 0||K===null?O.jsx(Sa,{type:"loading",children:typeof E=="function"?E():E}):$===!1||K===!1?O.jsx(Sa,{type:"error",children:typeof g=="function"?g():g}):lt():O.jsx(Sa,{type:"no-data",children:typeof C=="function"?C():C})}return O.jsx("div",Object.assign({className:_p(n,c),"data-page-number":pt,ref:E1(y,mt),style:{"--scale-factor":`${et}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},ue,{children:Ie()}))}LI();_0.workerSrc="pdf.worker.mjs";const P1="SET_ZOOM_LEVEL",lg=s=>({type:P1,value:s}),R1="SET_PDF_PAGINATED",YI=s=>({type:R1,value:s}),L1="SET_NUM_PAGES",zv=s=>({type:L1,value:s}),k1="SET_CURRENT_PAGE",I1="SET_CURRENT_MAIN_STATE",Vv=s=>({type:k1,value:s}),Ji={defaultZoomLevel:1,zoomLevel:1,zoomJump:.1,paginated:!0,numPages:0,currentPage:1},KI=(s=Ji,t)=>{switch(t.type){case P1:{const{value:e}=t;return{...s,zoomLevel:e}}case R1:{const{value:e}=t;return{...s,paginated:e}}case L1:{const{value:e}=t;return{...s,numPages:e}}case k1:{const{value:e}=t;return{...s,currentPage:e}}case I1:{const{value:e}=t;return{...s,mainState:e}}default:return s}},Qo=H.createContext({state:Ji,dispatch:()=>null}),ZI=({children:s,mainState:t})=>{var i,r,a,l,c,u,h;const[e,n]=H.useReducer(KI,{...Ji,defaultZoomLevel:((r=(i=t.config)==null?void 0:i.pdfZoom)==null?void 0:r.defaultZoom)??Ji.defaultZoomLevel,zoomLevel:((l=(a=t.config)==null?void 0:a.pdfZoom)==null?void 0:l.defaultZoom)??Ji.zoomLevel,zoomJump:((u=(c=t.config)==null?void 0:c.pdfZoom)==null?void 0:u.zoomJump)??Ji.zoomJump,paginated:(h=t.config)!=null&&h.pdfVerticalScrollByDefault?!1:Ji.paginated,mainState:t});return H.useEffect(()=>{n({type:I1,value:t})},[t]),O.jsx(Qo.Provider,{value:{state:e,dispatch:n},children:s})},M1=({pageNum:s})=>{const{state:{mainState:t,paginated:e,zoomLevel:n,numPages:i,currentPage:r}}=H.useContext(Qo),{t:a}=ra(),l=(t==null?void 0:t.rendererRect)||null,c=s??r;return O.jsxs(JI,{id:"pdf-page-wrapper",$lastPage:c>=i,children:[!e&&O.jsx(QI,{id:"pdf-page-info",children:a("pdfPluginPageNumber",{currentPage:c,allPagesCount:i})}),O.jsx(XI,{pageNumber:c||r,scale:n,height:((l==null?void 0:l.height)??100)-100,width:((l==null?void 0:l.width)??100)-100,loading:a("pdfPluginLoading")})]})},JI=bt.div`
  margin: ${s=>s.$lastPage?"20px 0":void 0};
`,QI=bt.div`
  padding: 0 0 10px 10px;
  color: ${s=>s.theme.textTertiary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,t2=()=>{const{state:{numPages:s}}=H.useContext(Qo),t=[];for(let e=0;e<s;e++)t.push(O.jsx(M1,{pageNum:e+1},e+1));return O.jsx(O.Fragment,{children:t})},e2=()=>{const{state:{mainState:s,paginated:t},dispatch:e}=H.useContext(Qo),{t:n}=ra(),i=(s==null?void 0:s.currentDocument)||null;return H.useEffect(()=>{e(zv(Ji.numPages))},[i]),!i||i.fileData===void 0?null:O.jsx(n2,{file:i.fileData,onLoadSuccess:({numPages:r})=>e(zv(r)),loading:O.jsx("span",{children:n("pdfPluginLoading")}),children:t?O.jsx(M1,{}):O.jsx(t2,{})})},n2=bt(NI)`
  display: flex;
  flex-direction: column;
  margin: 0 auto;
`,i2=s=>O.jsx(F1,{...s,reverse:!0}),s2=s=>O.jsx(F1,{...s}),F1=s=>{const{color:t,size:e,reverse:n}=s;return O.jsx("svg",{width:e||"100%",height:e||"100%",style:{transform:`${n?"rotate(180deg)":""}`},viewBox:"0 0 12 12",version:"1.1",children:O.jsx("g",{id:"Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:O.jsx("g",{id:"Rounded",transform:"translate(-548.000000, -1000.000000)",children:O.jsx("g",{id:"AV",transform:"translate(100.000000, 852.000000)",children:O.jsx("g",{id:"-Round-/-AV-/-skip_next",transform:"translate(442.000000, 142.000000)",children:O.jsxs("g",{children:[O.jsx("rect",{id:"Rectangle-Copy-52",x:"0",y:"0",width:"24",height:"24"}),O.jsx("path",{d:"M7.58,16.89 L13.35,12.82 C13.91,12.42 13.91,11.58 13.35,11.19 L7.58,7.11 C6.91,6.65 6,7.12 6,7.93 L6,16.07 C6,16.88 6.91,17.35 7.58,16.89 Z M16,7 L16,17 C16,17.55 16.45,18 17,18 C17.55,18 18,17.55 18,17 L18,7 C18,6.45 17.55,6 17,6 C16.45,6 16,6.45 16,7 Z",id:"icon_color",fill:t||"#aaa"})]})})})})})})},r2=s=>{const{color:t,size:e,reverse:n}=s;return O.jsxs("svg",{width:e||"100%",height:e||"100%",style:{transform:`${n?"rotate(180deg)":""}`},id:"Layer_1",viewBox:"0 0 24 24",children:[O.jsx("path",{d:"M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z",fill:t||"#aaa"}),O.jsx("polygon",{points:"12 11 12 15.59 10.71 14.29 9.29 15.71 13 19.41 16.71 15.71 15.29 14.29 14 15.59 14 11 12 11",fill:t||"#aaa"})]})},a2=s=>O.jsx(D1,{...s}),o2=s=>O.jsx(D1,{...s,reverse:!0}),D1=s=>{const{color:t,size:e,reverse:n}=s;return O.jsx("svg",{width:e||"100%",height:e||"100%",viewBox:"0 0 32 32",version:"1.1",children:O.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:O.jsx("g",{id:"search-plus-icon",fill:t||"#aaa",children:O.jsx("path",{id:"search-plus",d:n?"M 13 13 L 16 13 L 19 13 L 19 16 L 16 16 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z":"M 13 13 L 13 10 L 16 10 L 16 13 L 19 13 L 19 16 L 16 16 L 16 19 L 13 19 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z"})})})})},l2=s=>{const{color:t,size:e}=s;return O.jsx("svg",{width:e||"100%",height:e||"100%",viewBox:"0 0 24 24",children:O.jsx("path",{fill:t||"#aaa",d:"M9.29,13.29,4,18.59V17a1,1,0,0,0-2,0v4a1,1,0,0,0,.08.38,1,1,0,0,0,.54.54A1,1,0,0,0,3,22H7a1,1,0,0,0,0-2H5.41l5.3-5.29a1,1,0,0,0-1.42-1.42ZM5.41,4H7A1,1,0,0,0,7,2H3a1,1,0,0,0-.38.08,1,1,0,0,0-.54.54A1,1,0,0,0,2,3V7A1,1,0,0,0,4,7V5.41l5.29,5.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM21,16a1,1,0,0,0-1,1v1.59l-5.29-5.3a1,1,0,0,0-1.42,1.42L18.59,20H17a1,1,0,0,0,0,2h4a1,1,0,0,0,.38-.08,1,1,0,0,0,.54-.54A1,1,0,0,0,22,21V17A1,1,0,0,0,21,16Zm.92-13.38a1,1,0,0,0-.54-.54A1,1,0,0,0,21,2H17a1,1,0,0,0,0,2h1.59l-5.3,5.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L20,5.41V7a1,1,0,0,0,2,0V3A1,1,0,0,0,21.92,2.62Z"})})},c2=s=>{const{color:t,size:e,reverse:n}=s;return O.jsx("svg",{width:e||"100%",height:e||"100%",style:{transform:`${n?"rotate(90deg)":""}`},version:"1.1",id:"Scroll_1",viewBox:"0 0 297 297",xmlSpace:"preserve",children:O.jsx("path",{fill:t||"#aaa",d:`M206.004,200.723h-31.231V96.277h31.231c0.005,0,0.014,0,0.019,0c5.289,0,9.575-4.287,9.575-9.574
  c0-2.342-0.841-4.488-2.236-6.151L156.168,3.851C154.36,1.428,151.515,0,148.492,0c-3.023,0-5.868,1.428-7.675,3.851L83.302,80.98
  c-2.166,2.902-2.507,6.779-0.883,10.017c1.624,3.236,4.936,5.28,8.559,5.28h31.231v104.445H90.978c-3.623,0-6.934,2.044-8.559,5.28
  c-1.624,3.237-1.283,7.114,0.883,10.017l57.513,77.129c1.808,2.424,4.652,3.852,7.675,3.852c3.023,0,5.868-1.428,7.676-3.852
  l57.514-77.129c2.164-2.902,2.507-6.779,0.883-10.017C212.938,202.767,209.627,200.723,206.004,200.723z`})})},h2=()=>{const{state:{currentPage:s,numPages:t},dispatch:e}=H.useContext(Qo),{t:n}=ra();return O.jsxs(u2,{id:"pdf-pagination",children:[O.jsx(O1,{id:"pdf-pagination-prev",onClick:()=>e(Vv(s-1)),disabled:s===1,children:O.jsx(i2,{color:"#000",size:"50%"})}),O.jsx(f2,{id:"pdf-pagination-info",children:n("pdfPluginPageNumber",{currentPage:s,allPagesCount:t})}),O.jsx(d2,{id:"pdf-pagination-next",onClick:()=>e(Vv(s+1)),disabled:s>=t,children:O.jsx(s2,{color:"#000",size:"50%"})})]})},u2=bt.div`
  display: flex;
  align-items: center;
`,O1=bt(lp)`
  width: 30px;
  height: 30px;
  margin: 0 5px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,d2=bt(O1)`
  margin: 0 20px 0 5px;
`,f2=bt.div`
  color: ${s=>s.theme.textPrimary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,p2=()=>{const{t:s}=ra(),{state:{mainState:t,paginated:e,zoomLevel:n,numPages:i,zoomJump:r,defaultZoomLevel:a},dispatch:l}=H.useContext(Qo),c=(t==null?void 0:t.currentDocument)||null;return O.jsxs(g2,{id:"pdf-controls",children:[e&&i>1&&O.jsx(h2,{}),(c==null?void 0:c.fileData)&&O.jsx(m2,{id:"pdf-download",href:c==null?void 0:c.fileData,download:(c==null?void 0:c.fileName)||(c==null?void 0:c.uri),title:s("downloadButtonLabel"),children:O.jsx(r2,{color:"#000",size:"75%"})}),O.jsx(vu,{id:"pdf-zoom-out",onMouseDown:()=>l(lg(n-r)),children:O.jsx(o2,{color:"#000",size:"80%"})}),O.jsx(vu,{id:"pdf-zoom-in",onMouseDown:()=>l(lg(n+r)),children:O.jsx(a2,{color:"#000",size:"80%"})}),O.jsx(vu,{id:"pdf-zoom-reset",onMouseDown:()=>l(lg(a)),disabled:n===a,children:O.jsx(l2,{color:"#000",size:"70%"})}),i>1&&O.jsx(vu,{id:"pdf-toggle-pagination",onMouseDown:()=>l(YI(!e)),children:O.jsx(c2,{color:"#000",size:"70%",reverse:e})})]})},g2=bt.div`
  display: flex;
  position: sticky;
  top: 0;
  left: 0;
  z-index: 1;
  justify-content: flex-end;
  padding: 8px;
  background-color: ${s=>s.theme.tertiary};
  box-shadow: 0px 2px 3px #00000033;

  @media (max-width: 768px) {
    padding: 6px;
  }
`,vu=bt(lp)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,m2=bt(ob)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`;_0.workerSrc=new URL(`https://unpkg.com/pdfjs-dist@${p1}/build/pdf.worker.min.mjs`).toString();const Tp=({mainState:s})=>O.jsx(ZI,{mainState:s,children:O.jsxs(v2,{id:"pdf-renderer","data-testid":"pdf-renderer",children:[O.jsx(p2,{}),O.jsx(e2,{})]})});Tp.fileTypes=["pdf","application/pdf"];Tp.weight=0;const v2=bt.div`
  display: flex;
  flex-direction: column;
  flex: 1;

  /* width */
  &::-webkit-scrollbar {
    ${s=>s.theme.disableThemeScrollbar?"":"width: 10px"};
  }
  /* Track */
  &::-webkit-scrollbar-track {
    /* background: ${s=>s.theme.secondary}; */
  }
  /* Handle */
  &::-webkit-scrollbar-thumb {
    background: ${s=>s.theme.tertiary};
  }
  /* Handle on hover */
  &::-webkit-scrollbar-thumb:hover {
    background: ${s=>s.theme.primary};
  }
`,y2=bt(Vi)`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  height: 100%;
  background-color: white;
  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),
    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);
  background-size: 20px 20px;
  background-position:
    0 0,
    0 10px,
    10px -10px,
    -10px 0px;
`,Pp=s=>O.jsx(y2,{...s});Pp.fileTypes=["png","image/png"];Pp.weight=0;let ji,sn,pd=[];const b2=()=>{var s=ze(2,0);if(s===18761)sn=!0;else if(s===19789)sn=!1;else throw TypeError("Invalid byte order value.");return sn},w2=()=>{if(ze(2,2)!==42)throw RangeError("You forgot your towel!");return!0},A2=s=>{var t={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},e;return s in t?e=t[s]:e="Tag"+s,e},E2=s=>{var t={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"},e;return s in t&&(e=t[s]),e},_2=s=>{var t;return["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(s)!==-1?t=1:["SHORT","SSHORT"].indexOf(s)!==-1?t=2:["LONG","SLONG","FLOAT"].indexOf(s)!==-1?t=4:["RATIONAL","SRATIONAL","DOUBLE"].indexOf(s)!==-1&&(t=8),t},x2=(s,t,e)=>{e=e||0;var n=Math.floor(e/8),i=t+n,r=e+s,a=32-s;if(r<=0)throw RangeError("No bits requested");if(r<=8)var l=24+e,c=ji.getUint8(i,sn);else if(r<=16)var l=16+e,c=ji.getUint16(i,sn);else if(r<=32)var l=e,c=ji.getUint32(i,sn);else throw RangeError("Too many bits requested");var u={bits:c<<l>>>a,byteOffset:i+Math.floor(r/8),bitOffset:r%8};return u},ze=(s,t)=>{if(s<=0)throw RangeError("No bytes requested");if(s<=1)return ji.getUint8(t,sn);if(s<=2)return ji.getUint16(t,sn);if(s<=3)return ji.getUint32(t,sn)>>>8;if(s<=4)return ji.getUint32(t,sn);throw RangeError("Too many bytes requested")},S2=(s,t,e,n)=>{var i=[],r=_2(t),a=r*e;if(a<=4){if(sn===!1)var l=n>>>(4-r)*8;else var l=n;i.push(l)}else for(var c=0;c<e;c++){var u=r*c;if(r>=8)if(["RATIONAL","SRATIONAL"].indexOf(t)!==-1)i.push(ze(4,n+u)),i.push(ze(4,n+u+4));else throw TypeError("Can't handle this field type or size");else i.push(ze(r,n+u))}return t==="ASCII"&&i.forEach(function(h,f,g){g[f]=String.fromCharCode(h)}),i},Is=(s,t)=>{var e=Math.pow(2,8-t);return Math.floor(s*e+(e-1))},Gv=(s,t,e,n)=>(typeof n>"u"&&(n=1),"rgba("+s+", "+t+", "+e+", "+n+")"),N1=s=>{for(var t=ze(2,s),e=[],n=s+2,i=0;i<t;n+=12,i++){var r=ze(2,n),a=ze(2,n+2),l=ze(4,n+4),c=ze(4,n+8),u=A2(r),h=E2(a),f=S2(u,h,l,c);e[u]={type:h,values:f}}pd.push(e);var g=ze(4,n);return g===0?pd:N1(g)},C2=(s,t)=>{let e=t||document.createElement("canvas");if(s&&(ji=new DataView(s),sn=b2(),!!w2())){var n=ze(4,4);pd=N1(n);var i=pd[0],r=i.ImageWidth.values[0],a=i.ImageLength.values[0];e.width=r,e.height=a;var l=[],c=i.Compression?i.Compression.values[0]:1,u=i.SamplesPerPixel.values[0],h=[],f=0,g=!1;if(i.BitsPerSample.values.forEach(function(ie,lt,Ie){h[lt]={bitsPerSample:ie,hasBytesPerSample:!1,bytesPerSample:void 0},ie%8===0&&(h[lt].hasBytesPerSample=!0,h[lt].bytesPerSample=ie/8),f+=ie},void 0),f%8===0){g=!0;var v=f/8}var y=i.StripOffsets.values,E=y.length;if(i.StripByteCounts)var C=i.StripByteCounts.values;else if(E===1)var C=[Math.ceil(r*a*f/8)];else throw Error("Cannot recover from missing StripByteCounts");for(var _=0;_<E;_++){var P=y[_];l[_]=[];for(var L=C[_],k=0,F=0,I=1,M=!0,S=[],T=0,D=0,B=0;k<L;k+=I)switch(c){case 1:for(var U=0,S=[];U<u;U++)if(h[U].hasBytesPerSample){var V=h[U].bytesPerSample*U;S.push(ze(h[U].bytesPerSample,P+k+V))}else{var G=x2(h[U].bitsPerSample,P+k,F);throw S.push(G.bits),k=G.byteOffset-P,F=G.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}if(l[_].push(S),g)I=v;else throw I=0,RangeError("Cannot handle sub-byte bits per pixel");break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:break;case 7:break;case 32773:if(M){M=!1;var Z=1,Y=1,$=ji.getInt8(P+k,sn);$>=0&&$<=127?Z=$+1:$>=-127&&$<=-1?Y=-$+1:M=!0}else{for(var W=ze(1,P+k),U=0;U<Y;U++){if(h[D].hasBytesPerSample)B=B<<8*T|W,T++,T===h[D].bytesPerSample&&(S.push(B),B=T=0,D++);else throw RangeError("Cannot handle sub-byte bits per sample");D===u&&(l[_].push(S),S=[],D=0)}Z--,Z===0&&(M=!0)}I=1;break}}if(e.getContext){var q=e.getContext("2d");if(q.fillStyle=Gv(255,255,255,0),i.RowsPerStrip)var wt=i.RowsPerStrip.values[0];else var wt=a;var Et=l.length,z=a%wt,it=z===0?wt:z,st=wt,Q=0,ct=i.PhotometricInterpretation.values[0],nt=[],at=0;if(i.ExtraSamples&&(nt=i.ExtraSamples.values,at=nt.length),i.ColorMap)var X=i.ColorMap.values,K=Math.pow(2,h[0].bitsPerSample);for(var _=0;_<Et;_++){_+1===Et&&(st=it);for(var ft=l[_].length,mt=Q*_,tt=0,pt=0;pt<ft;tt++)for(var ht=0;ht<r;ht++,pt++){var et=l[_][pt],Tt=0,qt=0,ne=0,ue=1;if(at>0){for(var $t=0;$t<at;$t++)if(nt[$t]===1||nt[$t]===2){ue=et[3+$t]/256;break}}switch(ct){case 0:if(h[0].hasBytesPerSample)var Rt=Math.pow(16,h[0].bytesPerSample*2);et.forEach(function(lt,Ie,Jt){Jt[Ie]=Rt-lt});case 1:Tt=qt=ne=Is(et[0],h[0].bitsPerSample);break;case 2:Tt=Is(et[0],h[0].bitsPerSample),qt=Is(et[1],h[1].bitsPerSample),ne=Is(et[2],h[2].bitsPerSample);break;case 3:if(X===void 0)throw Error("Palette image missing color map");var Lt=et[0];Tt=Is(X[Lt],16),qt=Is(X[K+Lt],16),ne=Is(X[2*K+Lt],16);break;case 4:throw RangeError("Not Yet Implemented: Transparency mask");case 5:throw RangeError("Not Yet Implemented: CMYK");case 6:throw RangeError("Not Yet Implemented: YCbCr");case 8:throw RangeError("Not Yet Implemented: CIELab");default:throw RangeError("Unknown Photometric Interpretation:",ct)}q.fillStyle=Gv(Tt,qt,ne,ue),q.fillRect(ht,mt+tt,1,1)}Q=st}}return e}},eu=s=>{const{mainState:{currentDocument:t}}=s,{t:e}=ra(),[n,i]=H.useState(!1),[r,a]=H.useState(!1);return H.useEffect(()=>{if(!t||n)return;const l=document.getElementById("tiff-img");try{l&&C2(t.fileData,l),i(!0)}catch{a(!0)}},[t,n]),r?O.jsx(Vi,{...s,children:O.jsx("div",{children:e("brokenFile")})}):O.jsx(Vi,{...s,children:O.jsx(T2,{id:"tiff-img"})})};eu.fileTypes=["tif","tiff","image/tif","image/tiff"];eu.weight=0;eu.fileLoader=ub;const T2=bt.canvas`
  max-width: 95%;
  max-height: 95%;
`,nu=({mainState:{currentDocument:s}})=>O.jsx(P2,{id:"txt-renderer",children:s==null?void 0:s.fileData});nu.fileTypes=["txt","text/plain"];nu.weight=0;nu.fileLoader=u0;const P2=bt.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 30px;
`;var B1={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(s,t){(function(e,n){s.exports=n()})(ya,function e(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i=!n.document&&!!n.postMessage,r=n.IS_PAPA_WORKER||!1,a={},l=0,c={parse:function(S,T){var D=(T=T||{}).dynamicTyping||!1;if(M(D)&&(T.dynamicTypingFunction=D,D={}),T.dynamicTyping=D,T.transform=!!M(T.transform)&&T.transform,T.worker&&c.WORKERS_SUPPORTED){var B=function(){if(!c.WORKERS_SUPPORTED)return!1;var V=(Z=n.URL||n.webkitURL||null,Y=e.toString(),c.BLOB_URL||(c.BLOB_URL=Z.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Y,")();"],{type:"text/javascript"})))),G=new n.Worker(V),Z,Y;return G.onmessage=P,G.id=l++,a[G.id]=G}();return B.userStep=T.step,B.userChunk=T.chunk,B.userComplete=T.complete,B.userError=T.error,T.step=M(T.step),T.chunk=M(T.chunk),T.complete=M(T.complete),T.error=M(T.error),delete T.worker,void B.postMessage({input:S,config:T,workerId:B.id})}var U=null;return c.NODE_STREAM_INPUT,typeof S=="string"?(S=function(V){return V.charCodeAt(0)===65279?V.slice(1):V}(S),U=T.download?new f(T):new v(T)):S.readable===!0&&M(S.read)&&M(S.on)?U=new y(T):(n.File&&S instanceof File||S instanceof Object)&&(U=new g(T)),U.stream(S)},unparse:function(S,T){var D=!1,B=!0,U=",",V=`\r
`,G='"',Z=G+G,Y=!1,$=null,W=!1;(function(){if(typeof T=="object"){if(typeof T.delimiter!="string"||c.BAD_DELIMITERS.filter(function(z){return T.delimiter.indexOf(z)!==-1}).length||(U=T.delimiter),(typeof T.quotes=="boolean"||typeof T.quotes=="function"||Array.isArray(T.quotes))&&(D=T.quotes),typeof T.skipEmptyLines!="boolean"&&typeof T.skipEmptyLines!="string"||(Y=T.skipEmptyLines),typeof T.newline=="string"&&(V=T.newline),typeof T.quoteChar=="string"&&(G=T.quoteChar),typeof T.header=="boolean"&&(B=T.header),Array.isArray(T.columns)){if(T.columns.length===0)throw new Error("Option columns is empty");$=T.columns}T.escapeChar!==void 0&&(Z=T.escapeChar+G),(typeof T.escapeFormulae=="boolean"||T.escapeFormulae instanceof RegExp)&&(W=T.escapeFormulae instanceof RegExp?T.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var q=new RegExp(C(G),"g");if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return wt(null,S,Y);if(typeof S[0]=="object")return wt($||Object.keys(S[0]),S,Y)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||$),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),wt(S.fields||[],S.data||[],Y);throw new Error("Unable to serialize unrecognized input");function wt(z,it,st){var Q="";typeof z=="string"&&(z=JSON.parse(z)),typeof it=="string"&&(it=JSON.parse(it));var ct=Array.isArray(z)&&0<z.length,nt=!Array.isArray(it[0]);if(ct&&B){for(var at=0;at<z.length;at++)0<at&&(Q+=U),Q+=Et(z[at],at);0<it.length&&(Q+=V)}for(var X=0;X<it.length;X++){var K=ct?z.length:it[X].length,ft=!1,mt=ct?Object.keys(it[X]).length===0:it[X].length===0;if(st&&!ct&&(ft=st==="greedy"?it[X].join("").trim()==="":it[X].length===1&&it[X][0].length===0),st==="greedy"&&ct){for(var tt=[],pt=0;pt<K;pt++){var ht=nt?z[pt]:pt;tt.push(it[X][ht])}ft=tt.join("").trim()===""}if(!ft){for(var et=0;et<K;et++){0<et&&!mt&&(Q+=U);var Tt=ct&&nt?z[et]:et;Q+=Et(it[X][Tt],et)}X<it.length-1&&(!st||0<K&&!mt)&&(Q+=V)}}return Q}function Et(z,it){if(z==null)return"";if(z.constructor===Date)return JSON.stringify(z).slice(1,25);var st=!1;W&&typeof z=="string"&&W.test(z)&&(z="'"+z,st=!0);var Q=z.toString().replace(q,Z);return(st=st||D===!0||typeof D=="function"&&D(z,it)||Array.isArray(D)&&D[it]||function(ct,nt){for(var at=0;at<nt.length;at++)if(-1<ct.indexOf(nt[at]))return!0;return!1}(Q,c.BAD_DELIMITERS)||-1<Q.indexOf(U)||Q.charAt(0)===" "||Q.charAt(Q.length-1)===" ")?G+Q+G:Q}}};if(c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=_,c.ParserHandle=E,c.NetworkStreamer=f,c.FileStreamer=g,c.StringStreamer=v,c.ReadableStreamStreamer=y,n.jQuery){var u=n.jQuery;u.fn.parse=function(S){var T=S.config||{},D=[];return this.each(function(V){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var G=0;G<this.files.length;G++)D.push({file:this.files[G],inputElem:this,instanceConfig:u.extend({},T)})}),B(),this;function B(){if(D.length!==0){var V,G,Z,Y,$=D[0];if(M(S.before)){var W=S.before($.file,$.inputElem);if(typeof W=="object"){if(W.action==="abort")return V="AbortError",G=$.file,Z=$.inputElem,Y=W.reason,void(M(S.error)&&S.error({name:V},G,Z,Y));if(W.action==="skip")return void U();typeof W.config=="object"&&($.instanceConfig=u.extend($.instanceConfig,W.config))}else if(W==="skip")return void U()}var q=$.instanceConfig.complete;$.instanceConfig.complete=function(wt){M(q)&&q(wt,$.file,$.inputElem),U()},c.parse($.file,$.instanceConfig)}else M(S.complete)&&S.complete()}function U(){D.splice(0,1),B()}}}function h(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(T){var D=F(T);D.chunkSize=parseInt(D.chunkSize),T.step||T.chunk||(D.chunkSize=null),this._handle=new E(D),(this._handle.streamer=this)._config=D}).call(this,S),this.parseChunk=function(T,D){if(this.isFirstChunk&&M(this._config.beforeFirstChunk)){var B=this._config.beforeFirstChunk(T);B!==void 0&&(T=B)}this.isFirstChunk=!1,this._halted=!1;var U=this._partialLine+T;this._partialLine="";var V=this._handle.parse(U,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var G=V.meta.cursor;this._finished||(this._partialLine=U.substring(G-this._baseIndex),this._baseIndex=G),V&&V.data&&(this._rowCount+=V.data.length);var Z=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)n.postMessage({results:V,workerId:c.WORKER_ID,finished:Z});else if(M(this._config.chunk)&&!D){if(this._config.chunk(V,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);V=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(V.data),this._completeResults.errors=this._completeResults.errors.concat(V.errors),this._completeResults.meta=V.meta),this._completed||!Z||!M(this._config.complete)||V&&V.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Z||V&&V.meta.paused||this._nextChunk(),V}this._halted=!0},this._sendError=function(T){M(this._config.error)?this._config.error(T):r&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:T,finished:!1})}}function f(S){var T;(S=S||{}).chunkSize||(S.chunkSize=c.RemoteChunkSize),h.call(this,S),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(D){this._input=D,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(T=new XMLHttpRequest,this._config.withCredentials&&(T.withCredentials=this._config.withCredentials),i||(T.onload=I(this._chunkLoaded,this),T.onerror=I(this._chunkError,this)),T.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var D=this._config.downloadRequestHeaders;for(var B in D)T.setRequestHeader(B,D[B])}if(this._config.chunkSize){var U=this._start+this._config.chunkSize-1;T.setRequestHeader("Range","bytes="+this._start+"-"+U)}try{T.send(this._config.downloadRequestBody)}catch(V){this._chunkError(V.message)}i&&T.status===0&&this._chunkError()}},this._chunkLoaded=function(){T.readyState===4&&(T.status<200||400<=T.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:T.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(D){var B=D.getResponseHeader("Content-Range");return B===null?-1:parseInt(B.substring(B.lastIndexOf("/")+1))}(T),this.parseChunk(T.responseText)))},this._chunkError=function(D){var B=T.statusText||D;this._sendError(new Error(B))}}function g(S){var T,D;(S=S||{}).chunkSize||(S.chunkSize=c.LocalChunkSize),h.call(this,S);var B=typeof FileReader<"u";this.stream=function(U){this._input=U,D=U.slice||U.webkitSlice||U.mozSlice,B?((T=new FileReader).onload=I(this._chunkLoaded,this),T.onerror=I(this._chunkError,this)):T=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var U=this._input;if(this._config.chunkSize){var V=Math.min(this._start+this._config.chunkSize,this._input.size);U=D.call(U,this._start,V)}var G=T.readAsText(U,this._config.encoding);B||this._chunkLoaded({target:{result:G}})},this._chunkLoaded=function(U){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(U.target.result)},this._chunkError=function(){this._sendError(T.error)}}function v(S){var T;h.call(this,S=S||{}),this.stream=function(D){return T=D,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var D,B=this._config.chunkSize;return B?(D=T.substring(0,B),T=T.substring(B)):(D=T,T=""),this._finished=!T,this.parseChunk(D)}}}function y(S){h.call(this,S=S||{});var T=[],D=!0,B=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(U){this._input=U,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){B&&T.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),T.length?this.parseChunk(T.shift()):D=!0},this._streamData=I(function(U){try{T.push(typeof U=="string"?U:U.toString(this._config.encoding)),D&&(D=!1,this._checkIsFinished(),this.parseChunk(T.shift()))}catch(V){this._streamError(V)}},this),this._streamError=I(function(U){this._streamCleanUp(),this._sendError(U)},this),this._streamEnd=I(function(){this._streamCleanUp(),B=!0,this._streamData("")},this),this._streamCleanUp=I(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(S){var T,D,B,U=Math.pow(2,53),V=-U,G=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Z=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Y=this,$=0,W=0,q=!1,wt=!1,Et=[],z={data:[],errors:[],meta:{}};if(M(S.step)){var it=S.step;S.step=function(X){if(z=X,ct())Q();else{if(Q(),z.data.length===0)return;$+=X.data.length,S.preview&&$>S.preview?D.abort():(z.data=z.data[0],it(z,Y))}}}function st(X){return S.skipEmptyLines==="greedy"?X.join("").trim()==="":X.length===1&&X[0].length===0}function Q(){return z&&B&&(at("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),B=!1),S.skipEmptyLines&&(z.data=z.data.filter(function(X){return!st(X)})),ct()&&function(){if(!z)return;function X(ft,mt){M(S.transformHeader)&&(ft=S.transformHeader(ft,mt)),Et.push(ft)}if(Array.isArray(z.data[0])){for(var K=0;ct()&&K<z.data.length;K++)z.data[K].forEach(X);z.data.splice(0,1)}else z.data.forEach(X)}(),function(){if(!z||!S.header&&!S.dynamicTyping&&!S.transform)return z;function X(ft,mt){var tt,pt=S.header?{}:[];for(tt=0;tt<ft.length;tt++){var ht=tt,et=ft[tt];S.header&&(ht=tt>=Et.length?"__parsed_extra":Et[tt]),S.transform&&(et=S.transform(et,ht)),et=nt(ht,et),ht==="__parsed_extra"?(pt[ht]=pt[ht]||[],pt[ht].push(et)):pt[ht]=et}return S.header&&(tt>Et.length?at("FieldMismatch","TooManyFields","Too many fields: expected "+Et.length+" fields but parsed "+tt,W+mt):tt<Et.length&&at("FieldMismatch","TooFewFields","Too few fields: expected "+Et.length+" fields but parsed "+tt,W+mt)),pt}var K=1;return!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(X),K=z.data.length):z.data=X(z.data,0),S.header&&z.meta&&(z.meta.fields=Et),W+=K,z}()}function ct(){return S.header&&Et.length===0}function nt(X,K){return ft=X,S.dynamicTypingFunction&&S.dynamicTyping[ft]===void 0&&(S.dynamicTyping[ft]=S.dynamicTypingFunction(ft)),(S.dynamicTyping[ft]||S.dynamicTyping)===!0?K==="true"||K==="TRUE"||K!=="false"&&K!=="FALSE"&&(function(mt){if(G.test(mt)){var tt=parseFloat(mt);if(V<tt&&tt<U)return!0}return!1}(K)?parseFloat(K):Z.test(K)?new Date(K):K===""?null:K):K;var ft}function at(X,K,ft,mt){var tt={type:X,code:K,message:ft};mt!==void 0&&(tt.row=mt),z.errors.push(tt)}this.parse=function(X,K,ft){var mt=S.quoteChar||'"';if(S.newline||(S.newline=function(ht,et){ht=ht.substring(0,1048576);var Tt=new RegExp(C(et)+"([^]*?)"+C(et),"gm"),qt=(ht=ht.replace(Tt,"")).split("\r"),ne=ht.split(`
`),ue=1<ne.length&&ne[0].length<qt[0].length;if(qt.length===1||ue)return`
`;for(var $t=0,Rt=0;Rt<qt.length;Rt++)qt[Rt][0]===`
`&&$t++;return $t>=qt.length/2?`\r
`:"\r"}(X,mt)),B=!1,S.delimiter)M(S.delimiter)&&(S.delimiter=S.delimiter(X),z.meta.delimiter=S.delimiter);else{var tt=function(ht,et,Tt,qt,ne){var ue,$t,Rt,Lt;ne=ne||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var ie=0;ie<ne.length;ie++){var lt=ne[ie],Ie=0,Jt=0,Xt=0;Rt=void 0;for(var Me=new _({comments:qt,delimiter:lt,newline:et,preview:10}).parse(ht),b=0;b<Me.data.length;b++)if(Tt&&st(Me.data[b]))Xt++;else{var d=Me.data[b].length;Jt+=d,Rt!==void 0?0<d&&(Ie+=Math.abs(d-Rt),Rt=d):Rt=d}0<Me.data.length&&(Jt/=Me.data.length-Xt),($t===void 0||Ie<=$t)&&(Lt===void 0||Lt<Jt)&&1.99<Jt&&($t=Ie,ue=lt,Lt=Jt)}return{successful:!!(S.delimiter=ue),bestDelimiter:ue}}(X,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess);tt.successful?S.delimiter=tt.bestDelimiter:(B=!0,S.delimiter=c.DefaultDelimiter),z.meta.delimiter=S.delimiter}var pt=F(S);return S.preview&&S.header&&pt.preview++,T=X,D=new _(pt),z=D.parse(T,K,ft),Q(),q?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return q},this.pause=function(){q=!0,D.abort(),T=M(S.chunk)?"":T.substring(D.getCharIndex())},this.resume=function(){Y.streamer._halted?(q=!1,Y.streamer.parseChunk(T,!0)):setTimeout(Y.resume,3)},this.aborted=function(){return wt},this.abort=function(){wt=!0,D.abort(),z.meta.aborted=!0,M(S.complete)&&S.complete(z),T=""}}function C(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(S){var T,D=(S=S||{}).delimiter,B=S.newline,U=S.comments,V=S.step,G=S.preview,Z=S.fastMode,Y=T=S.quoteChar===void 0||S.quoteChar===null?'"':S.quoteChar;if(S.escapeChar!==void 0&&(Y=S.escapeChar),(typeof D!="string"||-1<c.BAD_DELIMITERS.indexOf(D))&&(D=","),U===D)throw new Error("Comment character same as delimiter");U===!0?U="#":(typeof U!="string"||-1<c.BAD_DELIMITERS.indexOf(U))&&(U=!1),B!==`
`&&B!=="\r"&&B!==`\r
`&&(B=`
`);var $=0,W=!1;this.parse=function(q,wt,Et){if(typeof q!="string")throw new Error("Input must be a string");var z=q.length,it=D.length,st=B.length,Q=U.length,ct=M(V),nt=[],at=[],X=[],K=$=0;if(!q)return p();if(S.header&&!wt){var ft=q.split(B)[0].split(D),mt=[],tt={},pt=!1;for(var ht in ft){var et=ft[ht];M(S.transformHeader)&&(et=S.transformHeader(et,ht));var Tt=et,qt=tt[et]||0;for(0<qt&&(pt=!0,Tt=et+"_"+qt),tt[et]=qt+1;mt.includes(Tt);)Tt=Tt+"_"+qt;mt.push(Tt)}if(pt){var ne=q.split(B);ne[0]=mt.join(D),q=ne.join(B)}}if(Z||Z!==!1&&q.indexOf(T)===-1){for(var ue=q.split(B),$t=0;$t<ue.length;$t++){if(X=ue[$t],$+=X.length,$t!==ue.length-1)$+=B.length;else if(Et)return p();if(!U||X.substring(0,Q)!==U){if(ct){if(nt=[],Xt(X.split(D)),x(),W)return p()}else Xt(X.split(D));if(G&&G<=$t)return nt=nt.slice(0,G),p(!0)}}return p()}for(var Rt=q.indexOf(D,$),Lt=q.indexOf(B,$),ie=new RegExp(C(Y)+C(T),"g"),lt=q.indexOf(T,$);;)if(q[$]!==T)if(U&&X.length===0&&q.substring($,$+Q)===U){if(Lt===-1)return p();$=Lt+st,Lt=q.indexOf(B,$),Rt=q.indexOf(D,$)}else if(Rt!==-1&&(Rt<Lt||Lt===-1))X.push(q.substring($,Rt)),$=Rt+it,Rt=q.indexOf(D,$);else{if(Lt===-1)break;if(X.push(q.substring($,Lt)),d(Lt+st),ct&&(x(),W))return p();if(G&&nt.length>=G)return p(!0)}else for(lt=$,$++;;){if((lt=q.indexOf(T,lt+1))===-1)return Et||at.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:nt.length,index:$}),b();if(lt===z-1)return b(q.substring($,lt).replace(ie,T));if(T!==Y||q[lt+1]!==Y){if(T===Y||lt===0||q[lt-1]!==Y){Rt!==-1&&Rt<lt+1&&(Rt=q.indexOf(D,lt+1)),Lt!==-1&&Lt<lt+1&&(Lt=q.indexOf(B,lt+1));var Ie=Me(Lt===-1?Rt:Math.min(Rt,Lt));if(q.substr(lt+1+Ie,it)===D){X.push(q.substring($,lt).replace(ie,T)),q[$=lt+1+Ie+it]!==T&&(lt=q.indexOf(T,$)),Rt=q.indexOf(D,$),Lt=q.indexOf(B,$);break}var Jt=Me(Lt);if(q.substring(lt+1+Jt,lt+1+Jt+st)===B){if(X.push(q.substring($,lt).replace(ie,T)),d(lt+1+Jt+st),Rt=q.indexOf(D,$),lt=q.indexOf(T,$),ct&&(x(),W))return p();if(G&&nt.length>=G)return p(!0);break}at.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:nt.length,index:$}),lt++}}else lt++}return b();function Xt(R){nt.push(R),K=$}function Me(R){var N=0;if(R!==-1){var j=q.substring(lt+1,R);j&&j.trim()===""&&(N=j.length)}return N}function b(R){return Et||(R===void 0&&(R=q.substring($)),X.push(R),$=z,Xt(X),ct&&x()),p()}function d(R){$=R,Xt(X),X=[],Lt=q.indexOf(B,$)}function p(R){return{data:nt,errors:at,meta:{delimiter:D,linebreak:B,aborted:W,truncated:!!R,cursor:K+(wt||0)}}}function x(){V(p()),nt=[],at=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return $}}function P(S){var T=S.data,D=a[T.workerId],B=!1;if(T.error)D.userError(T.error,T.file);else if(T.results&&T.results.data){var U={abort:function(){B=!0,L(T.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:k,resume:k};if(M(D.userStep)){for(var V=0;V<T.results.data.length&&(D.userStep({data:T.results.data[V],errors:T.results.errors,meta:T.results.meta},U),!B);V++);delete T.results}else M(D.userChunk)&&(D.userChunk(T.results,U,T.file),delete T.results)}T.finished&&!B&&L(T.workerId,T.results)}function L(S,T){var D=a[S];M(D.userComplete)&&D.userComplete(T),D.terminate(),delete a[S]}function k(){throw new Error("Not implemented.")}function F(S){if(typeof S!="object"||S===null)return S;var T=Array.isArray(S)?[]:{};for(var D in S)T[D]=F(S[D]);return T}function I(S,T){return function(){S.apply(T,arguments)}}function M(S){return typeof S=="function"}return r&&(n.onmessage=function(S){var T=S.data;if(c.WORKER_ID===void 0&&T&&(c.WORKER_ID=T.workerId),typeof T.input=="string")n.postMessage({workerId:c.WORKER_ID,results:c.parse(T.input,T.config),finished:!0});else if(n.File&&T.input instanceof File||T.input instanceof Object){var D=c.parse(T.input,T.config);D&&n.postMessage({workerId:c.WORKER_ID,results:D,finished:!0})}}),(f.prototype=Object.create(h.prototype)).constructor=f,(g.prototype=Object.create(h.prototype)).constructor=g,(v.prototype=Object.create(v.prototype)).constructor=v,(y.prototype=Object.create(h.prototype)).constructor=y,c})})(B1);var R2=B1.exports;const L2=Wm(R2),iu=({mainState:{currentDocument:s,config:t}})=>{const[e,n]=H.useState([]);return H.useEffect(()=>{var i;if(s!=null&&s.fileData){const r=L2.parse(s.fileData,{delimiter:(t==null?void 0:t.csvDelimiter)??","});!((i=r.errors)!=null&&i.length)&&r.data&&n(r.data)}},[s,t==null?void 0:t.csvDelimiter]),e.length?O.jsx(k2,{children:O.jsxs(I2,{children:[O.jsx("thead",{children:O.jsx("tr",{children:e[0].map(i=>O.jsx("th",{children:i},i))})}),O.jsx("tbody",{children:e.slice(1,e.length).map(i=>O.jsx("tr",{children:i.map(r=>O.jsx("td",{children:r},r))},i.join("")))})]})}):null};iu.fileTypes=["csv","text/csv"];iu.weight=0;iu.fileLoader=u0;const k2=bt.div`
  width: 100%;
`,I2=bt.table`
  width: 100%;
  text-align: left;

  th,
  td {
    padding: 5px 10px;

    &:empty {
      display: none;
    }
  }
`,Rp=s=>O.jsx(Vi,{...s});Rp.fileTypes=["gif","image/gif"];Rp.weight=0;const Lp=({mainState:{currentDocument:s}})=>s?O.jsx(M2,{id:"video-renderer",children:O.jsx(F2,{controls:!0,src:s.uri})}):null;Lp.fileTypes=["video/mp4","video/quicktime","video/x-msvideo"];Lp.weight=0;const M2=bt.div`
  width: 100%;
`,F2=bt.video`
  width: 100%;
  height: 100%;
  border: 0;
`,kp=s=>O.jsx(Vi,{...s});kp.fileTypes=["webp","image/webp"];kp.weight=0;const $1=[hp,Xh,up,Yh,Tp,Pp,eu,nu,iu,Rp,Lp,kp],D2=H.forwardRef((s,t)=>{const{documents:e,theme:n}=s;if(!e)throw new Error("Please provide an array of documents to DocViewer!");return O.jsx(KT,{ref:t,pluginRenderers:$1,...s,children:O.jsx(MS,{theme:n?{...gv,...n}:gv,children:O.jsxs(N2,{id:"react-doc-viewer","data-testid":"react-doc-viewer",className:s.className,style:s.style,children:[O.jsx(xP,{}),O.jsx(kP,{})]})})})}),O2=H.memo(D2),N2=bt.div`
  display: flex;
  flex-direction: column;
  background: #ffffff;
  width: 100%;
  height: 100%;
`;exports.BMPRenderer=hp;exports.Buffer=rd;exports.CSVRenderer=iu;exports.DocViewer=O2;exports.DocViewerRenderers=$1;exports.HTMLRenderer=Xh;exports.JPGRenderer=up;exports.JPGRenderer$1=Rp;exports.MSDocRenderer=Yh;exports.PDFRenderer=Tp;exports.PNGRenderer=Pp;exports.TIFFRenderer=eu;exports.TXTRenderer=nu;exports.VideoRenderer=Lp;exports.WebPRenderer=kp;exports.arrayBufferFileLoader=ub;exports.binaryStringFileLoader=CP;exports.commonjsGlobal=ya;exports.dataURLFileLoader=h0;exports.defaultFileLoader=db;exports.dist=fR;exports.getAugmentedNamespace=U1;exports.getDefaultExportFromCjs=Wm;exports.process$1=dt;exports.supportedLanguages=GT;exports.textFileLoader=u0;
